# å¼€æºé€šä¹‰ä¸‡ç›¸æœ¬åœ°éƒ¨ç½²æ–¹æ¡ˆï¼Œæ–‡ç”Ÿè§†é¢‘ã€å›¾ç”Ÿè§†é¢‘ã€è§†é¢‘ç”Ÿæˆå¤§æ¨¡å‹ï¼Œæ”¯æŒæ¶ˆè´¹çº§æ˜¾å¡ï¼



# ä¸‡ç›¸2.1å¼€æº

è¿‘æ—¥ï¼Œå¤§æ¨¡å‹ä¸‡ç›¸2.1ï¼ˆWanï¼‰é‡ç£…å¼€æºï¼Œæ­¤æ¬¡å¼€æºé‡‡ç”¨Apache2.0åè®®ï¼Œ14Bå’Œ1.3Bä¸¤ä¸ªå‚æ•°è§„æ ¼çš„å…¨éƒ¨æ¨ç†ä»£ç å’Œæƒé‡å…¨éƒ¨å¼€æºï¼ŒåŒæ—¶æ”¯æŒæ–‡ç”Ÿè§†é¢‘å’Œå›¾ç”Ÿè§†é¢‘ä»»åŠ¡ï¼Œå…¨çƒå¼€å‘è€…å¯åœ¨Githubã€HuggingFaceã€é­”æ­ç¤¾åŒºä¸‹è½½ä½“éªŒã€‚

æ­¤æ¬¡å¼€æºçš„ä¸¤ä¸ªå‚æ•°ç‰ˆæœ¬æ¨¡å‹ï¼š

## 14Bç‰ˆæœ¬ä¸‡ç›¸æ¨¡å‹

14Bç‰ˆæœ¬ä¸‡ç›¸æ¨¡å‹åœ¨æŒ‡ä»¤éµå¾ªã€å¤æ‚è¿åŠ¨ç”Ÿæˆã€ç‰©ç†å»ºæ¨¡ã€æ–‡å­—è§†é¢‘ç”Ÿæˆç­‰æ–¹é¢è¡¨ç°çªå‡ºï¼Œåœ¨æƒå¨è¯„æµ‹é›†Vbenchä¸­ï¼Œä¸‡ç›¸2.1ä»¥æ€»åˆ†86.22%å¤§å¹…è¶…è¶ŠSoraã€Lumaã€Pikaç­‰å›½å†…å¤–æ¨¡å‹ï¼Œç¨³å±…æ¦œé¦–ä½ç½®ã€‚

## 1.3Bç‰ˆæœ¬

1.3Bç‰ˆæœ¬ä¸‡ç›¸æ¨¡å‹ä¸ä»…è¶…è¿‡äº†æ›´å¤§å°ºå¯¸çš„å¼€æºæ¨¡å‹ï¼Œç”šè‡³è¿˜å’Œä¸€äº›é—­æºçš„æ¨¡å‹ç»“æœæ¥è¿‘ï¼ŒåŒæ—¶èƒ½åœ¨æ¶ˆè´¹çº§æ˜¾å¡è¿è¡Œï¼Œä»…éœ€8.2GBæ˜¾å­˜å°±å¯ä»¥ç”Ÿæˆ480Pè§†é¢‘ï¼Œé€‚ç”¨äºäºŒæ¬¡æ¨¡å‹å¼€å‘å’Œå­¦æœ¯ç ”ç©¶ã€‚

![image-20250315001037814](https://imgoss.xgss.net/picgo/image-20250315001037814.png?aliyun)

## å¼€æºç¤¾åŒºé“¾æ¥


Github: https://github.com/Wan-Video/Wan2.1

HuggingFace: https://huggingface.co/Wan-AI

é­”æ­ç¤¾åŒºï¼šhttps://modelscope.cn/organization/Wan-AI

é€šä¹‰ä¸‡ç›¸ï¼šhttps://tongyi.aliyun.com/wanxiang/videoCreation

# æœ¬åœ°æ­å»º

## ç¡¬ä»¶ä»‹ç»

æœ¬æµ‹è¯•çš„ç¡¬ä»¶

ç³»ç»Ÿï¼šWindows11ä¸“ä¸šç‰ˆ

CPU: è‹±ç‰¹å°”I7-13700KF

å†…å­˜ï¼š 32G

ç¡¬ç›˜ï¼š1T nvme +4T æœºæ¢°

æ˜¾å¡ï¼šRTX 4070 Ti 

# æ­å»ºè¯´æ˜

èµ·åˆæŒ‰ç…§å®˜æ–¹æ¨èçš„æ–¹æ¡ˆæ­å»º

# æ­å»ºæ–¹æ¡ˆä¸€

## 1.ä¸‹è½½å®‰è£…ComfyUI

ä¸€é”®å®‰è£…åŒ… ï¼š

ã€[ç‚¹å‡»å‰å¾€](https://www.comfy.org/) ã€‘https://www.comfy.org/ æ”¯æŒ Windows å’Œ mac ç³»ç»Ÿï¼Œæˆ‘è¿™é‡Œä¸‹è½½Windowsç³»ç»Ÿçš„

é€‰æ‹©GPU

![image-20250314145540776](https://imgoss.xgss.net/picgo/image-20250314145540776.png?aliyun)

å®‰è£…ä½ç½®ï¼Œä¸€èˆ¬é»˜è®¤ï¼Œå¦‚æœCç›˜ç©ºé—´ä¸å¤Ÿï¼Œå¯ä»¥æ”¹æˆå…¶ä»–ä½ç½®

æˆ‘è¿™é‡Œæ”¹æˆDç›˜,D:\AI\ComfyUI

![image-20250314145753940](https://imgoss.xgss.net/picgo/image-20250314145753940.png?aliyun)

å…¶ä»–é»˜è®¤

ç‚¹å‡»å®‰è£…å³å¯

![image-20250314150111085](https://imgoss.xgss.net/picgo/image-20250314150111085.png?aliyun)

![image-20250314150206714](https://imgoss.xgss.net/picgo/image-20250314150206714.png?aliyun)

å®‰è£…å®Œæˆä¹‹åï¼Œç‚¹å‡»ä¸‹è½½æ¨¡å‹ã€‚

![image-20250314150338625](https://imgoss.xgss.net/picgo/image-20250314150338625.png?aliyun)

## 2.ä¸‹è½½æ–‡æœ¬ç¼–ç å™¨å’Œ VAE

ä¸‹è½½[umt5_xxl_fp8_e4m3fn_scaled.safetensors ](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/tree/main/split_files/text_encoders)ï¼Œ

åœ°å€ï¼šhttps://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/tree/main/split_files/text_encoders

å¦‚æœæ˜¾å¡æ˜¾å­˜ä½äº8Gé€‰æ‹©ä¸‹è½½ï¼šâ€œumt5_xxl_fp8_e4m3fn_scaled.safetensorsâ€ï¼Œå¦‚æœä½ çš„æ˜¾å¡æ˜¾å­˜å¤§äº12Gå¯ä»¥é€‰æ‹©â€œumt5_xxl_fp16.safetensorsâ€ã€‚

æˆ‘è¿™æ¼”ç¤ºä¸‹è½½ï¼Œumt5_xxl_fp8_e4m3fn_scaled.safetensors

å°†ä¸‹è½½å¥½çš„æ–‡ä»¶æ”¾å…¥ï¼šComfyUI/models/text_encoders/

[wan_2.1_vae.safetensors ](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/vae/wan_2.1_vae.safetensors) 

åœ°å€ï¼šhttps://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/vae/wan_2.1_vae.safetensors

![image-20250314152005864](https://imgoss.xgss.net/picgo/image-20250314152005864.png?aliyun)

æ”¾å…¥ï¼šComfyUI/models/vae/



## **3ã€**ä¸‹è½½è§†é¢‘ç”Ÿæˆæ¨¡å‹

 ã€[ç‚¹å‡»ä¸‹è½½](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/tree/main/split_files/diffusion_models)ã€‘åœ°å€ï¼šhttps://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/tree/main/split_files/diffusion_models

æ³¨æ„ï¼šå»ºè®®ä½¿ç”¨ fp16 ç‰ˆæœ¬è€Œä¸æ˜¯ bf16 ç‰ˆæœ¬ï¼Œå› ä¸ºå®ƒä»¬ä¼šäº§ç”Ÿæ›´å¥½çš„ç»“æœã€‚

è´¨é‡ç­‰çº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼šfp16 > bf16 > fp8_scaled > fp8_e4m3fn

æ ¹æ®ä½ è‡ªå·±çš„ç”µè„‘é…ç½®é€‰æ‹©ã€‚

æˆ‘è¿™é‡Œæ¼”ç¤ºä¸‹è½½â€œwan2.1_t2v_1.3B_fp16.safetensorsâ€

è¿™äº›æ–‡ä»¶ä½äºï¼šComfyUI/models/diffusion_models/

è¿™äº›ç¤ºä¾‹ä½¿ç”¨ 16 ä½æ–‡ä»¶ï¼Œä½†å¦‚æœå†…å­˜ä¸è¶³ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ fp8 æ–‡ä»¶ã€‚

## 4ã€æ–‡å­—è½¬è§†é¢‘å·¥ä½œæµ

ä¸‹è½½ [Json æ ¼å¼çš„å·¥ä½œæµ](https://comfyanonymous.github.io/ComfyUI_examples/wan/text_to_video_wan.json)ï¼Œåœ°å€ï¼šhttps://comfyanonymous.github.io/ComfyUI_examples/wan/text_to_video_wan.json



## 5.å¯¼å…¥å·¥ä½œæµ

é‡å¯ ComfyUI

é»˜è®¤çš„æç¤ºè¯ï¼Œç‚¹å‡»æ‰§è¡ŒæŒ‰é’®ã€‚

![image-20250314180435615](https://imgoss.xgss.net/picgo/image-20250314180435615.png?aliyun)



ä¿®æ”¹æç¤ºè¯ï¼Œç”Ÿæˆè§†é¢‘ï¼Œä»¥ä¸‹å›¾ç‰‡ä¸ºwan2.1ç”Ÿæˆçš„ã€‚

## å…³é”®å­—

```
ä¸€ä½æ—¶å°šçš„å¥³å£«åœ¨å……æ»¡æ¸©æš–å‘å…‰çš„éœ“è™¹ç¯å’ŒåŠ¨ç”»åŸå¸‚æ ‡å¿—çš„ä¸œäº¬è¡—é“ä¸Šè¡Œèµ°ã€‚å¥¹ç©¿ç€é»‘è‰²çš®å¤¹å…‹ï¼Œä¸€æ¡é•¿çº¢è£™å’Œé»‘è‰²é´å­ï¼ŒèƒŒç€é»‘è‰²æ‰‹æåŒ…ã€‚å¥¹æˆ´ç€å¤ªé˜³é•œå’Œçº¢è‰²å£çº¢ã€‚å¥¹èµ°è·¯è‡ªä¿¡è€Œéšæ„ã€‚è¡—é“æ½®æ¹¿è€Œå…·æœ‰åå°„æ€§ï¼Œè¥é€ å‡ºäº”å…‰åè‰²ç¯å…‰çš„é•œé¢æ•ˆæœã€‚è®¸å¤šè¡Œäººåœ¨å››å¤„èµ°åŠ¨ã€‚
```

![image-20250314182843048](https://imgoss.xgss.net/picgo/image-20250314182843048.png?aliyun)

å†è®©deepseekç”Ÿæˆä¸€äº›æç¤ºè¯



## ç¾å¥³æ»‘é›ª

```
åœºæ™¯ï¼šé›ªå±±ã€æ»‘é›ªé“
ä¸»è§’ï¼šä¸€ä½å¹´è½»å¥³æ€§ï¼Œç©¿ç€æ—¶å°šçš„æ»‘é›ªæœ
åŠ¨ä½œï¼šå¥¹å¿«é€Ÿä¸‹å¡ã€åšå‡ºæµç•…çš„è½¬å¼¯åŠ¨ä½œï¼Œå¶å°”åšä¸€äº›é«˜éš¾åº¦çš„è·³è·ƒæˆ–èŠ±å¼åŠ¨ä½œ
ç¯å¢ƒï¼šé˜³å…‰æ˜åªšï¼Œé›ªåœ°åå°„å‡ºè€€çœ¼çš„å…‰èŠ’ï¼Œè¿œå¤„æ˜¯ç™½é›ªè¦†ç›–çš„å±±è„‰ï¼Œæ»‘é›ªé“ä¸Šè¿˜æœ‰å…¶ä»–æ»‘é›ªè€…
æƒ…æ„Ÿï¼šå±•ç°å‡ºå¥¹çš„è‡ªä¿¡ã€ä¼˜é›…å’Œé€Ÿåº¦æ„Ÿï¼Œé•œå¤´æ•æ‰å¥¹å…´å¥‹å’Œä¸“æ³¨çš„è¡¨æƒ…
éŸ³ä¹ï¼šåŠ¨æ„Ÿçš„ç”µå­éŸ³ä¹æˆ–æé™è¿åŠ¨é£æ ¼çš„èƒŒæ™¯éŸ³ä¹
ç»†èŠ‚ï¼šé•œå¤´å¯ä»¥èšç„¦å¥¹çš„æ»‘é›ªè£…å¤‡ï¼Œæˆ–è€…å¿«é€Ÿè½¬åœºå±•ç¤ºå¥¹ä¸é›ªåœ°ç¯å¢ƒçš„äº’åŠ¨ã€‚
```

![image-20250314183103021](https://imgoss.xgss.net/picgo/image-20250314183103021.png?aliyun)

## å°çŒ«è·³èˆ

```
åœºæ™¯ï¼šæ¸©é¦¨çš„å®¶ä¸­ç¯å¢ƒï¼Œé˜³å…‰é€è¿‡çª—æˆ·ç…§è¿›æˆ¿é—´ï¼Œåœ°æ¿å¹²å‡€æ•´æ´
ä¸»è§’ï¼šä¸€åªå¯çˆ±çš„å°çŒ«ï¼Œæ¯›èŒ¸èŒ¸çš„ï¼Œé¢œè‰²å¯ä»¥æ˜¯æ©™è‰²ã€é»‘ç™½ç›¸é—´æˆ–å…¶ä»–å¯çˆ±é…è‰²
åŠ¨ä½œï¼šå°çŒ«éšç€éŸ³ä¹çš„èŠ‚å¥è½»å·§åœ°è·³èˆï¼Œåšå‡ºå°èŒƒå›´çš„æ—‹è½¬ã€æ‘†åŠ¨æˆ–æ˜¯å¯çˆ±çš„èˆæ­¥ï¼Œç”šè‡³å¯èƒ½ç”¨çˆªå­æ‰“èŠ‚å¥
ç¯å¢ƒï¼šæˆ¿é—´é‡Œå¯èƒ½æœ‰ç©å…·çƒã€æ¯¯å­ç­‰å°çŒ«å¸¸è§çš„ç‰©å“ï¼Œå¢æ·»è¶£å‘³æ€§
éŸ³ä¹ï¼šæ¬¢å¿«çš„ã€è½»æ¾çš„èƒŒæ™¯éŸ³ä¹ï¼Œé€‚åˆå°çŒ«çš„åŠ¨ä½œå’Œæ°”æ°›ï¼Œå¯ä»¥æ˜¯ä¸€äº›ç«¥è¶£æˆ–ç”µå­é£æ ¼çš„æ—‹å¾‹
æƒ…æ„Ÿï¼šè¡¨ç°å‡ºå°çŒ«è°ƒçš®ã€æ´»æ³¼çš„ä¸€é¢ï¼Œé…åˆé•œå¤´æ•æ‰å®ƒå¿«ä¹ã€ä¸“æ³¨ã€æˆ–è€…ææ€ªçš„è¡¨æƒ…
ç»†èŠ‚ï¼šå¯ä»¥ç‰¹å†™å°çŒ«çš„è„šæ­¥æˆ–å°¾å·´çš„æ‘†åŠ¨ï¼Œå±•ç¤ºå…¶åŠ¨ä½œçš„åè°ƒæ€§å’Œå¯çˆ±ç¨‹åº¦ï¼Œå¶å°”åšäº›æç¬‘æˆ–æ„å¤–çš„åŠ¨ä½œæ¥å¢åŠ è¶£å‘³æ€§ã€‚
```

![image-20250314183344374](https://imgoss.xgss.net/picgo/image-20250314183344374.png?aliyun)

# å›¾ç”Ÿè§†é¢‘

## ä¸‹è½½[wan2.1_i2v_480p_14B_fp16.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/diffusion_models/wan2.1_i2v_480p_14B_fp16.safetensors)æ–‡ä»¶

åœ°å€ï¼š https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/tree/main/split_files/diffusion_models

æ ¹æ®è‡ªå·±çš„æ˜¾å­˜å¤§å°é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©å°ä¸€ç‚¹çš„ wan2.1_t2v_1.3B_bf16.safetensors

å°†å…¶æ”¾å…¥ï¼šComfyUI/models/diffusion_models/

![image-20250314160257722](https://imgoss.xgss.net/picgo/image-20250314160257722.png?aliyun)



ä¸‹è½½ [clip_vision_h.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/clip_vision/clip_vision_h.safetensors) æ–‡ä»¶

åœ°å€ï¼šhttps://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/clip_vision/clip_vision_h.safetensors

![image-20250314155920162](https://imgoss.xgss.net/picgo/image-20250314155920162.png?aliyun)

æ”¾å…¥ï¼šComfyUI/models/clip_vision/



è¯·æ³¨æ„ï¼Œæ­¤ç¤ºä¾‹ä»…ç”Ÿæˆ 512Ã—512 çš„ 33 å¸§ï¼Œå› ä¸ºæˆ‘å¸Œæœ›å®ƒæ˜“äºè®¿é—®ï¼Œä½†æ¨¡å‹å¯ä»¥åšçš„ä¸æ­¢è¿™äº›ã€‚å¦‚æœæ‚¨æœ‰ç¡¬ä»¶/è€å¿ƒè¿è¡Œå®ƒï¼Œ720p æ¨¡å‹å°±ç›¸å½“ä¸é”™ã€‚

[Json æ ¼å¼çš„å·¥ä½œæµ](https://comfyanonymous.github.io/ComfyUI_examples/wan/image_to_video_wan_example.json)

[è¾“å…¥å›¾åƒå¯ä»¥åœ¨é€šé‡](https://comfyanonymous.github.io/ComfyUI_examples/flux)é¡µé¢ä¸Šæ‰¾åˆ°ã€‚

[ä»¥ä¸‹æ˜¯720p ](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/diffusion_models/wan2.1_i2v_720p_14B_fp16.safetensors)å‹å·çš„ç›¸åŒç¤ºä¾‹ï¼š



å±±ç¾Šæ‰“æ¶

åŸå›¾ï¼š

![image-20250314183556177](https://imgoss.xgss.net/picgo/image-20250314183556177.png?aliyun)

ç”Ÿæˆä¹‹åçš„è§†é¢‘ï¼ˆæˆªå›¾ï¼‰

![image-20250314183534058](https://imgoss.xgss.net/picgo/image-20250314183534058.png?aliyun)







# æ­å»ºæ–¹æ¡ˆäºŒ

ç”±äºæ–¹æ¡ˆäºŒæ­å»ºæ–¹æ¡ˆä¸€ç›´æŠ¥é”™ï¼Œè¿™ç§æ–¹æ³•ä¸æ¨èï¼Œä»…ä½œä¸ºç¬”è€…è®°å½•é‡‡å‘ï¼

## 1.å®‰è£…Python

å»pythonå®˜ç½‘ä¸‹è½½ï¼š

https://www.python.org/downloads/

æˆ‘è¿™è¾¹ä¸‹è½½çš„æ˜¯ python-3.13.2-amd64.exe

å®‰è£…python

å‹¾é€‰ä¸‹é¢ä¸¤é¡¹ï¼Œå†ç‚¹å‡» install nowï¼Œå®‰è£…è½¯ä»¶ã€‚

![image-20250307161033932](https://imgoss.xgss.net/picgo/image-20250307161033932.png?aliyun)

## 2.Pythonæ¢æˆå›½å†…æº

```
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple/
```

åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š

![image-20250307161525029](https://imgoss.xgss.net/picgo/image-20250307161525029.png?aliyun)

## 3.å…‹éš†é¡¹ç›®Wan2.1

å…‹éš†é¡¹ç›®

```
git clone https://github.com/Wan-Video/Wan2.1.git
cd Wan2.1
```

å®‰è£…ä¾èµ–

```
Install dependencies:
æŸ¥çœ‹ç‰ˆæœ¬ï¼š
pip --version
pip 24.3.1 

# Ensure torch >= 2.4.0
pip install -r requirements.txt
```

![image-20250307162035740](https://imgoss.xgss.net/picgo/image-20250307162035740.png?aliyun)

æŠ¥é”™1ï¼š

```
     ---------------------------------------- 1.3/1.3 MB 506.7 kB/s eta 0:00:00
Collecting imageio-ffmpeg (from -r requirements.txt (line 13))
  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/2c/c6/fa760e12a2483469e2bf5058c5faff664acf66cadb4df2ad6205b016a73d/imageio_ffmpeg-0.6.0-py3-none-win_amd64.whl (31.2 MB)
     -------------------------------------- 31.2/31.2 MB 565.4 kB/s eta 0:00:00
Collecting flash_attn (from -r requirements.txt (line 14))
  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/11/34/9bf60e736ed7bbe15055ac2dab48ec67d9dbd088d2b4ae318fd77190ab4e/flash_attn-2.7.4.post1.tar.gz (6.0 MB)
     ---------------------------------------- 6.0/6.0 MB 872.1 kB/s eta 0:00:00
ERROR: Could not install packages due to an OSError: [Errno 2] No such file or directory: 'C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-install-8t1fvex0\\flash-attn_355b4bf0645846d5946da128691050af\\csrc\\composable_kernel\\client_example\\24_grouped_conv_activation\\grouped_convnd_fwd_scaleadd_scaleadd_relu\\grouped_conv_fwd_scaleadd_scaleadd_relu_bf16.cpp'
HINT: This error might have occurred since this system does not have Windows Long Path support enabled. You can find information on how to enable this at https://pip.pypa.io/warnings/enable-long-paths


[notice] A new release of pip is available: 24.3.1 -> 25.0.1
[notice] To update, run: python.exe -m pip install --upgrade pip
```

è§£å†³ï¼š

```
python.exe -m pip install --upgrade pip
pip --version
pip 25.0.1
```

æŠ¥é”™2ï¼š

```
Collecting flash_attn (from -r requirements.txt (line 14))
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/11/34/9bf60e736ed7bbe15055ac2dab48ec67d9dbd088d2b4ae318fd77190ab4e/flash_attn-2.7.4.post1.tar.gz (6.0 MB)
ERROR: Could not install packages due to an OSError: [Errno 2] No such file or directory: 'C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-install-kgnff0x2\\flash-attn_f6b86d432d5f493d9ccd50fb1e950e0e\\csrc\\composable_kernel\\client_example\\24_grouped_conv_activation\\grouped_convnd_fwd_scaleadd_scaleadd_relu\\grouped_conv_fwd_scaleadd_scaleadd_relu_bf16.cpp'
HINT: This error might have occurred since this system does not have Windows Long Path support enabled. You can find information on how to enable this at https://pip.pypa.io/warnings/enable-long-paths
```

### å¯ç”¨Windowsé•¿è·¯å¾„æ”¯æŒ

ä»Windows 10ç‰ˆæœ¬1607å¼€å§‹ï¼ŒMicrosoftå¼•å…¥äº†å¯¹é•¿è·¯å¾„çš„æ”¯æŒï¼Œä½†éœ€è¦æ‰‹åŠ¨å¯ç”¨ã€‚

1. **é€šè¿‡æ³¨å†Œè¡¨å¯ç”¨é•¿è·¯å¾„æ”¯æŒ**

   - æŒ‰ä¸‹`Win + R`ï¼Œæ‰“å¼€è¿è¡Œå¯¹è¯æ¡†ï¼Œè¾“å…¥`regedit`å¹¶å›è½¦ï¼Œæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ã€‚

   - å¯¼èˆªåˆ°ä»¥ä¸‹è·¯å¾„ï¼š

     ```
     HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem
     ```

   - åœ¨å³ä¾§çª—æ ¼ä¸­æ‰¾åˆ°åä¸º`LongPathsEnabled`çš„DWORDå€¼ã€‚å¦‚æœæ²¡æœ‰ï¼Œå³é”®å•å‡»ç©ºç™½å¤„ï¼Œé€‰æ‹©æ–°å»º -> DWORDï¼ˆ32ä½ï¼‰å€¼ï¼Œå¹¶å‘½åä¸º`LongPathsEnabled`ã€‚

   - åŒå‡»`LongPathsEnabled`ï¼Œå°†å…¶å€¼è®¾ç½®ä¸º`1`ã€‚

   - å…³é—­æ³¨å†Œè¡¨ç¼–è¾‘å™¨ã€‚

   **æˆ–è€…**ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹PowerShellå‘½ä»¤ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰ï¼š

   powershell

   ```powershell
   New-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\FileSystem" -Name "LongPathsEnabled" -Value 1 -PropertyType DWORD -Force
   ```

![image-20250307164222817](https://imgoss.xgss.net/picgo/image-20250307164222817.png?aliyun)

æŠ¥é”™3

```
  Getting requirements to build wheel did not run successfully.
  exit code: 1

  [23 lines of output]
  Traceback (most recent call last):
    File "C:\Users\Administrator\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip\_vendor\pyproject_hooks\_in_process\_in_process.py", line 389, in <module>
      main()
      ~~~~^^
    File "C:\Users\Administrator\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip\_vendor\pyproject_hooks\_in_process\_in_process.py", line 373, in main
      json_out["return_val"] = hook(**hook_input["kwargs"])
                               ~~~~^^^^^^^^^^^^^^^^^^^^^^^^
    File "C:\Users\Administrator\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip\_vendor\pyproject_hooks\_in_process\_in_process.py", line 143, in get_requires_for_build_wheel
      return hook(config_settings)
    File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-jbn4g9x9\overlay\Lib\site-packages\setuptools\build_meta.py", line 334, in get_requires_for_build_wheel
      return self._get_build_requires(config_settings, requirements=[])
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-jbn4g9x9\overlay\Lib\site-packages\setuptools\build_meta.py", line 304, in _get_build_requires
      self.run_setup()
      ~~~~~~~~~~~~~~^^
    File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-jbn4g9x9\overlay\Lib\site-packages\setuptools\build_meta.py", line 522, in run_setup
      super().run_setup(setup_script=setup_script)
      ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-jbn4g9x9\overlay\Lib\site-packages\setuptools\build_meta.py", line 320, in run_setup
      exec(code, locals())
      ~~~~^^^^^^^^^^^^^^^^
    File "<string>", line 22, in <module>
  ModuleNotFoundError: No module named 'torch'
  [end of output]

  note: This error originates from a subprocess, and is likely not a problem with pip.
error: subprocess-exited-with-error

Getting requirements to build wheel did not run successfully.
exit code: 1

See above for output.

note: This error originates from a subprocess, and is likely not a problem with pip.
```



## æŸ¥çœ‹NVIDIAçš„ç‰ˆæœ¬

![image-20250307170811387](https://imgoss.xgss.net/picgo/image-20250307170811387.png?aliyun)

## ä¸‹è½½CUDA Toolkit

https://developer.nvidia.com/cuda-toolkit-archive

![image-20250307171126638](https://imgoss.xgss.net/picgo/image-20250307171126638.png?aliyun)

å®‰è£…è½¯ä»¶

![image-20250307171840360](https://imgoss.xgss.net/picgo2025/image-20250307171840360.png?aliyun)



![image-20250307172337568](https://imgoss.xgss.net/picgo/image-20250307172337568.png?aliyun)

éªŒè¯

```
nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2024 NVIDIA Corporation
Built on Wed_Oct_30_01:18:48_Pacific_Daylight_Time_2024
Cuda compilation tools, release 12.6, V12.6.85
Build cuda_12.6.r12.6/compiler.35059454_0

```



## å®‰è£…flash_attn



```
pip install flash_attn -i https://mirrors.aliyun.com/pypi/simple/
```

é‡åˆ°æŠ¥é”™ï¼š

```
 pip install flash_attn -i https://mirrors.aliyun.com/pypi/simple/
Looking in indexes: https://mirrors.aliyun.com/pypi/simple/
Collecting flash_attn
  Using cached https://mirrors.aliyun.com/pypi/packages/11/34/9bf60e736ed7bbe15055ac2dab48ec67d9dbd088d2b4ae318fd77190ab4e/flash_attn-2.7.4.post1.tar.gz (6.0 MB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... error
  error: subprocess-exited-with-error

  Ã— Getting requirements to build wheel did not run successfully.
  â”‚ exit code: 1
  â•°â”€> [23 lines of output]
      Traceback (most recent call last):
        File "C:\Users\Administrator\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip\_vendor\pyproject_hooks\_in_process\_in_process.py", line 389, in <module>
          main()
          ~~~~^^
        File "C:\Users\Administrator\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip\_vendor\pyproject_hooks\_in_process\_in_process.py", line 373, in main
          json_out["return_val"] = hook(**hook_input["kwargs"])
                                   ~~~~^^^^^^^^^^^^^^^^^^^^^^^^
        File "C:\Users\Administrator\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip\_vendor\pyproject_hooks\_in_process\_in_process.py", line 143, in get_requires_for_build_wheel
          return hook(config_settings)
        File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-1qn6p69k\overlay\Lib\site-packages\setuptools\build_meta.py", line 334, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
                 ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-1qn6p69k\overlay\Lib\site-packages\setuptools\build_meta.py", line 304, in _get_build_requires
          self.run_setup()
          ~~~~~~~~~~~~~~^^
        File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-1qn6p69k\overlay\Lib\site-packages\setuptools\build_meta.py", line 522, in run_setup
          super().run_setup(setup_script=setup_script)
          ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "C:\Users\Administrator\AppData\Local\Temp\pip-build-env-1qn6p69k\overlay\Lib\site-packages\setuptools\build_meta.py", line 320, in run_setup
          exec(code, locals())
          ~~~~^^^^^^^^^^^^^^^^
        File "<string>", line 22, in <module>
      ModuleNotFoundError: No module named 'torch'
      [end of output]

  note: This error originates from a subprocess, and is likely not a problem with pip.
error: subprocess-exited-with-error

Ã— Getting requirements to build wheel did not run successfully.
â”‚ exit code: 1
â•°â”€> See above for output.

note: This error originates from a subprocess, and is likely not a problem with pip.
```

è¯•äº†å¾ˆå¤šæ–¹æ³•ä¸€ç›´æŠ¥é”™ï¼Œæ”¾å¼ƒäº†

# ç»“æŸ

è¿™å°±æ˜¯éƒ¨ç½²å¼€æºé€šä¹‰ä¸‡ç›¸æœ¬åœ°éƒ¨ç½²æ–¹æ¡ˆï¼Œç®€ç›´æ˜¯è§†é¢‘ç”Ÿæˆé¢†åŸŸçš„ä¸€å¤§ç¦éŸ³ã€‚å®ƒé™ä½äº†ä½¿ç”¨é—¨æ§›ï¼Œè®©æ›´å¤šäººèƒ½ä½“éªŒåˆ°AIè§†é¢‘ç”Ÿæˆçš„ä¹è¶£ã€‚å¦‚æœä½ å¯¹è§†é¢‘åˆ›ä½œã€AIæŠ€æœ¯æ„Ÿå…´è¶£ï¼Œé‚£å¯åƒä¸‡åˆ«é”™è¿‡ã€‚



å†™æ–‡ä¸æ˜“ï¼Œå¦‚æœä½ éƒ½çœ‹åˆ°äº†è¿™é‡Œï¼Œè¯·ç‚¹ä¸ªèµå’Œåœ¨çœ‹ï¼Œåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ï¼›ä¹Ÿåˆ«å¿˜äº†å…³æ³¨æ˜Ÿå“¥ç©äº‘ï¼è¿™é‡Œæœ‰æ»¡æ»¡çš„å¹²è´§åˆ†äº«ï¼Œè¿˜æœ‰è½»æ¾æœ‰è¶£çš„æŠ€æœ¯äº¤æµï½ç‚¹ä¸ªèµã€åˆ†äº«ç»™èº«è¾¹çš„å°ä¼™ä¼´ï¼Œä¸€èµ·æˆé•¿ï¼Œä¸€èµ·ç©è½¬æŠ€æœ¯ä¸–ç•Œå§ï¼ ğŸ˜Š







