---
title: 2.Rocky-Linux-9å¸¸ç”¨å‘½ä»¤å¤‡å¿˜å½•
createTime: 2025/06/13 10:24:25
permalink: /article/jddfyujx/
---
# Rocky Linux 9å¸¸ç”¨å‘½ä»¤å¤‡å¿˜å½•(ä¸å®šæ—¶æ›´æ–°)



å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ˜Ÿå“¥ï¼Œä¸Šæ¬¡ä»‹ç»äº† [Rocky Linux 9 ç³»ç»Ÿå®‰è£…é…ç½®å›¾è§£æ•™ç¨‹å¹¶åšç®€å•é…ç½®](https://mp.weixin.qq.com/s/Kku738eYzI80kOQh0G_KFw)  https://mp.weixin.qq.com/s/Kku738eYzI80kOQh0G_KFw

ä»Šå¤©æ¥ä»‹ç»ä¸€ä¸‹ï¼ŒRocky Linux 9çš„å¸¸ç”¨å‘½ä»¤ã€‚

Rocky Linux æ˜¯ä¸€æ¬¾ç¨³å®šã€å®‰å…¨ã€å¼€æºçš„ä¼ä¸šçº§ Linux æ“ä½œç³»ç»Ÿï¼Œé€‚åˆä½œä¸ºæœåŠ¡å™¨éƒ¨ç½²ç¯å¢ƒã€‚æœ¬æ–‡å°†ä¸å®šæœŸæ›´æ–°è®°å½•æˆ‘åœ¨æ—¥å¸¸ä½¿ç”¨ Rocky Linux 9 è¿‡ç¨‹ä¸­å¸¸ç”¨ã€å®ç”¨çš„å‘½ä»¤ï¼Œä»¥ä¾¿æŸ¥é˜…å’Œåˆ†äº«ç»™åŒæ ·åœ¨ä½¿ç”¨è¯¥ç³»ç»Ÿçš„ä½ ã€‚ä»¥ä¸‹å‘½ä»¤å…¨éƒ¨åœ¨rootä¸‹è¿›è¡Œï¼Œå¦‚æœæ²¡æœ‰rootæƒé™å¯ä»¥åœ¨å‘½ä»¤å‰æ·»åŠ  'sudo'ã€‚

ä¸å®šæœŸæ›´æ–°é¦–å‘ç‰ˆï¼š

```
https://vuepress-v2.xgss.net/Rocky-Linux/2.Rocky-Linux-9å¸¸ç”¨å‘½ä»¤å¤‡å¿˜å½•.html
```

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1750064024584.png?tx)

# åŸºç¡€ä¿¡æ¯æŸ¥è¯¢

## æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬

```
# æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬
cat /etc/os-release

# æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„å‘è¡Œç‰ˆæœ¬ä¿¡æ¯
cat /etc/redhat-release 

# æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬
uname -r

# æŸ¥çœ‹CPUæ¶æ„
lscpu

# æŸ¥çœ‹å†…å­˜ä¿¡æ¯
free -m

# æŸ¥çœ‹ç£ç›˜ä¿¡æ¯
lsblk
df -h
```

# é…ç½®å›ºå®šIP

Rocky 9.xæ”¾å¼ƒäº†ä¹‹å‰çš„ç½‘ç»œé…ç½®ç›®å½•/etc/sysconfig/network-scripts/ï¼Œé‡‡ç”¨æ–°çš„å­˜å‚¨ç›®å½•

```
#è¿›å…¥ç½‘ç»œé…ç½®æ–‡ä»¶ç›®å½•
cd /etc/NetworkManager/system-connections
vi /etc/NetworkManager/system-connections/ens160.nmconnection

[connection]
id=ens160
uuid=332fef8b-1a06-386a-a585-d59df1f5ef61
type=ethernet
autoconnect-priority=-999
interface-name=ens160
timestamp=1749758331
[ethernet]

[ipv4]
method=auto


[ipv6]
addr-gen-mode=eui64
method=auto

[proxy]


```



æ‰¾åˆ° [ipv4] éƒ¨åˆ†ï¼Œå¹¶ä¿®æ”¹ address å’Œ dns è®¾ç½®ã€‚æ¯”å¦‚ï¼Œå°† IP åœ°å€ä¿®æ”¹ä¸º 192.168.152.139ï¼Œç½‘å…³ä¸º 192.168.152.1

```
ä¿®æ”¹[ipv4]é‡Œé¢çš„åœ°å€
method=auto

è‡ªåŠ¨è·å–æ”¹ä¸º
address=192.168.152.139/24,192.168.152.1
dns=114.114.114.114;8.8.8.8
method=manual

:wq! #ä¿å­˜é€€å‡º
å†é‡å¯ç³»ç»Ÿ
reboot
```

# ä¿®æ”¹ä¸»æœºå

è®¾ç½®ä¸»æœºåä¸º node139

```
#è®¾ç½®ä¸»æœºåä¸º node139 
hostnamectl set-hostname node139
```

# é…ç½®å›½å†…è½¯ä»¶æº

## 1.å¤‡ä»½é»˜è®¤æº

```
cp -a /etc/yum.repos.d/ /etc/yum.repos.d-bak/
```

## 2.æ›¿æ¢é˜¿é‡Œäº‘æº

ä¸èƒ½ç”¨ä¼šæŠ¥é”™ï¼ä¸èƒ½ç”¨ä¼šæŠ¥é”™ï¼ä¸èƒ½ç”¨ä¼šæŠ¥é”™ï¼





```
sed -e 's|^mirrorlist=|#mirrorlist=|g' \
    -e 's|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g' \
    -i.bak \
    /etc/yum.repos.d/[Rr]ocky*.repo
```

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1749783593650.png?tx)

æˆ–è€…æ›¿æ¢æ¸…åå¤§å­¦æº

```
sudo sed -e 's|^mirrorlist=|#mirrorlist=|g' \
         -e 's|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.tuna.tsinghua.edu.cn/rocky|g' \
         -i.bak \
         /etc/yum.repos.d/Rocky-*.repo
```



## 3.æ¸…ç†ç¼“å­˜å¹¶æ›´æ–°

```
dnf clean all
dnf makecache
```

# è½¯ä»¶ç®¡ç†ï¼ˆdnfï¼‰

## å®‰è£…å¸¸ç”¨å·¥å…·

```
dnf install -y vim wget curl lrzsz net-tools lsof bash-completion yum-utils tar zip unzip sudo cronie chrony policycoreutils-python-utils
```

## æ›´æ–°ç³»ç»Ÿ

```
dnf update -y
```

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1749782132189.png?tx)

## æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•

```
dnf check-update
```

## å®‰è£…è½¯ä»¶åŒ…

```
dnf install -y è½¯ä»¶å
```

## åˆ é™¤è½¯ä»¶åŒ…

```
dnf remove -y è½¯ä»¶å
```

## æœç´¢è½¯ä»¶åŒ…

```
dnf search è½¯ä»¶å
```

## åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶

```
dnf list installed
```

# ç”¨æˆ·ä¸æƒé™ç®¡ç†

```
# æ·»åŠ ç”¨æˆ·
useradd ç”¨æˆ·å

# è®¾ç½®ç”¨æˆ·å¯†ç 
passwd ç”¨æˆ·å

# æ·»åŠ ç”¨æˆ·åˆ°sudoç»„
usermod -aG wheel ç”¨æˆ·å

# åˆ é™¤ç”¨æˆ·åŠå…¶å®¶ç›®å½•
userdel -r ç”¨æˆ·å
```



# ç¦ç”¨SELinux

ä¸ºä»€ä¹ˆè¦ç¦ç”¨SELinuxï¼Ÿ

æŸäº›è½¯ä»¶æˆ–åº”ç”¨ç¨‹åºå¯èƒ½æ²¡æœ‰æ­£ç¡®é…ç½® SELinux ç­–ç•¥ï¼Œå¯¼è‡´å®ƒä»¬æ— æ³•æ­£å¸¸è¿è¡Œã€‚ä¾‹å¦‚ï¼Œä¸€äº›æ—§ç‰ˆè½¯ä»¶å¯èƒ½ä¸æ”¯æŒ SELinuxï¼Œéœ€è¦ç¦ç”¨ SELinux æ¥é¿å…è®¿é—®è¢«é™åˆ¶æˆ–æ‹’ç»ã€‚

1.ç¡®è®¤grubbyè½¯ä»¶åŒ…æ˜¯å¦å·²ç»å®‰è£…

```
[root@node139 ~]# rpm -q grubby
grubby-8.40-64.el9.x86_64
[root@node139 ~]# getenforce
Enforcing
```

2.æ·»åŠ selinux=0åˆ°å†…æ ¸å‘½ä»¤è¡Œ

```
grubby --update-kernel ALL --args selinux=0
```

3.é‡å¯ç³»ç»Ÿ

```
shutdown -r now
æˆ–è€…
reboot
```

4.æŸ¥çœ‹ç»“æœï¼Œç»“æœä¸ºDisabled åˆ™ä¿®æ”¹æˆåŠŸ

```
[root@node139 ~]# getenforce
Disabled
```



# å¸¸ç”¨å¼€å…³æœºã€é‡å¯å‘½ä»¤

## é‡å¯ç³»ç»Ÿ

```
reboot

```

æˆ–ï¼š

```
systemctl reboot
init 6
```

init 6 å’Œrebootæœ‰ä»€ä¹ˆåŒºåˆ«ï¼š

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1750063388272.png?tx)

### ä¸ºä»€ä¹ˆä¸æ¨è init 6

init 6 æ˜¯è€å¼ System V é£æ ¼çš„å‘½ä»¤ï¼Œä¾èµ– /etc/inittab ç­‰è€æ—§æœºåˆ¶ã€‚

åœ¨ systemd ä¸­ï¼Œå®ƒæ˜¯ç”±å…¼å®¹å±‚æ¨¡æ‹Ÿæ”¯æŒï¼Œæœªæ¥å¯èƒ½ä¼šç§»é™¤ã€‚

æŸäº›ç³»ç»Ÿä¸Š init 6 å¯èƒ½æ— æ³•å¤„ç†æŒ‚è½½ç‚¹ã€æœåŠ¡ä¼˜é›…ç»ˆæ­¢ç­‰è¿‡ç¨‹ï¼Œå­˜åœ¨ç¨³å®šæ€§éšæ‚£ã€‚



## å…³æœº

```
poweroff
shutdown -h now
systemctl poweroff

init 0
```

### å®šæ—¶å…³æœºï¼ˆä¾‹å¦‚5åˆ†é’Ÿåå…³æœºï¼‰

ï¼ˆ+5 è¡¨ç¤º 5 åˆ†é’Ÿåï¼‰

```
shutdown -h +5
```



### å®šæ—¶é‡å¯ï¼ˆä¾‹å¦‚22:30é‡å¯ï¼‰

```
shutdown -r 22:30
```

### å–æ¶ˆå·²è®¾ç½®çš„å®šæ—¶å…³æœº/é‡å¯

```
shutdown -c
```

## é‡å¯è¿›å…¥ç´§æ€¥ï¼ˆemergencyï¼‰æ¨¡å¼

```
systemctl emergency
```

## é‡å¯è¿›å…¥æ•‘æ´ï¼ˆrescueï¼‰æ¨¡å¼

```
systemctl rescue
```

------



## å…¶ä»–æœ‰ç”¨çš„ç›¸å…³å‘½ä»¤

## æ³¨é”€å½“å‰ç”¨æˆ·ï¼ˆé€€å‡ºä¼šè¯ï¼‰

```
logout
```

æˆ–ï¼ˆåœ¨ GUI æˆ–å›¾å½¢ç•Œé¢ç¯å¢ƒä¸­ï¼‰ï¼š

```
gnome-session-quit
```

## æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶é—´

```
uptime
```

æˆ–æ›´è¯¦ç»†ï¼š

```
who -b
```

## æŸ¥çœ‹ç³»ç»Ÿä¸Šæ¬¡é‡å¯æ—¥å¿—

```
last reboot
```



# ç³»ç»ŸæœåŠ¡ç®¡ç†

```
# å¯åŠ¨æœåŠ¡
systemctl start æœåŠ¡å

# åœæ­¢æœåŠ¡
systemctl stop æœåŠ¡å

# é‡å¯æœåŠ¡
systemctl restart æœåŠ¡å

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status æœåŠ¡å

# è®¾ç½®æœåŠ¡å¼€æœºå¯åŠ¨
systemctl enable æœåŠ¡å

# ç¦ç”¨æœåŠ¡å¼€æœºå¯åŠ¨
systemctl disable æœåŠ¡å
```



# é˜²ç«å¢™å¸¸ç”¨å‘½ä»¤

## æœ€å¸¸ç”¨çš„å‘½ä»¤

```
# æŸ¥çœ‹çŠ¶æ€
# systemctl status firewalld

å¼€å¯ç«¯å£:
firewall-cmd --zone=public --add-port=80/tcp --permanent
firewall-cmd --zone=public --add-port=443/tcp --permanent

firewall-cmd --zone=public --add-port=22/tcp --permanent
firewall-cmd --zone=public --add-port=60920/tcp --permanent
firewall-cmd --reload

#å…è®¸æŸä¸ªIP
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="192.168.1.100" accept'

# æŸ¥çœ‹æ‰€æœ‰ç«¯å£
firewall-cmd --zone=public --list-ports

# æŸ¥è¯¢ç«¯å£å·80 æ˜¯å¦å¼€å¯ï¼š
# firewall-cmd --query-port=80/tcp

é‡å¯é˜²ç«å¢™ï¼š
# firewall-cmd --reload
```

## é…ç½®é˜²ç«å¢™å…è®¸SSH

```
å…è®¸ SSH æœåŠ¡ï¼š  
firewall-cmd --permanent --add-service=ssh
firewall-cmd --reload
```



## ä¸€ã€åŸºæœ¬æ“ä½œå‘½ä»¤

### å¯åŠ¨ firewalld

```
systemctl start firewalld
```

### åœæ­¢ firewalld

```
systemctl stop firewalld
```

### é‡å¯ firewalld

```
systemctl restart firewalld
```

### è®¾ç½®firewalldå¼€æœºå¯åŠ¨

```
systemctl enable firewalld
```

### å…³é—­firewalldå¼€æœºå¯åŠ¨

```
systemctl disable firewalld
```

### æŸ¥çœ‹firewalldçŠ¶æ€

```
systemctl status firewalld
```

### æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦è¿è¡Œ

```
firewall-cmd --state
```



## äºŒã€firewall-cmdå¼€æ”¾æˆ–å…³é—­ç«¯å£

### ä¸´æ—¶å¼€æ”¾ç«¯å£

```
firewall-cmd --zone=public --add-port=80/tcp
```

### ç§»é™¤ä¸´æ—¶ç«¯å£

```
firewall-cmd --zone=public --remove-port=80/tcp
```



### æ°¸ä¹…å¼€æ”¾ç«¯å£

```
firewall-cmd --zone=public --add-port=80/tcp --permanent
```



### ç§»é™¤æ°¸ä¹…ç«¯å£

```
firewall-cmd --zone=public --remove-port=80/tcp --permanent
```



### é‡è½½è§„åˆ™ï¼ˆæ°¸ä¹…æ›´æ”¹åå¿…é¡»ï¼‰

```
firewall-cmd --reload
```



## ä¸‰ã€firewall-cmdç®¡ç†æœåŠ¡

### æŸ¥çœ‹æ”¯æŒçš„æœåŠ¡åˆ—è¡¨	

```
firewall-cmd --get-services
```

### æ·»åŠ æœåŠ¡ï¼ˆå¦‚ httpã€sshï¼‰	

```
firewall-cmd --zone=public --add-service=http --permanent
```

### åˆ é™¤æœåŠ¡

```
firewall-cmd --zone=public --remove-service=http --permanent
```



### IP ä¸æ¥å£ç®¡ç†

### å…è®¸æŸä¸ªIPè®¿é—®

```
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="192.168.1.100" accept'
```

### æ‹’ç»æŸä¸ªIPè®¿é—®

```
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="192.168.1.100" reject'
```

### é™åˆ¶æŸæ¥å£çš„åŒºåŸŸ

```
firewall-cmd --zone=public --change-interface=eth0
```



### ç¤ºä¾‹-æ”¾å¼€æŸä¸ªç½‘æ®µ

```
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="192.168.0.0/24" accept'
firewall-cmd --reload
```



### å°æŠ€å·§

```
--permanent è¡¨ç¤ºæ°¸ä¹…ä¿®æ”¹é…ç½®ï¼Œå¦åˆ™æ˜¯ä¸´æ—¶ä¿®æ”¹ï¼ˆé‡å¯é˜²ç«å¢™åå¤±æ•ˆï¼‰ï¼›
--zone=public æŒ‡çš„æ˜¯åŒºåŸŸåï¼Œå¯ä»¥æ›¿æ¢ä¸º home, internal, external ç­‰ï¼›
```

å»ºè®®ä¿®æ”¹å®Œæ°¸ä¹…è§„åˆ™åæ‰§è¡Œ firewall-cmd --reload åº”ç”¨æ›´æ”¹ã€‚



## å››ã€firewall-cmdæŸ¥çœ‹å½“å‰é…ç½®

### æŸ¥çœ‹é»˜è®¤åŒºåŸŸ

```
firewall-cmd --get-default-zone
```

åœ¨ firewalld ä¸­ï¼Œâ€œåŒºåŸŸï¼ˆzoneï¼‰â€è¡¨ç¤ºä¸€ç»„ç½‘ç»œæ¥å£æˆ–æºåœ°å€å¯¹åº”çš„ä¸€å¥—é˜²ç«å¢™è§„åˆ™ã€‚é»˜è®¤åŒºåŸŸæ˜¯æŒ‡ï¼š

æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šåŒºåŸŸçš„ç½‘ç»œæ¥å£ï¼Œæˆ–è€…æ–°æ·»åŠ çš„æ¥å£ï¼Œä¼šé»˜è®¤å¥—ç”¨è¿™ä¸ªåŒºåŸŸçš„è§„åˆ™ã€‚

### æŸ¥çœ‹æ‰€æœ‰åŒºåŸŸ

```
firewall-cmd --get-zones

å®é™…
[root@node139 ~]# firewall-cmd --get-default-zone
public
[root@node139 ~]# firewall-cmd --get-zones
block dmz drop external home internal nm-shared public trusted work
```

### æŸ¥çœ‹å½“å‰æ´»åŠ¨çš„åŒºåŸŸ

```
firewall-cmd --get-active-zones
```

### æŸ¥çœ‹æŸä¸ªåŒºåŸŸè¯¦ç»†ä¿¡æ¯

```
firewall-cmd --zone=public --list-all
```

# ç½‘ç»œå¸¸ç”¨å‘½ä»¤

## å®‰è£…å¸¸ç”¨ç½‘ç»œå·¥å…·åŒ…

æ¨èä¸€æ¬¡è£…å¥½

```
dnf install -y net-tools iproute bind-utils traceroute telnet nmap nc ethtool tcpdump
```



## æ¯”è¾ƒå¸¸ç”¨çš„å¸¸ç”¨å‘½ä»¤

```
# æŸ¥çœ‹IPåœ°å€
ip a

# é…ç½®é™æ€IP 
cd /etc/NetworkManager/system-connections
ls
# é‡å¯ç½‘ç»œæœåŠ¡
systemctl restart NetworkManager

# æŸ¥çœ‹å¼€æ”¾ç«¯å£
ss -tuln
netstat -tunpl

# æµ‹è¯•è¿é€šæ€§
ping åœ°å€
curl åœ°å€
```





## ä¸€ã€ç½‘ç»œé…ç½®ä¸æŸ¥çœ‹

| ç›®çš„             | å‘½ä»¤                                          | è¯´æ˜                                    |
| ---------------- | --------------------------------------------- | --------------------------------------- |
| æŸ¥çœ‹ IP åœ°å€     | `ip a` æˆ– `ip addr`                           | æ›¿ä»£ `ifconfig`ï¼ŒæŸ¥çœ‹æ‰€æœ‰ç½‘å¡çš„ IP åœ°å€ |
| æŸ¥çœ‹ç½‘ç»œæ¥å£ä¿¡æ¯ | `ip link`                                     | æŸ¥çœ‹ç½‘ç»œæ¥å£è®¾å¤‡çŠ¶æ€                    |
| å¯ç”¨æŸä¸ªç½‘å¡     | `ip link set eth0 up`                         | å¯åŠ¨æŒ‡å®šæ¥å£                            |
| ç¦ç”¨æŸä¸ªç½‘å¡     | `ip link set eth0 down`                       | å…³é—­æŒ‡å®šæ¥å£                            |
| æŸ¥çœ‹è·¯ç”±ä¿¡æ¯     | `ip route`                                    | æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨                          |
| æ·»åŠ ä¸´æ—¶è·¯ç”±     | `ip route add 192.168.1.0/24 via 192.168.0.1` | æ·»åŠ é™æ€è·¯ç”±ï¼ˆä¸´æ—¶ï¼‰                    |



## äºŒã€ç½‘ç»œè¯Šæ–­ä¸æµ‹è¯•

| ç›®çš„                | å‘½ä»¤                                               | è¯´æ˜                         |
| ------------------- | -------------------------------------------------- | ---------------------------- |
| Ping æµ‹è¯•           | `ping 8.8.8.8` æˆ– `ping www.baidu.com`             | æµ‹è¯•ç½‘ç»œè¿é€šæ€§               |
| Traceroute è·¯ç”±è¿½è¸ª | `traceroute 8.8.8.8`                               | æŸ¥çœ‹æ•°æ®åŒ…ç»è¿‡è·¯å¾„ï¼ˆéœ€å®‰è£…ï¼‰ |
| DNS æŸ¥è¯¢            | `dig www.google.com` æˆ– `nslookup www.baidu.com`   | DNS è§£ææµ‹è¯•ï¼ˆéœ€å®‰è£…ï¼‰       |
| æŸ¥çœ‹ç«¯å£è¿æ¥        | `ss -tuln`                                         | æŸ¥çœ‹ç›‘å¬ç«¯å£ï¼Œæ›¿ä»£ netstat   |
| æ£€æŸ¥ç«¯å£è¿é€šæ€§      | `telnet 192.168.0.1 80` æˆ– `nc -zv 192.168.0.1 80` | æµ‹è¯•ç«¯å£æ˜¯å¦å¼€æ”¾             |



## ä¸‰ã€ç½‘ç»œæœåŠ¡ä¸çŠ¶æ€ç®¡ç†

å¦‚æœä½ å¸Œæœ›å®Œå…¨ä½¿ç”¨ä¼ ç»Ÿçš„ network.serviceï¼Œä½ éœ€è¦æ‰‹åŠ¨ç¦ç”¨ NetworkManager å¹¶å¯ç”¨ä¼ ç»Ÿçš„ç½‘ç»œç®¡ç†æœåŠ¡ï¼š

ç¦ç”¨ NetworkManager æœåŠ¡

```
systemctl stop NetworkManager
systemctl disable NetworkManager
```

å¯ç”¨ network.service æœåŠ¡ï¼š

```
dnf install -y network-scripts
systemctl enable network
systemctl start network
```



| ç›®çš„                         | å‘½ä»¤                                          | è¯´æ˜                            |
| ---------------------------- | --------------------------------------------- | ------------------------------- |
| é‡å¯ç½‘ç»œæœåŠ¡ï¼ˆæ—§æ–¹å¼ï¼‰       | `systemctl restart network`                   | ä»…é€‚ç”¨äº `network` æœåŠ¡å¯ç”¨æƒ…å†µ |
| ä½¿ç”¨ NetworkManager é‡å¯ç½‘ç»œ | `nmcli networking off && nmcli networking on` | æ¨èä½¿ç”¨æ–¹å¼                    |
| æŸ¥çœ‹å½“å‰è¿æ¥çŠ¶æ€             | `nmcli device status`                         | æŸ¥çœ‹ç½‘ç»œæ¥å£çŠ¶æ€                |
| è®¾ç½®é™æ€ IPï¼ˆå‘½ä»¤è¡Œï¼‰        | `nmtui`                                       | å›¾å½¢åŒ– TUI å·¥å…·ï¼Œæ¨èæ–°æ‰‹ä½¿ç”¨   |



å›¾å½¢åŒ– TUI å·¥å…·

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1750043564639.png?tx)



## å››ã€NetworkManager å·¥å…·ï¼ˆnmcliï¼‰

| å‘½ä»¤                         | è¯´æ˜                   |
| ---------------------------- | ---------------------- |
| `nmcli connection show`      | æ˜¾ç¤ºæ‰€æœ‰è¿æ¥é…ç½®æ–‡ä»¶   |
| `nmcli device show`          | æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ |
| `nmcli connection up eth0`   | å¯åŠ¨æŒ‡å®šè¿æ¥           |
| `nmcli connection down eth0` | åœæ­¢æŒ‡å®šè¿æ¥           |
| `nmcli connection edit`      | ç¼–è¾‘è¿æ¥ï¼ˆé«˜çº§ç”¨æ³•ï¼‰   |



## äº”ã€å…¶ä»–å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤                       | è¯´æ˜                               |
| -------------------------- | ---------------------------------- |
| `hostname` / `hostnamectl` | æŸ¥çœ‹æˆ–è®¾ç½®ä¸»æœºå                   |
| `ethtool eth0`             | æŸ¥çœ‹ç½‘å¡é©±åŠ¨ã€é€Ÿç‡ç­‰ä¿¡æ¯ï¼ˆéœ€å®‰è£…ï¼‰ |
| `tcpdump -i eth0`          | æŠ“åŒ…åˆ†æå·¥å…·ï¼ˆéœ€å®‰è£…ï¼‰             |
| `curl ifconfig.me`         | æŸ¥çœ‹å…¬ç½‘ IP åœ°å€                   |



```
#é‡å¯ç½‘ç»œ
nmcli n off && nmcli n on 

#ç”¨ä¿®æ”¹åçš„ipç™»å½•ç³»ç»Ÿï¼ŒæŸ¥çœ‹ipåœ°å€
ip addr 

# æ˜¾ç¤ºç½‘ç»œè®¾å¤‡çš„è¿è¡ŒçŠ¶æ€
ip link 

# æ˜¾ç¤ºæ›´è¯¦ç»†çš„è®¾å¤‡ä¿¡æ¯
ip -s link 

# ä»…æ˜¾ç¤ºens160çš„ä¿¡æ¯
ip link show dev ens160 

# ä»…æ˜¾ç¤ºå¤„äºæ¿€æ´»çŠ¶æ€çš„è®¾å¤‡
ip link show up 

# åœens160ç½‘ç»œ
ip link set ens160 down down

# æ¿€æ´»ens160
ip link set ens160 up 

# æ˜¾ç¤ºè®¾å¤‡çŠ¶æ€
nmcli device status 

# æ˜¾ç¤ºå…¨éƒ¨ç½‘ç»œæ¥å£å±æ€§
nmcli device show 

# æ˜¾ç¤ºens160ç½‘ç»œæ¥å£å±æ€§
nmcli device show ens160 

# æ¿€æ´»ç½‘å¡
nmcli device connect ens160 

# åœç”¨ç½‘å¡
nmcli device disconnect ens160 

# æ‰ens160è®¾å¤‡
nmcli connection down ens160 down 

# å¯ç”¨ens160è®¾å¤‡
nmcli connection up ens160 

# é‡æ–°åŠ è½½ç½‘å¡
nmcli con reload 

# å¯ä»¥æŸ¥çœ‹å¸®åŠ©
nmcli con add help 
```

# æ–‡ä»¶æŸ¥æ‰¾ä¸å¤„ç†

```
# æŸ¥æ‰¾æ–‡ä»¶
find /path -name æ–‡ä»¶å

# å¿«é€Ÿå®šä½ï¼ˆéœ€å…ˆåˆ›å»ºç´¢å¼•ï¼‰
updatedb
locate æ–‡ä»¶å

# æœç´¢å†…å®¹
grep "å…³é”®è¯" æ–‡ä»¶å

# æ‰¹é‡æ›¿æ¢
sed -i 's/æ—§å†…å®¹/æ–°å†…å®¹/g' æ–‡ä»¶
```



# è®¾ç½®æ—¶åŒºã€æ—¶é—´

## æŸ¥çœ‹æ‰€æœ‰æ—¶åŒºä¿¡æ¯

```
timedatectl list-timezones
```

## è®¾ç½®æ—¶åŒº

```
timedatectl set-timezone Asia/Shanghai
```

## æŸ¥çœ‹æ—¶åŒºè®¾ç½®

```
timedatectl show
```

## æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯

```
timedatectl status
```

## è®¾ç½®æ—¥æœŸå’Œæ—¶é—´

æ ¼å¼ä¸ºï¼šYYYY-MM-DD HH:MM:SSã€‚ä¾‹å¦‚:å°†æ—¥æœŸå’Œæ—¶é—´è®¾ç½®ä¸º 2024 å¹´ 5 æœˆ 22 æ—¥ 14:00:00  

```
timedatectl set-time "2024-05-22 14:00:00"
```

## ä»…è®¾ç½®æ—¥æœŸ

```
timedatectl set-time "2024-05-22"
```

## ä»…è®¾ç½®æ—¶é—´

```
timedatectl set-time "14:00:00"
```

## å¯ç”¨ NTP 

```
timedatectl set-ntp true
```

## ç¦ç”¨ NTP

```
timedatectl set-ntp false
```



## æ˜¾ç¤ºå½“å‰æ—¥æœŸå’Œæ—¶é—´  

```
# æ˜¾ç¤ºå½“å‰æ—¥æœŸå’Œæ—¶é—´  
date  
 
# è‡ªå®šä¹‰æ—¥æœŸå’Œæ—¶é—´çš„è¾“å‡ºæ ¼å¼ï¼Œå…¶ä¸­ï¼Œ`%Y` è¡¨ç¤ºå››ä½æ•°çš„å¹´ä»½ï¼Œ`%m` è¡¨ç¤ºæœˆä»½ï¼Œ`%d` è¡¨ç¤ºæ—¥ï¼Œ`%H` è¡¨ç¤ºå°æ—¶ï¼Œ`%M` è¡¨ç¤ºåˆ†é’Ÿï¼Œ`%S` è¡¨ç¤ºç§’ã€‚  
date +"%Y-%m-%d %H:%M:%S"  
 
# è®¾ç½®æ—¥æœŸå’Œæ—¶é—´ 
# æ ¼å¼ä¸ºï¼šYYYY-MM-DD HH:MM:SSã€‚ä¾‹å¦‚:å°†æ—¥æœŸå’Œæ—¶é—´è®¾ç½®ä¸º 2024 å¹´ 5 æœˆ 22 æ—¥ 14:00:00  
date --set="2024-05-22 14:00:00"   
 
# ä»…è®¾ç½®æ—¥æœŸ
date +%Y-%m-%d -s "2024-05-22"
 
# ä»…è®¾ç½®æ—¶é—´
date +%T -s "14:00:00"
 
# å°†ç³»ç»Ÿæ—¶é—´å†™å…¥åˆ°ç¡¬ä»¶æ—¶é’Ÿ
hwclock --systohc
 
# æ˜¾ç¤ºç¡¬ä»¶æ—¶é—´
hwclock --show
```



## åŒºåŸŸè®¾ç½®

æ—¶é—´åŒºåŸŸè®¾ç½®è¿™é‡Œä»¥ä¸¤ä¸ªæ¡ˆä¾‹è¿›è¡Œè®²è§£ã€‚å°†ç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤ï¼šlocale å’Œ localectl ï¼Œlocale æ›´ä¾§é‡äºæ˜¾ç¤ºå’Œè¯Šæ–­å½“å‰çš„åŒºåŸŸè®¾ç½®çŠ¶æ€ï¼Œè€Œ localectl æä¾›äº†ä¸€ä¸ªæ›´å…¨é¢çš„å·¥å…·ï¼Œç”¨äºç®¡ç†å’Œé…ç½®åŒºåŸŸè®¾ç½®å’Œé”®ç›˜å¸ƒå±€ã€‚é€šè¿‡è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œç”¨æˆ·å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å’Œè°ƒæ•´ç³»ç»Ÿçš„æœ¬åœ°åŒ–è®¾ç½®ã€‚å¦‚æœæ‚¨è¦è°ƒæ•´é”®ç›˜å¸ƒå±€ï¼Œå¯ä»¥é‡‡ç”¨ localectl set-keymap us å‘½ä»¤è¿›è¡Œè®¾ç½®ã€‚

```
# å½“å‰æ—¶é—´æ˜¾ç¤ºæ ¼å¼
[root@ntp-client ~]# date
Wed May 22 06:01:11 PM CST 2024
[root@ntp-client ~]# localectl
System Locale: LANG=en_US.UTF-8
    VC Keymap: us
   X11 Layout: us
 
# è®¾ç½®æ—¶é—´æœ¬åœ°åŒ–æ ¼å¼æ˜¾ç¤º
[root@ntp-client ~]# localectl set-locale LC_TIME=C.UTF-8
 
# éªŒè¯æ˜¯å¦è®¾ç½®æˆåŠŸ
[root@ntp-client ~]# localectl
System Locale: LANG=en_US.UTF-8
               LC_TIME=C.UTF-8
    VC Keymap: us
   X11 Layout: us
 
# é€€å‡ºç™»å½•
[root@ntp-client ~]# exit
logout
 
# é‡æ–°ç™»å½•æŸ¥çœ‹æ—¶é—´ï¼Œå·²ç»ä¿®æ”¹ä¸º 24 å°æ—¶åˆ¶
[root@ntp-client ~]# date
Wed May 22 18:03:03 CST 2024
```



# æœ€å

ä»¥ä¸Šå‘½ä»¤å¤§å¤šæ˜¯æˆ‘åœ¨å®é™…éƒ¨ç½²å’Œç»´æŠ¤ Rocky Linux 9 æ—¶ä½¿ç”¨é¢‘ç‡è¾ƒé«˜çš„å‘½ä»¤ã€‚ä¸ºäº†æ–¹ä¾¿å›é¡¾å’Œç§¯ç´¯ï¼Œæˆ‘ä¼šæŒç»­æ›´æ–°è¿™ä¸ªå‘½ä»¤å¤‡å¿˜å½•ï¼Œä¹Ÿæ¬¢è¿ä½ ç•™è¨€è¡¥å……ï¼



å†™æ–‡ä¸æ˜“ï¼Œå¦‚æœä½ éƒ½çœ‹åˆ°äº†è¿™é‡Œï¼Œè¯·ç‚¹ä¸ªèµå’Œåœ¨çœ‹ï¼Œåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ï¼›ä¹Ÿåˆ«å¿˜äº†å…³æ³¨æ˜Ÿå“¥ç©äº‘ï¼è¿™é‡Œæœ‰æ»¡æ»¡çš„å¹²è´§åˆ†äº«ï¼Œè¿˜æœ‰è½»æ¾æœ‰è¶£çš„æŠ€æœ¯äº¤æµï½ç‚¹ä¸ªèµã€åˆ†äº«ç»™èº«è¾¹çš„å°ä¼™ä¼´ï¼Œä¸€èµ·æˆé•¿ï¼Œä¸€èµ·ç©è½¬æŠ€æœ¯ä¸–ç•Œå§ï¼ ğŸ˜Š

