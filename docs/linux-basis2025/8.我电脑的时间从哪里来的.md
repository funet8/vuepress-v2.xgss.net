# 电脑的时间从哪里来的？

作者：Tony Finch

本周我在鹿特丹参加 RIPE 会议。周五上午我做了一个闪电演讲，题为 “我的电脑的时间到底来自哪里？”  

RIPE 会议网站上有我的幻灯片和演讲视频；本文是幻灯片的博客化低分辨率版本，并附带粗略且不完全准确的文字稿。

> 我还写了一篇后续文章：《“我的电脑的时间到底来自哪里？” 这句话本身又来自哪里？》，补充了一些我在演讲中没讲的内容。



![Where does my computer get the time from?](https://dotat.at/@/2023-04-whence-time.001.jpeg)

## 我的电脑的时间来自哪里？

![from NTP](https://dotat.at/@/2023-04-whence-time.002.jpeg)

来自 **NTP** ——下面是一个 NTP 数据包的图片

![David Mills surrounded by clocks](https://dotat.at/@/2023-04-whence-time.003.jpeg)

这是发明 NTP 的 David Mills 的照片。

![Where does my computer get the time from? NTP](https://dotat.at/@/2023-04-whence-time.004.jpeg)

简单的问题，简单的答案，这就结束？

**不！**   让我们继续打破砂锅问到底……



![Where does NTP get the time from? NTP](https://dotat.at/@/2023-04-whence-time.005.jpeg)

## **Stratum 层级**

- Stratum 3 NTP 服务器从 Stratum 2 获取时间
- Stratum 2 从 Stratum 1 获取时间
- Stratum 1 从某种参考时钟获取时间

参考时钟可能是：

- 英国的 MSF 电台信号
- 德国的 DCF77 电台信号

但在大多数情况下，参考时钟其实是：



------

![Where does NTP get the time from? GPS](https://dotat.at/@/2023-04-whence-time.006.jpeg)

### **GPS 接收器**

![Where does NTP get the time from? GPS](https://dotat.at/@/2023-04-whence-time.007.jpeg)

这里是一台 GPS 授时接收器，这里是一颗 GPS 卫星。

![Where does GPS get the time from?](https://dotat.at/@/2023-04-whence-time.008.jpeg)

## GPS 的时间来自哪里？

------

![Schriever space force base entrance sign](https://dotat.at/@/2023-04-whence-time.009.jpeg)



来自 **科罗拉多州 Schriever 太空军基地**。

他们在 Schriever 管理着许多不同的绝密卫星和其他设备，从这些任务徽章就能看出来，所以你根本无法靠近拍到好照片。

![Schriever space force base aerial photo](https://dotat.at/@/2023-04-whence-time.010.jpeg)



![Where does Schriever SFB get the time from?](https://dotat.at/@/2023-04-whence-time.011.jpeg)

## **Schriever 太空军基地的时间来自哪里？**



------

![racks of time-keeping equipment with smart blue blanking panels](https://dotat.at/@/2023-04-whence-time.012.jpeg)

来自 **美国海军天文台（USNO）备用主时钟（Alternate Master Clock）**，它就设在科罗拉多州 Schriever。



![the USNO main building](https://dotat.at/@/2023-04-whence-time.013.jpeg)

## **备用主时钟的时间来自哪里？**

来自 **美国海军天文台（USNO）主站**，位于华盛顿特区。

------

![where does the USNO get the time from?](https://dotat.at/@/2023-04-whence-time.014.jpeg)

## 所以有三个答案

![USNO atomic clocks](https://dotat.at/@/2023-04-whence-time.015.jpeg)

## **答案一：原子钟**

USNO 有大量原子钟。

背景里是几十台机架式铯束钟； 

前景的黑盒子里是氢微波激射器； 

这些闪亮的圆柱体是铷喷泉钟。





------

![more USNO atomic clocks](https://dotat.at/@/2023-04-whence-time.016.jpeg)

这些闪亮的圆柱体是铷喷泉钟。

these shiny cylinders are [rubidium fountains](https://www.cnmoc.usff.navy.mil/Our-Commands/United-States-Naval-Observatory/Precise-Time-Department/The-USNO-Master-Clock/The-USNO-Master-Clock/Rubidium-Fountain-Clocks/)



------

![aerial photograph of the USNO campus, which is a perfect circle](https://dotat.at/@/2023-04-whence-time.017.jpeg)

USNO 的原子钟多到需要专门的建筑来放。

我准备演讲时注意到 Apple Maps 显示 USNO 校区中央有一个巨大的工地。

原来他们正在建一个新的高级钟楼；

原子钟精度的主要限制是环境稳定性：温度、湿度等。

所以新建筑会有非常强大的空气处理系统。

------

![where does the USNO get the time from?](https://dotat.at/@/2023-04-whence-time.018.jpeg)

## **答案二：UTC 是一个糟糕的折中方案**

UTC 是原子钟时间与地球自转时间之间的折中。

![the Paris observatory](https://dotat.at/@/2023-04-whence-time.019.jpeg)

so the USNO gets the time from the international earth rotation service, which is based at the Paris Observatory

因此 USNO 需要从 **国际地球自转服务（IERS）** 获取地球自转相关信息，该机构位于巴黎天文台。

每年两次，IERS 会发布 **Bulletin C**，说明六个月后是否会插入（或删除）闰秒。 闰秒用于让 UTC 与地球自转保持同步。

------

![where does the IERS get the time from?](https://dotat.at/@/2023-04-whence-time.020.jpeg)

the IERS is spread across several organizations which contribute to its scientific work

IERS 的科学工作由多个组织共同承担。

例如，你可以订阅 **IERS Bulletin A**，这是每周发布的地球定向参数精确数据。

![the USNO main building](https://dotat.at/@/2023-04-whence-time.021.jpeg)

Bulletin A 是由美国海军天文台发布的。

他们需要知道地球在 GPS 卫星下方的精确姿态，以便提供精确定位。



![where does the USNO get the time from?](https://dotat.at/@/2023-04-whence-time.022.jpeg)

## **答案三：USNO 如何知道自己的原子钟是否正常？**



![the pavillion de breteuil](https://dotat.at/@/2023-04-whence-time.023.jpeg)

这来自 **国际计量局（BIPM）**，位于巴黎，负责维护全球标准 UTC。

![where does the BIPM get the time from?](https://dotat.at/@/2023-04-whence-time.024.jpeg)

## **BIPM 如何确定 UTC？**

![Circular T](https://dotat.at/@/2023-04-whence-time.025.jpeg)

BIPM 收集全球各国家计时实验室的时间测量数据，并用这些数据确定官方 UTC。

他们会定期发布 **Circular T**，其中包含官方 UTC 与各国家实验室 UTC 之间的偏差信息。



![diagram of the new SI](https://dotat.at/@/2023-04-whence-time.026.jpeg)

the BIPM is responsible for maintaining the international system of units, which is defined by the general conference on weights and measures

BIPM 负责维护国际单位制（SI），由 **国际计量大会（CGPM）** 定义。

CGPM 是 1875 年《米制公约》建立的国际条约组织。

![diagram of the SI highlighting the second](https://dotat.at/@/2023-04-whence-time.027.jpeg)

UTC 是 SI 秒的实现，而 SI 秒基于铯原子的量子跃迁测量。

------

![where did the CGPM get the time from?](https://dotat.at/@/2023-04-whence-time.028.jpeg)

## **这个神奇的数字（约 9.2 GHz）从何而来？**



------

![Essen and Parry standing next to their atomic clock](https://dotat.at/@/2023-04-whence-time.029.jpeg)

1955 年，Louis Essen（右）和 Jack Parry（左）制造了第一台铯原子钟。

当前秒的定义来自对这台钟的校准。

![where did Essen and Parry get the time from?](https://dotat.at/@/2023-04-whence-time.030.jpeg)

在原子钟之前，秒的定义基于天文学，因此 Essen 和 Parry 需要天文学家的帮助来确定他们的钟相对于当时标准的走时速度。



![the USNO main building](https://dotat.at/@/2023-04-whence-time.031.jpeg)

他们得到了美国海军天文台天文学家的帮助。

![Markowitz and Essen](https://dotat.at/@/2023-04-whence-time.032.jpeg)

## **他们是如何合作的？**

- William Markowitz 通过观测天空测量时间
- Louis Essen 通过原子钟测量时间
- 为了关联两者的测量，他们都监听美国国家标准局（NBS）在华盛顿特区广播的 **WWV 时间信号**

这个项目持续了三年（1955–1958）。



![where did Markowitz get the time from?](https://dotat.at/@/2023-04-whence-time.033.jpeg)

## **Markowitz 测量的是“历书秒”（ephemeris second）**

1952 年，国际天文学联合会改变了时间定义： 不再基于地球自转，而是基于地球绕太阳公转。

因为 1930 年代人们发现地球自转并不均匀：会略微加速或减速。 而钟表已经比地球自转更精确，因此历书秒成为新的、更精确的时间标准。

![where did the IAU get the time from?](https://dotat.at/@/2023-04-whence-time.034.jpeg)

历书秒基于天文历表（ephemeris），即太阳系的数学模型。

------

![tables of the motion of the earth on its axis and around the sun](https://dotat.at/@/2023-04-whence-time.035.jpeg)



标准历表由 Simon Newcomb 在 19 世纪末制作，他收集了大量历史天文数据来构建模型。 该模型一直沿用到 1980 年代中期。

![Simon Newcomb](https://dotat.at/@/2023-04-whence-time.036.jpeg)

这是 Simon Newcomb 的照片，一位典型的维多利亚时代绅士。

他在哪里工作？ 



![the USNO main building](https://dotat.at/@/2023-04-whence-time.037.jpeg)

**美国海军天文台！**（以及美国航海年鉴办公室）



![the Royal Greenwich Observatory](https://dotat.at/@/2023-04-whence-time.038.jpeg)





在此之前，时间的设定更直接： 看星星在天空中经过子午线。

我的电脑的时间来自哪里？它不是来自格林尼治皇家天文台！

## 结论

你的电脑时间来自一条跨越 电脑 → NTP → GPS → 美国军方 → 原子钟 → 国际计量体系 → 天文学 的巨大链条，而不是来自格林尼治天文台。



原文：https://dotat.at/@/2023-05-26-whence-time.html