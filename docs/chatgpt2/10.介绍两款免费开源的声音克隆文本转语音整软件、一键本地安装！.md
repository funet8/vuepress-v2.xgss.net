---
title: 10.ä»‹ç»ä¸¤æ¬¾å…è´¹å¼€æºçš„å£°éŸ³å…‹éš†æ–‡æœ¬è½¬è¯­éŸ³æ•´è½¯ä»¶ã€ä¸€é”®æœ¬åœ°å®‰è£…ï¼
createTime: 2025/05/27 17:51:17
permalink: /article/a84oujm2/
---
# å®‰åˆ©å…è´¹å¼€æºçš„å£°éŸ³å…‹éš†ã€æ–‡æœ¬è½¬è¯­éŸ³æ•´åˆåŒ…è½¯ä»¶ã€ä¸€é”®æœ¬åœ°å®‰è£…ï¼



å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ˜Ÿå“¥ï¼Œä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸¤æ¬¾å£°éŸ³å…‹éš†ã€æ–‡æœ¬è½¬è¯­éŸ³çš„è½¯ä»¶ï¼Œä¸€ä¸ªæ˜¯ChatTTSå’ŒSpark-TTSï¼Œå¹¶ä¸”éƒ½æœ‰ä¸€é”®å®‰è£…åŒ…ï¼Œè®©ä½ æ— éœ€å¤æ‚çš„é…ç½®ï¼Œå°±èƒ½åœ¨æœ¬åœ°è½»æ¾ä½“éªŒå£°éŸ³çš„é­…åŠ›ã€‚

![image-20250402195740983](https://imgoss.xgss.net/picgo/image-20250402195740983.png?aliyun)

# ChatTTSæ˜¯ä»€ä¹ˆï¼Ÿ

ChatTTSæ˜¯ä¸“ä¸ºå¯¹è¯åœºæ™¯è®¾è®¡çš„è¯­éŸ³ç”Ÿæˆæ¨¡å‹ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤§å‹è¯­è¨€æ¨¡å‹(LLM)åŠ©æ‰‹çš„å¯¹è¯ä»»åŠ¡ï¼Œä»¥åŠè¯¸å¦‚å¯¹è¯å¼éŸ³é¢‘å’Œè§†é¢‘ä»‹ç»ç­‰åº”ç”¨ã€‚å®ƒæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ï¼Œé€šè¿‡ä½¿ç”¨å¤§çº¦100,000å°æ—¶çš„ä¸­æ–‡å’Œè‹±æ–‡æ•°æ®è¿›è¡Œè®­ç»ƒï¼ŒChatTTSåœ¨è¯­éŸ³åˆæˆä¸­è¡¨ç°å‡ºé«˜è´¨é‡å’Œè‡ªç„¶åº¦ã€‚

å¼€æºåœ°å€ï¼š https://github.com/2noise/ChatTTS

# å®‰è£…ChatTTS

å®‰è£…ChatTTSæœ‰3ç§æ–¹å¼ï¼Œç¬¬1ç§æ˜¯Docker composeå®‰è£…ChatTTS-ui(æ¨è)ã€ç¬¬2ç§æ˜¯å®‰è£…ä¸€é”®å®‰è£…åŒ…ï¼ˆæ¨èï¼‰ã€ç¬¬3ç§æœ¬åœ°å®‰è£…æ–¹å¼ã€

# æœ¬åœ°éƒ¨ç½²ChatTTS

## ç³»ç»Ÿç¯å¢ƒä»‹ç»

ä»¥ä¸‹éƒ½å®‰è£…è¿™ä¸ªç³»ç»Ÿæ¥ä»‹ç»

ç³»ç»Ÿï¼šWindows11ä¸“ä¸šç‰ˆ

CPU: è‹±ç‰¹å°”I7-13700KF

å†…å­˜ï¼š 32G

ç¡¬ç›˜ï¼š1T nvme SSD +4T æœºæ¢°

æ˜¾å¡ï¼šRTX 4070 Ti 

pythonç‰ˆæœ¬ï¼šPython 3.13.2 

ç³»ç»Ÿè¦å®‰è£…Dockerå’ŒDocker compose

# Docker composeå®‰è£…ChatTTS-ui(æ¨è)

å¼€æºåœ°å€ï¼šhttps://github.com/jianchang512/ChatTTS-ui

## 1.æ‹‰å–é¡¹ç›®ä»“åº“

åœ¨ä»»æ„è·¯å¾„ä¸‹å…‹éš†é¡¹ç›®ï¼Œä¾‹å¦‚ï¼š

```
git clone https://github.com/jianchang512/ChatTTS-ui.git chat-tts-ui
```

## 2.å¯åŠ¨ Runner

è¿›å…¥åˆ°é¡¹ç›®ç›®å½•ï¼š

```
cd chat-tts-ui
```

å¯åŠ¨å®¹å™¨å¹¶æŸ¥çœ‹åˆå§‹åŒ–æ—¥å¿—ï¼š

```
gpuç‰ˆæœ¬
docker compose -f docker-compose.gpu.yaml up -d 

cpuç‰ˆæœ¬    
docker compose -f docker-compose.cpu.yaml up -d

docker compose logs -f --no-log-prefix
```

![image-20250402173803394](https://imgoss.xgss.net/picgo/image-20250402173803394.png?aliyun)

ç¨ç­‰ä¸€æ®µæ—¶é—´ï¼Œä½¿ç”¨å‘½ä»¤docker psæŸ¥çœ‹ï¼Œå¦‚ä¸‹åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚

```
docker ps
CONTAINER ID   IMAGE                                                       COMMAND                  CREATED         STATUS         PORTS                                                                              NAMES
7cce18cbbe8d   chat-tts-ui-chat-tts-ui                                     "/usr/local/bin/dockâ€¦"   7 minutes ago   Up 2 minutes   7070-7071/tcp, 8080-8082/tcp, 0.0.0.0:9966->9966/tcp, :::9966->9966/tcp            chat-tts-ui
```



## 3.è®¿é—® ChatTTS WebUI

`å¯åŠ¨:['0.0.0.0', '9966']`ï¼Œä¹Ÿå³ï¼Œè®¿é—®éƒ¨ç½²è®¾å¤‡çš„ `IP:9966` å³å¯ï¼Œä¾‹å¦‚ï¼š

- æœ¬æœºï¼š`http://127.0.0.1:9966`
- æœåŠ¡å™¨: `http://192.168.1.100:9966`

![image-20250402180205298](https://imgoss.xgss.net/picgo/image-20250402180205298.png?aliyun)

## 4.ç”Ÿæˆè¯­è¨€

éšä¾¿è¾“å…¥ä¸€æ®µèå£«æ¯”äºšçš„ã€Šå“ˆå§†é›·ç‰¹ã€‹ç”Ÿå­˜è¿˜æ˜¯æ¯ç­
èå£«æ¯”äºš
æ´»ç€è¿˜æ˜¯å»æ­»ï¼Ÿè¿™çœŸæ˜¯ä¸€ä¸ªå€¼å¾—æ€è™‘çš„é—®é¢˜ã€‚

å»å¿å—é‚£ç‹‚æš´çš„å‘½è¿æ— æƒ…çš„æ‘§æ®‹ï¼Œè¿˜æ˜¯æŒºèº«å»åæŠ—é‚£æ— è¾¹çš„çƒ¦æ¼ï¼ŒæŠŠå®ƒæ‰«ä¸€ä¸ªå¹²å‡€ã€‚å»æ­»ï¼Œå»ç¡å°±ç»“æŸäº†ï¼Ÿå¦‚æœç¡çœ èƒ½ç»“æŸæˆ‘ä»¬å¿ƒçµçš„åˆ›ä¼¤å’Œè‚‰ä½“æ‰€æ‰¿å—çš„åƒç™¾æ ·ç—›è‹¦ï¼Œé‚£çœŸæ˜¯ç”Ÿå­˜æ±‚ä¹‹ä¸å¾—çš„å¤©å¤§çš„å¥½äº‹ã€‚

![image-20250402193631331](https://imgoss.xgss.net/picgo/image-20250402193631331.png?aliyun)

å¯ä»¥è°ƒè¯•å¥½å¯ä»¥ä¸‹è½½è¯­éŸ³ã€‚

# Windowsé¢„æ‰“åŒ…ç‰ˆ(æ¨è)

ä» Releasesä¸­ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹ååŒå‡» app.exe å³å¯ä½¿ç”¨
æŸäº›å®‰å…¨è½¯ä»¶å¯èƒ½æŠ¥æ¯’ï¼Œè¯·é€€å‡ºæˆ–ä½¿ç”¨æºç éƒ¨ç½²
è‹±ä¼Ÿè¾¾æ˜¾å¡å¤§äº4Gæ˜¾å­˜ï¼Œå¹¶å®‰è£…äº†CUDA11.8+åï¼Œå°†å¯ç”¨GPUåŠ é€Ÿ

## ChatTTS-UIæ•´åˆåŒ…ä¸‹è½½

æ–‡ä»¶å¤§å°ï¼š 3.69G

panç‚¹baiduç‚¹com/s/1Hnqzm8ZdDKYX0dbvGmW38g?pwd=khds ï¼ˆæµè§ˆå™¨ä¸­ï¼‰
æå–ç : khds

ç”±äºå¹³å°ä¸è®©æ”¾é“¾æ¥ï¼Œå¯ä»¥å…³æ³¨â€œæ˜Ÿå“¥ç©äº‘â€å…¬ä¼—å·ï¼Œå›å¤â€œTTSå®‰è£…åŒ…â€è·å¾—ChatTTSå’ŒSpark-TTSçš„ä¸€é”®å®‰è£…åŒ…



# æœ¬åœ°å®‰è£…ï¼ˆä¸æ¨èï¼‰

## 1.å®‰è£…Python å’Œ gitç¯å¢ƒ

éœ€è¦å®‰è£…pythonå’Œgitè½¯ä»¶

pythonéœ€è¦ 3.9+ ç‰ˆæœ¬ï¼Œæ¯”å¦‚æˆ‘é€‰æ‹©python 3.10.2 

å®‰è£…ä¸‹gitç¯å¢ƒï¼Œè¿™ä¸ªå°±ä¸è¯¦ç»†å°†ã€‚

## 2.å…‹éš† ChatTTS-Ui



3.è§£å‹ååœ¨æ ¹ç›®å½•ä¸‹è¾“å…¥CMDè¿›å…¥ç»ˆç«¯ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„å®‰è£…å‘½ä»¤ï¼š

```
python -m venv venv
.\venv\scripts\activate
pip install -r requirements.txt
```



## 4.å¦‚æœä¸éœ€è¦CUDAåŠ é€Ÿï¼Œæ‰§è¡Œ

```
pip install torch==2.1.2 torchaudio==2.1.2
```



å¦‚æœéœ€è¦CUDAåŠ é€Ÿï¼Œæ‰§è¡Œ

```
pip install torch==2.1.2 torchaudio==2.1.2 --index-url https://download.pytorch.org/whl/cu118
```

## 5.å¯åŠ¨



æœ€åæ‰§è¡Œ python app.py å¯åŠ¨ï¼Œå°†è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨çª—å£ï¼Œé»˜è®¤åœ°å€ http://127.0.0.1:9966

(æ³¨æ„ï¼šé»˜è®¤ä» modelscope é­”å¡”ä¸‹è½½æ¨¡å‹ï¼Œä¸å¯ä½¿ç”¨ä»£ç†ä¸‹è½½ï¼Œè¯·å…³é—­ä»£ç†)



## 6.ä¸‹è½½modelscopeä¸‹è½½æ¨¡å‹

æºç éƒ¨ç½²å¯åŠ¨åï¼Œä¼šå…ˆä» modelscopeä¸‹è½½æ¨¡å‹ï¼Œä½†modelscopeç¼ºå°‘spk_stat.ptï¼Œä¼šæŠ¥é”™ï¼Œã€[ç‚¹å‡»ä¸‹è½½ spk_stat.pt](https://huggingface.co/2Noise/ChatTTS/blob/main/asset/spk_stat.pt)ã€‘

ä¸‹è½½åå°†è¯¥æ–‡ä»¶å¤åˆ¶åˆ° é¡¹ç›®ç›®å½•/models/pzc163/chatTTS/asset/ æ–‡ä»¶å¤¹å†…

æ³¨æ„ modelscope ä»…å…è®¸ä¸­å›½å¤§é™†ipä¸‹è½½æ¨¡å‹ï¼Œå¦‚æœé‡åˆ° proxy ç±»é”™è¯¯ï¼Œè¯·å…³é—­ä»£ç†ã€‚

å¦‚æœä½ å¸Œæœ›ä» huggingface.co ä¸‹è½½æ¨¡å‹ï¼Œè¯·æ‰“å¼€ app.py æŸ¥çœ‹å¤§çº¦ç¬¬50è¡Œ-60è¡Œçš„æ³¨é‡Šã€‚å¦‚æœéœ€è¦GPUåŠ é€Ÿï¼Œå¿…é¡»æ˜¯è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼Œå¹¶ä¸”å®‰è£… cudaç‰ˆæœ¬çš„torch

```
# é»˜è®¤ä» modelscope ä¸‹è½½æ¨¡å‹,å¦‚æœæƒ³ä»huggingfaceä¸‹è½½æ¨¡å‹ï¼Œè¯·å°†ä»¥ä¸‹3è¡Œæ³¨é‡Šæ‰

CHATTTS_DIR = snapshot_download('pzc163/chatTTS',cache_dir=MODEL_DIR)
chat = ChatTTS.Chat()
chat.load_models(source="local",local_path=CHATTTS_DIR)

# å¦‚æœå¸Œæœ›ä» huggingface.coä¸‹è½½æ¨¡å‹ï¼Œå°†ä»¥ä¸‹æ³¨é‡Šåˆ æ‰ã€‚å°†ä¸Šæ–¹3è¡Œå†…å®¹æ³¨é‡Šæ‰

#os.environ['HF_HUB_CACHE']=MODEL_DIR
#os.environ['HF_ASSETS_CACHE']=MODEL_DIR
#chat = ChatTTS.Chat()
#chat.load_models()
```





# Spark-TTSæ˜¯ä»€ä¹ˆ

Spark-TTS æ˜¯æœ€è¿‘å¤‡å—ç©ç›®çš„ä¸€ä¸ªè¯­éŸ³å…‹éš†å¼€æºé¡¹ç›®ï¼Œç”±é¦™æ¸¯ç§‘æŠ€å¤§å­¦ã€è¥¿åŒ—å·¥ä¸šå¤§å­¦ã€ä¸Šæµ·äº¤é€šå¤§å­¦ç­‰å¤šæ‰€é«˜æ ¡è”åˆç ”å‘ã€‚ç»è¿‡æœ¬åœ°æµ‹è¯•ï¼Œå…¶æ•ˆæœä¸ F5-TTS ä¸ç›¸ä¸Šä¸‹ã€‚

Spark-TTS æ”¯æŒä¸­è‹±æ–‡è¯­éŸ³å…‹éš†ï¼Œå®‰è£…éƒ¨ç½²è¿‡ç¨‹å¹¶ä¸å¤æ‚ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•å®‰è£…éƒ¨ç½²ï¼Œå¹¶è¿›è¡Œä¿®æ”¹ï¼Œä½¿å…¶å…¼å®¹ F5-TTS çš„ API æ¥å£ï¼Œä»è€Œå¯ä»¥ç›´æ¥åœ¨ pyVideoTrans è½¯ä»¶çš„ F5-TTS é…éŸ³æ¸ é“ä¸­ä½¿ç”¨ã€‚



## Spark-TTSçš„é¡¹ç›®åœ°å€

- **é¡¹ç›®å®˜ç½‘**ï¼š[https://sparkaudio.github.io/spark-tts/](https://sparkaudio.github.io/spark-tts/?utm_source=ai-bot.cn)
- **Githubä»“åº“**ï¼šhttps://github.com/SparkAudio/Spark-TTS
- **HuggingFaceæ¨¡å‹åº“**ï¼šhttps://huggingface.co/SparkAudio/Spark-TTS-0.5B

## Spark-TTSçš„ä¸»è¦åŠŸèƒ½

- **é›¶æ ·æœ¬æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢**ï¼šSpark-TTS èƒ½åœ¨æ²¡æœ‰ç‰¹å®šè¯­éŸ³æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå¤ç°è¯´è¯äººçš„å£°éŸ³ï¼Œå®ç°é›¶æ ·æœ¬è¯­éŸ³å…‹éš†ã€‚
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šSpark-TTS æ”¯æŒä¸­è‹±åŒè¯­ï¼Œå¯å®ç°è·¨è¯­è¨€è¯­éŸ³åˆæˆã€‚ç”¨æˆ·å¯ä»¥ç”¨ä¸€ç§è¯­è¨€è¾“å…¥æ–‡æœ¬ï¼Œç”Ÿæˆå¦ä¸€ç§è¯­è¨€çš„è¯­éŸ³è¾“å‡ºï¼Œæ»¡è¶³å¤šè¯­è¨€åœºæ™¯ä¸‹çš„è¯­éŸ³åˆæˆéœ€æ±‚ã€‚
- **å¯æ§è¯­éŸ³ç”Ÿæˆ**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡è°ƒæ•´å‚æ•°ï¼ˆå¦‚æ€§åˆ«ã€éŸ³è°ƒã€è¯­é€Ÿã€éŸ³è‰²ç­‰ï¼‰æ¥å®šåˆ¶è™šæ‹Ÿè¯´è¯è€…çš„å£°éŸ³ï¼Œç”Ÿæˆç¬¦åˆç‰¹å®šéœ€æ±‚çš„è¯­éŸ³å†…å®¹ã€‚
- **é«˜æ•ˆç®€æ´çš„è¯­éŸ³åˆæˆ**ï¼šåŸºäº Qwen2.5 æ¶æ„ï¼ŒSpark-TTS æ— éœ€é¢å¤–çš„ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚æµåŒ¹é…æ¨¡å‹ï¼‰ï¼Œç›´æ¥ä» LLM é¢„æµ‹çš„ç¼–ç ä¸­é‡å»ºéŸ³é¢‘ï¼Œæé«˜äº†è¯­éŸ³åˆæˆçš„æ•ˆç‡ã€‚
- **è™šæ‹Ÿè¯´è¯è€…åˆ›å»º**ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºå®Œå…¨ç”±è‡ªå·±å®šä¹‰çš„è™šæ‹Ÿè¯´è¯è€…ï¼Œé€šè¿‡å‚æ•°è°ƒæ•´ä½¿å…¶å…·æœ‰ç‹¬ç‰¹çš„è¯­éŸ³é£æ ¼ï¼Œé€‚ç”¨äºè™šæ‹Ÿä¸»æ’­ã€æœ‰å£°è¯»ç‰©ç­‰åœºæ™¯ã€‚
- **è¯­éŸ³å…‹éš†ä¸é£æ ¼è¿ç§»**ï¼šSpark-TTS æ”¯æŒä»å°‘é‡è¯­éŸ³æ ·æœ¬ä¸­æå–é£æ ¼ç‰¹å¾ï¼Œå°†å…¶è¿ç§»åˆ°åˆæˆè¯­éŸ³ä¸­ï¼Œå®ç°ä¸ªæ€§åŒ–è¯­éŸ³é£æ ¼çš„å¤åˆ¶å’Œè¿ç§»ã€‚

## Spark-TTSçš„åº”ç”¨åœºæ™¯

- **è¯­éŸ³åŠ©æ‰‹å¼€å‘**ï¼šSpark-TTS å¯ä»¥ç”¨äºå¼€å‘ä¸ªæ€§åŒ–çš„è¯­éŸ³åŠ©æ‰‹ï¼Œé€šè¿‡è°ƒæ•´éŸ³è‰²ã€è¯­é€Ÿå’Œè¯­è°ƒç­‰å‚æ•°ï¼Œç”Ÿæˆè‡ªç„¶æµç•…çš„è¯­éŸ³è¾“å‡ºï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ äººæ€§åŒ–å’Œä¸ªæ€§åŒ–çš„äº¤äº’ä½“éªŒã€‚
- **å¤šè¯­è¨€å†…å®¹åˆ›ä½œ**ï¼šå·¥å…·æ”¯æŒä¸­è‹±åŒè¯­ï¼Œèƒ½å®ç°è·¨è¯­è¨€è¯­éŸ³åˆæˆï¼Œé€‚åˆéœ€è¦åœ¨ä¸åŒè¯­è¨€ç‰ˆæœ¬ä¹‹é—´ä¿æŒä¸€è‡´è¯­éŸ³é£æ ¼çš„å†…å®¹åˆ›ä½œè€…ï¼Œä¾‹å¦‚åˆ¶ä½œå¤šè¯­è¨€çš„æœ‰å£°è¯»ç‰©ã€å¹¿å‘Šæˆ–æ•™è‚²ææ–™ã€‚
- **æ™ºèƒ½å®¢æœä¸ä¿¡æ¯æ’­æŠ¥**ï¼šSpark-TTS å¯ä»¥å°†æ–‡å­—ä¿¡æ¯è½¬åŒ–ä¸ºè‡ªç„¶è¯­éŸ³ï¼Œç”¨äºæ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œæä¾›24å°æ—¶ä¸é—´æ–­çš„æœåŠ¡ï¼Œæˆ–è€…åœ¨å…¬å…±äº¤é€šã€æœºåœºã€åŒ»é™¢ç­‰å…¬å…±åœºæ‰€è¿›è¡Œä¿¡æ¯æ’­æŠ¥ã€‚
- **è¯­éŸ³å…‹éš†ä¸è™šæ‹Ÿè§’è‰²é…éŸ³**ï¼šSpark-TTS æ”¯æŒé›¶æ ·æœ¬è¯­éŸ³å…‹éš†ï¼Œèƒ½å¿«é€Ÿå¤åˆ¶ç‰¹å®šè¯´è¯äººçš„å£°éŸ³é£æ ¼ï¼Œé€‚ç”¨äºè™šæ‹Ÿè§’è‰²é…éŸ³ã€åŠ¨ç”»åˆ¶ä½œæˆ–è™šæ‹Ÿä¸»æ’­ç­‰é¢†åŸŸã€‚



# å®‰è£…Spark-TTS



## Spark-TTSæ•´åˆå®‰è£…åŒ…

ç”±äºè¿…é›·é™é€Ÿä¸‹è½½è¿˜éœ€è¦å‡ ä¸ªå°æ—¶ï¼Œç­‰ä¸‹è½½å¥½äº†ï¼Œå†å‘é“¾æ¥

![image-20250402192830272](https://imgoss.xgss.net/picgo/image-20250402192830272.png?aliyun)


ç”±äºå¹³å°ä¸è®©æ”¾é“¾æ¥ï¼Œå¯ä»¥å…³æ³¨â€œæ˜Ÿå“¥ç©äº‘â€å…¬ä¼—å·ï¼Œå›å¤â€œTTSå®‰è£…åŒ…â€è·å¾—ChatTTSå’ŒSpark-TTSçš„ä¸€é”®å®‰è£…åŒ…



## 1. ä¸‹è½½Spark-TTSæºç 

æ¨èæœ‰ä¸€å®šæ“ä½œåŸºç¡€çš„è¿™æ ·å®‰è£…

é¦–å…ˆï¼Œåœ¨éç³»ç»Ÿç›˜åˆ›å»ºä¸€ä¸ªç”±è‹±æ–‡æˆ–æ•°å­—ç»„æˆçš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ `D:/spark`ã€‚ä¹‹æ‰€ä»¥è¦æ±‚ä½¿ç”¨è‹±æ–‡ã€æ•°å­—ä¸”éç³»ç»Ÿç›˜ï¼Œæ˜¯ä¸ºäº†å°½é‡é¿å…å¯èƒ½å‡ºç°çš„ä¸­æ–‡ã€æƒé™ç­‰æ–¹é¢çš„é”™è¯¯ã€‚

ç„¶åï¼Œè®¿é—® Spark-TTS å®˜æ–¹ä»£ç ä»“åº“ï¼šhttps://github.com/SparkAudio/Spark-TTS

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»ä¸‹è½½æºç çš„ ZIP åŒ…ï¼š

![ç‚¹å‡»ä¸‹è½½æºç  zip åŒ…](https://imgoss.xgss.net/picgo/1742401324185_image.png?aliyun)

ä¸‹è½½å®Œæˆåè§£å‹ï¼Œå°†æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤åˆ¶åˆ° `D:/spark` æ–‡ä»¶å¤¹ä¸­ã€‚å¤åˆ¶åçš„ç›®å½•ç»“æ„åº”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![å¤åˆ¶åç›®å½•ç»“æ„å¦‚å›¾](https://imgoss.xgss.net/picgo/1742401383947_image.png?aliyun)

## 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–

åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

åœ¨è¯¥æ–‡ä»¶å¤¹åœ°å€æ è¾“å…¥ `cmd` å¹¶å›è½¦ï¼Œåœ¨å¼¹å‡ºçš„é»‘è‰²ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
python -m venv venv
```

æ‰§è¡Œåï¼Œ`D:/spark` ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ª `venv` æ–‡ä»¶å¤¹ï¼š

![æˆåŠŸåæ–‡ä»¶å¤¹ä¼šå¤šå‡ºä¸€ä¸ª venv ç›®å½•](https://imgoss.xgss.net/picgo/1742401590109_image.png?aliyun)

> **æ³¨æ„ï¼š** å¦‚æœåœ¨æ‰§è¡Œæ—¶æç¤º `python ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤`ï¼Œè¯´æ˜æ²¡æœ‰å®‰è£… Python æˆ–æ²¡æœ‰å°†å…¶æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œè¯·å‚è€ƒç›¸å…³æ–‡ç« å®‰è£… Pythonã€‚

æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œ `venv\scripts\activate` æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚æ¿€æ´»åï¼Œç»ˆç«¯è¡Œé¦–ä¼šå‡ºç° `(venv)` å­—æ ·ï¼Œè¡¨ç¤ºæ¿€æ´»æˆåŠŸã€‚åç»­æ‰€æœ‰å‘½ä»¤éƒ½éœ€è¦åœ¨æ­¤ç¯å¢ƒä¸‹æ‰§è¡Œï¼Œæ¯æ¬¡æ‰§è¡Œå‰è¯·æ£€æŸ¥æ˜¯å¦å·²æ¿€æ´»ã€‚

![ç¡®ä¿å¼€å¤´æœ‰(venv)å­—æ ·](https://imgoss.xgss.net/picgo/1742401699839_image.png?aliyun)

å®‰è£…ä¾èµ–

åœ¨å·²æ¿€æ´»çš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œç»§ç»­åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…æ‰€æœ‰ä¾èµ–ï¼š

```
pip install -r requirements.txt

æˆ–è€…ï¼š
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple
```



## 3. ä¸‹è½½æ¨¡å‹

å¼€æº AI é¡¹ç›®æ‰€éœ€çš„æ¨¡å‹é€šå¸¸æ‰˜ç®¡åœ¨ Hugging Face (huggingface.co) ä¸Šã€‚ç”±äºè¯¥ç½‘ç«™åœ¨å›½å†…å·²è¢«å±è”½ï¼Œå› æ­¤éœ€è¦ç§‘å­¦ä¸Šç½‘æ‰èƒ½ä¸‹è½½æ¨¡å‹ã€‚è¯·ç¡®ä¿å·²é…ç½®å¥½ç§‘å­¦ä¸Šç½‘ç¯å¢ƒï¼Œå¹¶è®¾ç½®äº†ç³»ç»Ÿä»£ç†ã€‚

åœ¨å½“å‰ç›®å½• `D:/spark` ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `down.txt` çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå°†ä»¥ä¸‹ä»£ç å¤åˆ¶ç²˜è´´åˆ°æ–‡ä»¶ä¸­å¹¶ä¿å­˜ï¼š

```
from huggingface_hub import snapshot_download
snapshot_download("SparkAudio/Spark-TTS-0.5B", local_dir="pretrained_models/Spark-TTS-0.5B")
print('ä¸‹è½½å®Œæˆ')
```

ç„¶åï¼Œåœ¨å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒçš„ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
python down.txt
```

æ³¨æ„æ£€æŸ¥å‘½ä»¤è¡Œå‰æ˜¯å¦å­˜åœ¨ `(venv)`ï¼š

ç­‰å¾…ç»ˆç«¯æç¤ºä¸‹è½½å®Œæˆã€‚

å¦‚æœè¾“å‡ºç±»ä¼¼ä»¥ä¸‹ä¿¡æ¯ï¼Œè¯´æ˜ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œå¯èƒ½æ˜¯ç§‘å­¦ä¸Šç½‘ç¯å¢ƒé…ç½®ä¸æ­£ç¡®ï¼š

```
Returning existing local_dir `pretrained_models\Spark-TTS-0.5B` as remote repo cannot be accessed in `snapshot_download` ((MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /api/models/SparkAudio/Spark-TTS-0.5B/revision/main (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x000001BC4C8A4430>, 'Connection to huggingface.co timed out. (connect timeout=None)'))"), '(Request ID: aa61d1fb-ffc7-4479-9a99-2258c1bc0aee)')).
```

![è¿æ¥å¤±è´¥ï¼Œè¯·æ­£ç¡®é…ç½®ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ](https://imgoss.xgss.net/picgo/1742402280563_image.png?aliyun)

## 4. å¯åŠ¨ Web ç•Œé¢

æ¨¡å‹ä¸‹è½½å®Œæˆåï¼Œå°±å¯ä»¥å¯åŠ¨å¹¶æ‰“å¼€ Web ç•Œé¢äº†ã€‚

åœ¨å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒçš„ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
python webui.py
```

ç­‰å¾…å‡ºç°å¦‚ä¸‹ä¿¡æ¯æ—¶ï¼Œè¡¨ç¤ºå¯åŠ¨å®Œæˆï¼š

![å¯åŠ¨æˆåŠŸ](https://pvtr2.pyvideotrans.com/1742400621321_image.png)

æ­¤æ—¶ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åœ°å€ `http://127.0.0.1:7860`ï¼ŒWeb ç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æ‰“å¼€webç•Œé¢](https://imgoss.xgss.net/picgo/1742400483861_image.png?aliyun)

## 5. è¯­éŸ³å…‹éš†æµ‹è¯•[](https://pvt9.com/_posts/spark-tts#_5-è¯­éŸ³å…‹éš†æµ‹è¯•)

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€‰æ‹©ä¸€ä¸ªä½ æƒ³è¦å…‹éš†éŸ³è‰²çš„éŸ³é¢‘æ–‡ä»¶ï¼ˆæ—¶é•¿ 3-10 ç§’ï¼Œå‘éŸ³æ¸…æ™°ï¼ŒèƒŒæ™¯å¹²å‡€ï¼‰ã€‚

ç„¶ååœ¨å³ä¾§ `Text of prompt speech` ä¸­è¾“å…¥è¯¥éŸ³é¢‘å¯¹åº”çš„æ–‡æœ¬å†…å®¹ï¼Œå·¦ä¾§è¾“å…¥ä½ å¸Œæœ›ç”Ÿæˆçš„è¯­éŸ³æ–‡æœ¬ï¼Œæœ€åç‚¹å‡»åº•éƒ¨çš„ **Generate** æŒ‰é’®å¼€å§‹æ‰§è¡Œã€‚

![æ‰§è¡Œè¯­éŸ³å…‹éš†](https://imgoss.xgss.net/picgo/1742402861915_image.png?aliyun)

æ‰§è¡Œå®Œæˆåï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

## 6. åœ¨ pyVideotrans è½¯ä»¶ä¸­ä½¿ç”¨

> Spark-TTS ä¸ F5-TTS éå¸¸ç›¸ä¼¼ï¼Œåªéœ€è¿›è¡Œç®€å•ä¿®æ”¹ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨ pyVideotrans çš„ F5-TTS é…éŸ³æ¸ é“ä¸­ä½¿ç”¨ Spark-TTSã€‚



æ‰“å¼€ `webui.py` æ–‡ä»¶ï¼Œåœ¨å¤§çº¦ç¬¬ 135 è¡Œçš„ä¸Šæ–¹ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š

```
    def basic_tts(gen_text_input, ref_text_input, ref_audio_input,remove_silence=None,speed_slider=None):
        """
        Gradio callback to clone voice using text and optional prompt speech.
        - text: The input text to be synthesised.
        - prompt_text: Additional textual info for the prompt (optional).
        - prompt_wav_upload/prompt_wav_record: Audio files used as reference.
        """
        prompt_speech = ref_audio_input
        prompt_text_clean = None if len(ref_text_input) < 2 else ref_text_input

        audio_output_path = run_tts(
            gen_text_input,
            model,
            prompt_text=prompt_text_clean,
            prompt_speech=prompt_speech
        )
        return audio_output_path,prompt_text_clean
```



![ç‰¹åˆ«è¦æ³¨æ„ä»£ç å¯¹åº”å±‚çº§éœ€å¯¹é½](https://imgoss.xgss.net/picgo/1742403172227_image.png?aliyun)

**ç‰¹åˆ«æ³¨æ„ï¼š** Python ä»£ç ä½¿ç”¨ç©ºæ ¼è¿›è¡Œç¼©è¿›å¯¹é½ï¼Œå¦åˆ™ä»£ç ä¼šæŠ¥é”™ã€‚ä¸ºé¿å…å‡ºé”™ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€ `webui.py` æ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸“ä¸šçš„ä»£ç ç¼–è¾‘å™¨ï¼Œä¾‹å¦‚ Notepad++ æˆ– VSCode ç­‰å…è´¹å·¥å…·ã€‚

ç„¶åï¼Œæ‰¾åˆ°å¤§çº¦ç¬¬ 190 è¡Œçš„ `generate_buttom_clone = gr.Button("Generate")` ä»£ç ã€‚ åœ¨å…¶ä¸Šæ–¹ç²˜è´´ä»¥ä¸‹ä»£ç ï¼ŒåŒæ ·å¿…é¡»æ³¨æ„å¯¹é½ï¼š

```
generate_buttom_clone2 = gr.Button("Generate2",visible=False)
generate_buttom_clone2.click(
       basic_tts,
       inputs=[
          text_input,
          prompt_text_input,
          prompt_wav_upload,
          text_input,
          text_input
       ],
       outputs=[audio_output,prompt_text_input],
       api_name="basic_tts"
 )
```



![æ³¨æ„å±‚çº§å¯¹é½](https://imgoss.xgss.net/picgo/1742403364923_image.png?aliyun)

ä¿å­˜æ–‡ä»¶åï¼Œé‡æ–°å¯åŠ¨ `webui.py`ï¼š

```
python webui.py
```

![å¯åŠ¨æ—¶åŠ¡å¿…æ³¨æ„(venv)](https://pvtr2.pyvideotrans.com/1742403421047_image.png)

- å°†åœ°å€ `http://127.0.0.1:7860` å¡«å†™åˆ° pyVideotrans è½¯ä»¶çš„ â€œèœå•â€ -> â€œTTS è®¾ç½®â€ -> â€œF5-TTSâ€ çš„ API åœ°å€ä¸­ï¼Œå³å¯å¼€å§‹ä½¿ç”¨ã€‚å‚è€ƒéŸ³é¢‘çš„ä½ç½®å’Œå¡«å†™æ–¹å¼ä¸ F5-TTS çš„ä½¿ç”¨æ–¹æ³•ä¸€è‡´ã€‚

# ç»“æŸ

ChatTTSå’ŒSpark-TTSéƒ½æ˜¯éå¸¸ä¼˜ç§€çš„å…è´¹å¼€æºå£°éŸ³å…‹éš†ã€æ–‡æœ¬è½¬è¯­éŸ³è½¯ä»¶ã€‚ æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è¯•è¯•ã€‚

å†™æ–‡ä¸æ˜“ï¼Œå¦‚æœä½ éƒ½çœ‹åˆ°äº†è¿™é‡Œï¼Œè¯·ç‚¹ä¸ªèµå’Œåœ¨çœ‹ï¼Œåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ï¼›ä¹Ÿåˆ«å¿˜äº†å…³æ³¨æ˜Ÿå“¥ç©äº‘ï¼è¿™é‡Œæœ‰æ»¡æ»¡çš„å¹²è´§åˆ†äº«ï¼Œè¿˜æœ‰è½»æ¾æœ‰è¶£çš„æŠ€æœ¯äº¤æµï½ç‚¹ä¸ªèµã€åˆ†äº«ç»™èº«è¾¹çš„å°ä¼™ä¼´ï¼Œä¸€èµ·æˆé•¿ï¼Œä¸€èµ·ç©è½¬æŠ€æœ¯ä¸–ç•Œå§ï¼ ğŸ˜Š



