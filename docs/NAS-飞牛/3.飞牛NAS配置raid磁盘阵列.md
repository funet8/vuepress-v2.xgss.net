# 星哥带你玩飞牛NAS-2：飞牛配置RAID磁盘阵列



## 前言

大家好，我是星哥之前星哥写了[《星哥带你玩飞牛NAS-1：安装飞牛NAS》](https://mp.weixin.qq.com/s/QMaWJ8E9cd4-y5p02NWqzg) 今天来了解RAID磁盘阵列,配置好了，可以保护您的数据安全！

在数据存储的世界里，**安全与性能**永远是绕不开的话题。很多朋友买了飞牛NAS，却只用它当“硬盘盒”，其实它的真正实力在于——**RAID磁盘阵列**。今天星哥就带大家一步步玩转飞牛 NAS，手把手配置 RAID，让你的数据既稳又快。

## 什么是RAID？

RAID（Redundant Array of Independent Disks）是一种存储虚拟化技术，它通过不同方式组合多块硬盘，实现以下目标：

- **性能提升**：通过条带化（Striping）技术并行读写多个磁盘，加快 I/O 速度。
- **数据冗余**：通过镜像（Mirroring）或奇偶校验（Parity）机制，在硬盘故障时仍能恢复数据。
- **容量整合**：将多块硬盘合并为一个逻辑磁盘，简化管理。

RAID 可以通过硬件控制器或软件（如 Linux 的 mdadm）实现，常见模式包括 RAID 0、RAID 1、RAID 5、RAID 6、RAID 10 等。

说白了就是 **RAID 就是把几块硬盘“绑”在一起，变成一块更强的硬盘。**

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763377258467.png?tx)

## 为什么要做RAID？

我们做raid最主要的原因就是硬盘的冗余，就如同开车的备胎，如果有个轮胎出现问题，我们可以拿出备胎继续行驶！“硬盘有价，数据无价”，当我们的硬盘出现坏道，里面的数据无法读取的时候，你这时候就游刃有余的更换坏掉的硬盘。

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763227879408.png?tx)



### 1. 提高数据安全性

RAID 能有效防止因单块硬盘故障导致的数据丢失。例如：

- **RAID 1**：双盘镜像，任意一块损坏仍可恢复数据。
- **RAID 5/6**：通过奇偶校验容忍 1~2 块硬盘故障。

### 2. 提升读写性能

RAID 0、RAID 10 等模式通过并行读写多个磁盘，显著提升 I/O 性能，适合视频剪辑、数据库等高负载场景。

### 3. 提高存储效率

RAID 5 在保证冗余的同时，磁盘利用率高达 66%~80%，比 RAID 1 更节省空间。

### 4. 简化管理

多个物理磁盘被抽象为一个逻辑磁盘，便于系统识别和运维管理。



## RAID类型要求

飞牛（fnNAS）NAS 支持以下几种 RAID 模式／存储空间类型：

| RAID类型 | 最少硬盘数量 | 举例        | 最终总容量                 | 可容忍几块盘故障                   |
| -------- | ------------ | ----------- | -------------------------- | ---------------------------------- |
| RAID 0   | 2块硬盘      | 2块100G硬盘 | 200G（全部叠加）           | 0                                  |
| RAID 1   | 2块硬盘      | 2块100G硬盘 | 100G（两块互为镜像）       | 1                                  |
| RAID 5   | 2块硬盘      | 4块100G硬盘 | 300G（一块盘容量用于校验） | 1                                  |
| RAID 6   | 4块硬盘      | 4块100G硬盘 | 200G（两块盘容量用于校验） | 2                                  |
| RAID 10  | 4块硬盘      | 4块100G硬盘 | 200G（一半用于镜像）       | 每组可坏 1 块，但不能坏同组的 2 块 |

注明：RAID 10  读RAID一零，不读RAID十，因为RAID是先做RAID1再做RAID0。

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763227906931.png?tx)

**RAID 0**：条带化，强调性能，没有冗余

**RAID 1**：镜像，双盘互为备份，安全优先

**RAID 5**：三盘起步，分布式奇偶校验，兼顾容量与安全

**RAID 6**：四盘起步，双重校验，更高容错能力

**RAID 10**：镜像 + 条带化，性能与安全兼顾

## RAID 适用场景举例

**家庭用户**：推荐 **RAID 1**，保证数据安全。

**小型工作室**：推荐 **RAID 5**，容量与安全平衡。

**企业/关键业务**：推荐 **RAID 6 或 RAID 10**，更高冗余与性能。

**临时缓存/高速场景**：可用 **RAID 0**，但务必做好备份。

| RAID 类型 | 适合场景               | 特点                   |
| --------- | ---------------------- | ---------------------- |
| RAID 0    | 高速缓存、临时数据     | 性能高，无冗余         |
| RAID 1    | 家庭照片、文档备份     | 安全性高，容量减半     |
| RAID 5    | 小型工作室、文件服务器 | 性能与安全平衡         |
| RAID 6    | 企业级存储             | 双重冗余，容错能力强   |
| RAID 10   | 高性能数据库           | 性能与安全兼顾，成本高 |



## 文件系统

自 V0.9.35 版本起，fnOS 共支持 Btrfs、ZFS 和 ext4 这 3 种 NAS 上主流的文件系统，可根据使用需求、硬件性能等因素选择合适的文件系统。

### 选择合适的文件系统

- **家庭/轻量 NAS → 选 Btrfs**，功能丰富（快照、压缩、校验），适合灵活管理。
- **企业/高可靠场景 → 选 ZFS**，数据完整性最强，但硬件要求高。
- **老旧设备/兼容性优先 → 选 ext4**，稳定轻量，但功能有限。

### 特性对比：

| 特性          | **Btrfs**                        | **ZFS**                | **ext4**             |
| ------------- | -------------------------------- | ---------------------- | -------------------- |
| **定位**      | 新一代 Linux 文件系统，功能全面  | 企业级存储，集成卷管理 | 传统稳定文件系统     |
| **快照/回滚** | ✅ 支持                           | ✅ 支持                 | ❌ 不支持             |
| **压缩/去重** | ✅ 支持                           | ✅ 支持                 | ❌ 不支持             |
| **数据校验**  | ✅ CRC 校验，能检测并修复部分错误 | ✅ 端到端校验，自动修复 | ❌ 无原生校验         |
| **RAID 支持** | ✅ 内置 RAID 0/1/5/6/10           | ✅ RAID-Z1/Z2/Z3        | ❌ 需外部工具         |
| **性能消耗**  | 中等                             | 高（需 ≥8GB 内存）     | 低                   |
| **适用场景**  | 家庭 NAS、中小型存储             | 企业级存储、关键业务   | 老旧硬件、兼容性优先 |



## 飞牛配置RAID

实际使用星哥还是建议至少三块硬盘，组成RAID5。

就在VMware虚拟机中演示，实体机中可以看成你的买的硬盘。

在飞牛系统中，增加了三块100G的硬盘

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763374552328.png?tx)

点击启动

进入系统设置

### 1.查看硬盘信息

可以看到1块60G的硬盘和3块100G的硬盘

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763374707849.png?tx)

## 创建Linear或RAID0

Linear和RAID0放到一起讲吧，它两有相同点：都不支持硬盘冗余，Linear可以多盘叠加，而RAID0读写速度更快。

 Linear vs RAID 0 区别解析

| 特性           | Linear（线性拼接）                                     | RAID 0（条带化）                           |
| -------------- | ------------------------------------------------------ | ------------------------------------------ |
| **工作方式**   | 把多块硬盘顺序拼接成一个大盘，先写满第一块，再写第二块 | 把数据切成条带，平均分布到所有硬盘并行写入 |
| **性能**       | 性能≈单盘，几乎没有提升                                | 性能显著提升，读写速度接近硬盘数量倍增     |
| **容量利用率** | 所有硬盘容量相加                                       | 所有硬盘容量相加                           |
| **容错能力**   | 无冗余，任一硬盘坏掉，数据丢失                         | 无冗余，任一硬盘坏掉，整个阵列数据丢失     |
| **适用场景**   | 想要“大容量整合”，但不追求速度                         | 想要“高性能”，但不在意数据安全             |

如果你只是想把硬盘容量拼起来用，**Linear** 就够了。

如果你需要更快的读写速度（比如视频剪辑、大文件传输），**RAID 0** 更合适，但一定要记得额外备份。

### 1.创建存储空间

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763376397321.png?tx)

### 2.选择文件系统

根据需要选择文件系统，我这里默认选择Btrfs

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763376443769.png?tx)

### 3.选择内置硬盘

这里选择2块100G的硬盘

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763375017278.png?tx)

### 4.选择存储模式

这里两块硬盘可以选择 Linear 、RAID0、RAID1

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763375028410.png?tx)

### 5.选择用户

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763376592872.png?tx)

### 6.创建存储空间

描述、硬盘检测

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763375059542.png?tx)



### 7.格式化

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763375137658.png?tx)

Linear完成。

### 8.卸载或删除

卸载，保留数据，可以重新挂载。

删除：危险操作！

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763376713223.png?tx)



再到VMwar虚拟机里添加一块硬盘

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763376246136.png?tx)

用同样的方法可以组成RAID1、RAID5、RAID6、RAID10

![img](https://imgoss.xgss.net/picgo-tx2025/QQ_1763376846273.png?tx)



## 总结

**家庭用户**：推荐 **RAID 1**，保证数据安全。

**小型工作室**：推荐 **RAID 5**，容量与安全平衡。

**企业/关键业务**：推荐 **RAID 6 或 RAID 10**，更高冗余与性能。

**临时缓存/高速场景**：可用 **RAID 0**，但务必做好备份。

飞牛 NAS 的 RAID 配置其实没那么复杂，跟着步骤走 10 分钟就能搞定，关键是选对 RAID 级别和做好数据备份。配置完成后，不管是存照片、放电影，还是办公文件共享，都能兼顾速度和安全～





