import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,o as e}from"./app-BiQR_lPj.js";const l={};function d(p,s){return e(),n("div",null,s[0]||(s[0]=[i(`<h1 id="linux安装samba与windows实现共享文件夹" tabindex="-1"><a class="header-anchor" href="#linux安装samba与windows实现共享文件夹"><span>Linux安装samba与windows实现共享文件夹</span></a></h1><p>Linux与Linux间通过什么共享文件呢——NFS，Windows与Windows之间呢——共享文件功能，那Windows与Linux之间通过samba。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>samba：只能在内网使用，类似于windows的网络邻居（文件共享服务）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>samba两个守护进程： smbd 【监听139端口，TCP端口】 负责用户验证和文件共享 nmbd 【监听137和138端口 UDP端口】 负责处理浏览共享和计算机名称解析</p><h2 id="检查是否安装samba" tabindex="-1"><a class="header-anchor" href="#检查是否安装samba"><span>检查是否安装samba</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>rpm -qa|grep samba</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>否则，使用yum安装</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># yum install samba</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/linux-install-saba.jpg?aliyun" alt="linux-install-saba"></p><h2 id="配置samba" tabindex="-1"><a class="header-anchor" href="#配置samba"><span>配置samba</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># chkconfig smb on   </span></span>
<span class="line"><span># chkconfig nmb on</span></span>
<span class="line"><span>/etc/init.d/smb start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Centos7</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl enable smb.service</span></span>
<span class="line"><span>systemctl enable nmb.service</span></span>
<span class="line"><span>systemctl start smb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="新建smb用户用于访问linux共享文件" tabindex="-1"><a class="header-anchor" href="#新建smb用户用于访问linux共享文件"><span>新建smb用户用于访问Linux共享文件</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># useradd smb       # 新建用户</span></span>
<span class="line"><span># smbpasswd -a smb  # 修改密码</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#smbpasswd -x smb  # 删除smb用户</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时/home目录会增加一个smb的用户。该Linux用户目录将可直接共享到Windows下。若要共享其它文件，按步骤3配置文件。如果不用了，删除smb用户也是可以的，</p><p>samba配置文件【/etc/samba/smb.conf】。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[tmp]</span></span>
<span class="line"><span>comment = Tmp Directories</span></span>
<span class="line"><span>path = /tmp                         # 共享的Linux目录</span></span>
<span class="line"><span>public = no                         # 目录不公开</span></span>
<span class="line"><span>writeable = yes                     # 可写</span></span>
<span class="line"><span>browseable = yes                    # 可读</span></span>
<span class="line"><span>valid users = smb                   # 访问用户，上面新建的，也可以使用原来已有的</span></span>
<span class="line"><span></span></span>
<span class="line"><span>复制去掉注释</span></span>
<span class="line"><span></span></span>
<span class="line"><span>分配权限</span></span>
<span class="line"><span>chown smb.smb -R /data2T/smb</span></span>
<span class="line"><span>或者：</span></span>
<span class="line"><span>chmod 777 -R /data2T/smb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="让smaba通过防火墙" tabindex="-1"><a class="header-anchor" href="#让smaba通过防火墙"><span>让smaba通过防火墙</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>编辑 /etc/sysconfig/iptables 文件</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m tcp -p tcp --dport 139 -j ACCEPT</span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m tcp -p tcp --dport 445 -j ACCEPT</span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m udp -p udp --dport 137 -j ACCEPT</span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m udp -p udp --dport 138 -j ACCEPT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启防火墙</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># /etc/rc.d/init.d/iptables restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在Windows下使用Win+R开启运行窗口，输入</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>\\\\192.168.1.6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此时使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># smbstatus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>centos7</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>yum -y install samba samba-client</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动samba</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl start smb</span></span>
<span class="line"><span>systemctl status smb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>设置开机自启动</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># systemctl enable smb</span></span>
<span class="line"><span>Created symlink from /etc/systemd/system/multi-user.target.wants/smb.service to /usr/lib/systemd/system/smb.service.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="新建smb用户用于访问linux共享文件-1" tabindex="-1"><a class="header-anchor" href="#新建smb用户用于访问linux共享文件-1"><span>新建smb用户用于访问Linux共享文件</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># useradd smb       # 新建用户</span></span>
<span class="line"><span># smbpasswd -a smb  # 修改密码</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#smbpasswd -x smb  # 删除smb用户</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建需要共享的目录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -p /data/smb</span></span>
<span class="line"><span>chown smb.smb -R /data/smb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>samba配置文件【/etc/samba/smb.conf】。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># cp /etc/samba/smb.conf /etc/samba/smb.conf_bak</span></span>
<span class="line"><span>[tmp]</span></span>
<span class="line"><span>comment = Tmp Directories</span></span>
<span class="line"><span>path = /tmp                         # 共享的Linux目录</span></span>
<span class="line"><span>public = no                         # 目录不公开</span></span>
<span class="line"><span>writeable = yes                     # 可写</span></span>
<span class="line"><span>browseable = yes                    # 可读</span></span>
<span class="line"><span>valid users = smb                   # 访问用户，上面新建的，也可以使用原来已有的</span></span>
<span class="line"><span></span></span>
<span class="line"><span>复制去掉注释</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vi /etc/samba/smb.conf</span></span>
<span class="line"><span>复制以下内容：</span></span>
<span class="line"><span>[global]</span></span>
<span class="line"><span>	workgroup = MYGROUP</span></span>
<span class="line"><span>	server string = Samba Server Version %v</span></span>
<span class="line"><span>	log file = /var/log/samba/log.%m</span></span>
<span class="line"><span>	# max 50KB per log file, then rotate</span></span>
<span class="line"><span>	max log size = 50</span></span>
<span class="line"><span>	security = user</span></span>
<span class="line"><span>	passdb backend = tdbsam</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#============================ Share Definitions ==============================</span></span>
<span class="line"><span>[beijing]</span></span>
<span class="line"><span>comment = Tmp Directories</span></span>
<span class="line"><span>path = /data/smb</span></span>
<span class="line"><span>public = no</span></span>
<span class="line"><span>writeable = yes</span></span>
<span class="line"><span>browseable = yes</span></span>
<span class="line"><span>valid users = smb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl restart smb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="让smaba通过防火墙-1" tabindex="-1"><a class="header-anchor" href="#让smaba通过防火墙-1"><span>让smaba通过防火墙</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>vi /etc/sysconfig/iptables </span></span>
<span class="line"><span></span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m tcp -p tcp --dport 139 -j ACCEPT</span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m tcp -p tcp --dport 445 -j ACCEPT</span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m udp -p udp --dport 137 -j ACCEPT</span></span>
<span class="line"><span>-A INPUT -m state --state NEW -m udp -p udp --dport 138 -j ACCEPT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启防火墙服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl restart iptables</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="阿里云服务器ecs的samba配置方法" tabindex="-1"><a class="header-anchor" href="#阿里云服务器ecs的samba配置方法"><span>阿里云服务器ECS的samba配置方法</span></a></h3><p>https://blog.csdn.net/XHG1993/article/details/78872724</p>`,46)]))}const c=a(l,[["render",d]]),b=JSON.parse('{"path":"/article/fc75rwde/","title":"Linux安装samba与windows实现共享文件夹","lang":"en-US","frontmatter":{"title":"Linux安装samba与windows实现共享文件夹","createTime":"2025/05/27 17:51:17","permalink":"/article/fc75rwde/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":2.54,"words":761},"filePathRelative":"file-system/Linux安装samba与windows实现共享文件夹.md"}');export{c as comp,b as data};
