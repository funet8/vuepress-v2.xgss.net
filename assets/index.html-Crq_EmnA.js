import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as i,o as n}from"./app-BiQR_lPj.js";const l={};function r(t,s){return n(),e("div",null,s[0]||(s[0]=[i(`<h1 id="centos7安装rabbitmq" tabindex="-1"><a class="header-anchor" href="#centos7安装rabbitmq"><span>Centos7安装RabbitMQ</span></a></h1><h1 id="_1、安装前准备" tabindex="-1"><a class="header-anchor" href="#_1、安装前准备"><span>1、安装前准备</span></a></h1><p>由于RabbitMQ使用的是Erlang语言开发的，因此在安装RabbitMQ之前需要安装Erlang环境，Erlang与RabbitMQ的下载地址分别为：</p><p>Erlang：https://github.com/rabbitmq/erlang-rpm/releases</p><p>RabbitMQ：https://github.com/rabbitmq/rabbitmq-server/releases</p><p>注意：RabbitMQ与Erlang安装时是有版本对于关系，可以查看：https://www.rabbitmq.com/which-erlang.html</p><h2 id="版本选择-匹配centos7" tabindex="-1"><a class="header-anchor" href="#版本选择-匹配centos7"><span>版本选择（匹配Centos7）</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20230331105520563.png?aliyun" alt="image-20230331105520563"></p><p>由于高版本不支持Centos7后面这个el8,代表是Centos8才能安装的,高版本的RabbitMQ有些不支持Centos7,但是本篇博客用来演示的是Centos7的系统环境,所以小编在这只能带大家安装3.9.13的RabbitMQ了</p><h3 id="rabbitmq-3-9-13" tabindex="-1"><a class="header-anchor" href="#rabbitmq-3-9-13"><span>RabbitMQ： 3.9.13</span></a></h3><p>https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.9.13</p><h3 id="erlang-25-3" tabindex="-1"><a class="header-anchor" href="#erlang-25-3"><span>Erlang：25.3</span></a></h3><p>https://github.com/rabbitmq/erlang-rpm/releases/tag/v23.3.4</p><p>安装的系统为Centos7，因此在下载RabbitMQ与Erlang版本的时候需要下载xxx.el7的版本，我这里下载版本如下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>rabbitmq-server-3.9.13-1.el7.noarch.rpm</span></span>
<span class="line"><span>下载：</span></span>
<span class="line"><span># wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.9.13/rabbitmq-server-3.9.13-1.el7.noarch.rpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>erlang-23.3.4.11-1.el7.x86_64.rpm</span></span>
<span class="line"><span>下载： </span></span>
<span class="line"><span># wget https://github.com/rabbitmq/erlang-rpm/releases/download/v23.3.4/erlang-23.3.4-1.el7.x86_64.rpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>备用下载：</span></span>
<span class="line"><span># wget  http://js.funet8.com/centos_software/rabbitmq/rabbitmq-server-3.9.13-1.el7.noarch.rpm</span></span>
<span class="line"><span># wget  http://js.funet8.com/centos_software/rabbitmq/erlang-23.3.4-1.el7.x86_64.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将下载好的文件上传到服务器。</p><h1 id="_2、安装erlang" tabindex="-1"><a class="header-anchor" href="#_2、安装erlang"><span>2、安装Erlang</span></a></h1><p>使用如下命令安装<code>Erlang</code></p><div class="language-none line-numbers-mode" data-highlighter="shiki" data-ext="none" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-none"><span class="line"><span># rpm -ivh erlang-23.3.4-1.el7.x86_64.rpm </span></span>
<span class="line"><span>warning: erlang-23.3.4-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID cc4bbe5b: NOKEY</span></span>
<span class="line"><span>Preparing...                          ################################# [100%]</span></span>
<span class="line"><span>Updating / installing...</span></span>
<span class="line"><span>   1:erlang-23.3.4-1.el7              ################################# [100%]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_3、安装rabbitmq" tabindex="-1"><a class="header-anchor" href="#_3、安装rabbitmq"><span>3、安装RabbitMQ</span></a></h1><p>上一步我们已经把Erlang安装成功，现在安装RabbitMQ，如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># rpm -ivh rabbitmq-server-3.9.13-1.el7.noarch.rpm </span></span>
<span class="line"><span>warning: rabbitmq-server-3.9.13-1.el7.noarch.rpm: Header V4 RSA/SHA512 Signature, key ID 6026dfca: NOKEY</span></span>
<span class="line"><span>Preparing...                          ################################# [100%]</span></span>
<span class="line"><span>Updating / installing...</span></span>
<span class="line"><span>   1:rabbitmq-server-3.9.13-1.el7     ################################# [100%]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查是否安装成功 rabitmqctl version</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># rabitmqctl version</span></span>
<span class="line"><span>-bash: rabitmqctl: command not found</span></span>
<span class="line"><span>重装了一次就显示正常</span></span>
<span class="line"><span># rabbitmqctl version</span></span>
<span class="line"><span>3.9.13</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_4、运行rabbitmq服务器" tabindex="-1"><a class="header-anchor" href="#_4、运行rabbitmq服务器"><span>4、运行RabbitMQ服务器</span></a></h1><h2 id="_4-1、启动服务器" tabindex="-1"><a class="header-anchor" href="#_4-1、启动服务器"><span>4.1、启动服务器</span></a></h2><p>添加开机启动RabbitMQ服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chkconfig rabbitmq-server on</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动RabbitMQ服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl start rabbitmq-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看服务状态</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl status rabbitmq-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>停止服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl stop rabbitmq-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_4-2、安装web插件" tabindex="-1"><a class="header-anchor" href="#_4-2、安装web插件"><span>4.2、安装WEB插件</span></a></h2><p>RabbitMQ默认提供了WEB插件，方便通过页面进行RabbitMQ管理，需要执行如下命令启用WEB插件，启用之前如果RabbitMQ服务已经启动，则先停止服务。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl stop rabbitmq-server</span></span>
<span class="line"><span>rabbitmq-plugins enable rabbitmq_management</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看端口</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># netstat -tunpl|grep 15672</span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:15672           0.0.0.0:*               LISTEN      2510/beam.smp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>重新启动RabbitMQ服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>通过地址：http://192.168.1.20:15672 然后访问RabbitMQ</span></span>
<span class="line"><span></span></span>
<span class="line"><span>开放防火墙端口： 15672</span></span>
<span class="line"><span></span></span>
<span class="line"><span>iptables -A INPUT -p tcp --dport 15672 -j ACCEPT</span></span>
<span class="line"><span>service iptables save</span></span>
<span class="line"><span>systemctl restart iptables</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20230331111350141.png?aliyun" alt="image-20230331111350141"></p><p>RabbitMQ默认提供了一个guest账户，默认的账户没有权限登录不了，因此接下来我们需要创建用户。</p><h2 id="_4-3、创建用户" tabindex="-1"><a class="header-anchor" href="#_4-3、创建用户"><span>4.3、创建用户</span></a></h2><h3 id="创建账号" tabindex="-1"><a class="header-anchor" href="#创建账号"><span>创建账号</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># rabbitmqctl add_user admin 123456</span></span>
<span class="line"><span>Adding user &quot;admin&quot; ...</span></span>
<span class="line"><span>Done. Don&#39;t forget to grant the user permissions to some virtual hosts! See &#39;rabbitmqctl help set_permissions&#39; to learn more.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置用户角色" tabindex="-1"><a class="header-anchor" href="#设置用户角色"><span>设置用户角色</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>rabbitmqctl set_user_tags admin administrator</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="设置用户权限" tabindex="-1"><a class="header-anchor" href="#设置用户权限"><span>设置用户权限</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>命令格式：rabbitmqctl set_permissions [-p &lt;vhostpath&gt;] &lt;user&gt; &lt;conf&gt; &lt;write&gt; &lt;read&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面命令表示用户具有/vhost1这个virtual host中的所有资源配置、读、写权限</p><h3 id="查看用户和角色" tabindex="-1"><a class="header-anchor" href="#查看用户和角色"><span>查看用户和角色</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>rabbitmqctl list_users</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="删除用户" tabindex="-1"><a class="header-anchor" href="#删除用户"><span>删除用户</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>rabbitmqctl delete_user guest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以看到用户已经添加成功并设置了角色，现在就可以使用用户登录RabbitMQ了。</p><p><img src="https://imgoss.xgss.net/picgo/image-20230331111757327.png?aliyun" alt="image-20230331111757327"></p><h1 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h1><p>https://www.cnblogs.com/tenghu/p/15887218.html</p>`,59)]))}const h=a(l,[["render",r]]),c=JSON.parse('{"path":"/article/70gwv38b/","title":"centos7安装RabbitMQ","lang":"en-US","frontmatter":{"title":"centos7安装RabbitMQ","createTime":"2025/05/27 17:51:17","permalink":"/article/70gwv38b/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":2.58,"words":775},"filePathRelative":"linux-basis/centos7安装RabbitMQ.md"}');export{h as comp,c as data};
