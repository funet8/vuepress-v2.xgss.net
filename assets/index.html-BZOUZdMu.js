import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as i,o as e}from"./app-BiQR_lPj.js";const p={};function t(l,s){return e(),a("div",null,s[0]||(s[0]=[i(`<h1 id="gitbook-jenkins-github实现文档持续集成" tabindex="-1"><a class="header-anchor" href="#gitbook-jenkins-github实现文档持续集成"><span>Gitbook+Jenkins+Github实现文档持续集成</span></a></h1><h2 id="需求说明" tabindex="-1"><a class="header-anchor" href="#需求说明"><span>需求说明</span></a></h2><p>为了搭建一个gitbook+github的团队协作文档系统，然后通过jenkins实现持续集成，也就是当你在gitlab上修改文档以后，jenkins会自动build此项目，这个时候你再通过浏览器访问就是修改后的内容。</p><h2 id="技术栈说明" tabindex="-1"><a class="header-anchor" href="#技术栈说明"><span>技术栈说明</span></a></h2><p>Gitbook： 是一个基于 Node.js 的命令行工具，可使用 Github/Git 和 Markdown 来制作精美的电子书，GitBook 并非关于 Git 的教程。</p><p>Jenkins：是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件项目可以进行持续集成 。</p><p>Github：是一个面向开源及私有软件项目的托管平台，因为只支持Git作为唯一的版本库格式进行托管，故名GitHub。</p><h2 id="系统说明" tabindex="-1"><a class="header-anchor" href="#系统说明"><span>系统说明</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>系统： Centos7</span></span>
<span class="line"><span></span></span>
<span class="line"><span>IP： 192.168.1.5(内网穿透、腾讯云服务器)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>域名： gitbook.xgss.net</span></span>
<span class="line"><span></span></span>
<span class="line"><span>github:https://github.com/funet8/g.xgss.net.git</span></span>
<span class="line"><span>gitee:https://gitee.com/funet8/g.xgss.net.git</span></span>
<span class="line"><span></span></span>
<span class="line"><span>https://www.gitbook.com/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="jenkins和github配置" tabindex="-1"><a class="header-anchor" href="#jenkins和github配置"><span>Jenkins和Github配置</span></a></h1><p>写了这么多在说gitbook，现在说说一下jenkins，安装jenkins省略。</p><h2 id="重要前提" tabindex="-1"><a class="header-anchor" href="#重要前提"><span>重要前提</span></a></h2><p>1.GitHub收到提交的代码后要主动通知Jenkins，所以Jenkins所在服务器一定要有外网IP，否则GitHub无法访问，我的Jenkins服务器是部署在腾讯云的云主机上，带有外网IP（如果只有内网，那则需要用到内网穿透工具才能实现）；</p><p>2.本次实战要提交源码到GitHub，所以您需要有一个GitHub号，并在上面创建项目；</p><p>3.如果是内网的gitlab+jenkins则不需要有外网IP</p><h2 id="基本流程" tabindex="-1"><a class="header-anchor" href="#基本流程"><span>基本流程</span></a></h2><p>将编写的文件提交Github，Github通过Webhook钩子，通知执行jenkins，jenkins执行上线脚本或者构建动作，完成整个流程。</p><h2 id="新建jenkins任务" tabindex="-1"><a class="header-anchor" href="#新建jenkins任务"><span>新建jenkins任务</span></a></h2><p>回到主页 –&gt; 新建任务 –&gt; 新建一个自由风格的软件项目</p><p><img src="http://imgoss.xgss.net/picgo/image-20210909175533313.png?aliyunoss" alt="image-20210909175533313"></p><p>配置触发器</p><p>身份令牌这个可以随便写，尽量复杂一些</p><p><img src="http://imgoss.xgss.net/picgo/image-20210915182209327.png?aliyunoss" alt="image-20210915182209327"></p><p>生成钩子地址 JENKINS_URL/job/gitbook.xgss.net_github_online/build?token=TOKEN_NAME。将这个地址填写到github的项目webhook中。</p><p>http://0.0.0.0+端口/job/任务名/build?token=TOKEN值的链接</p><h2 id="构建执行脚本" tabindex="-1"><a class="header-anchor" href="#构建执行脚本"><span>构建执行脚本</span></a></h2><p><img src="http://imgoss.xgss.net/picgo/image-20210909182715587.png?aliyunoss" alt="image-20210909182715587"></p><h2 id="github-设置-webhooks" tabindex="-1"><a class="header-anchor" href="#github-设置-webhooks"><span>Github 设置 webhooks</span></a></h2><p>进入GitHub上指定的项目 –&gt; setting –&gt; WebHooks&amp;Services –&gt; add webhook –&gt; 输入刚刚部署地址</p><p>JENKINS_URL/job/gitbook.xgss.net_github_online/build?token=TOKEN_NAME</p><p><img src="http://imgoss.xgss.net/picgo/image-20210915182818437.png?aliyunoss" alt="image-20210915182818437"></p><h2 id="测试能否自动提交" tabindex="-1"><a class="header-anchor" href="#测试能否自动提交"><span>测试能否自动提交</span></a></h2><p>在git push看jenkins 能否自动执行。</p><p>有报错，在点击看具体的报错</p><p><img src="http://imgoss.xgss.net/picgo/image-20210915184202566.png?aliyunoss" alt="image-20210915184202566"></p><p>发现只能有get方法，post方法会报403</p><p>写了一个shell脚本每次写完自动提交，并且通知jenkins</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 提交</span></span>
<span class="line"><span>git add .</span></span>
<span class="line"><span></span></span>
<span class="line"><span>git commit -m &quot;提交修改文档&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>git push</span></span>
<span class="line"><span></span></span>
<span class="line"><span># webhook钩子</span></span>
<span class="line"><span>curl &quot;http://JENKINS_URL/job/项目名/build?token=密钥&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#修改以下参数</span></span>
<span class="line"><span>SERVER=&#39;http://IP:8080&#39;</span></span>
<span class="line"><span>Job_Name=&#39;gitbook.xgss.net_github_online&#39;</span></span>
<span class="line"><span>Token=&#39;token123456&#39;</span></span>
<span class="line"><span>USER=&#39;name&#39;</span></span>
<span class="line"><span>Password=&#39;1234&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#使用curl触发jenkins</span></span>
<span class="line"><span>curl --user $USER:\${Password} \${SERVER}/job/\${Job_Name}/build?token=\${Token}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,38)]))}const o=n(p,[["render",t]]),r=JSON.parse('{"path":"/article/e1aaz5it/","title":"Jenkins_Github","lang":"en-US","frontmatter":{"title":"Jenkins_Github","createTime":"2025/05/27 17:51:18","permalink":"/article/e1aaz5it/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":2.51,"words":754},"filePathRelative":"web/Jenkins_Github.md"}');export{o as comp,r as data};
