import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,o as e}from"./app-BiQR_lPj.js";const l={};function p(d,s){return e(),n("div",null,s[0]||(s[0]=[i(`<h1 id="如何将堡塔云waf备份、迁移到新的服务器" tabindex="-1"><a class="header-anchor" href="#如何将堡塔云waf备份、迁移到新的服务器"><span>如何将堡塔云WAF备份、迁移到新的服务器</span></a></h1><p>使用了一段时间的堡塔云WAF，觉得免费版的还是不错的，但是一直在单机运行，没有备份就没有安全感！</p><p>今天，星哥就结合实际案例，带你走一遍低风险的 WAF 备份流程，确保你在操作中既有底又高效。</p><h2 id="需求分析" tabindex="-1"><a class="header-anchor" href="#需求分析"><span>需求分析</span></a></h2><p>1.需要将生产环境的堡塔WAF备份</p><p>2.将备份文件拷贝到另外一台服务器中</p><p>3.恢复备份文件，实现备份+迁移堡塔WAF的工作。</p><p>官方的参考文档：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>https://www.kancloud.cn/kern123/cloudwaf/3209672</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>问题在于需要停机备份</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>停止WAF：btw stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在线服务一秒钟都无法停机，所以现在需要做个不停机、自动的备份方案。</p><p>实际操作中可以不停机，数据不会丢失。</p><h2 id="服务器环境" tabindex="-1"><a class="header-anchor" href="#服务器环境"><span>服务器环境</span></a></h2><p>两台服务器A 和B</p><p>A作为源服务器，将文件和数据库打包备份。</p><p>B作为目标服务器，将备份文件恢复到此服务器中。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>A的IP ： 192.168.1.3</span></span>
<span class="line"><span>B的IP ： 192.168.1.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1755160031884.png?tx" alt="img"></p><h3 id="打包备份" tabindex="-1"><a class="header-anchor" href="#打包备份"><span>打包备份</span></a></h3><p>在A服务器中操作</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /www/ &amp;&amp; tar -zcvf cloud_waf.tar.gz cloud_waf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ll -h</span></span>
<span class="line"><span>total 97M</span></span>
<span class="line"><span>drwxr-xr-x 7 root root 4.0K Aug  5 17:43 cloud_waf</span></span>
<span class="line"><span>-rw-r--r-- 1 root root  97M Aug 13 18:11 cloud_waf.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="下载备份文件-cloud-waf-tar-gz" tabindex="-1"><a class="header-anchor" href="#下载备份文件-cloud-waf-tar-gz"><span>下载备份文件 cloud_waf.tar.gz</span></a></h3><p>可以使用 Xftp、Winscp 等工具下载到本地电脑中，然后再上传到新的服务器到 /root 目录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>scp cloud_waf.tar.gz root@B服务器IP:/root/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="目标服务器需要做的步骤" tabindex="-1"><a class="header-anchor" href="#目标服务器需要做的步骤"><span>目标服务器需要做的步骤</span></a></h2><h3 id="解压" tabindex="-1"><a class="header-anchor" href="#解压"><span>解压</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>tar -zxf cloud_waf.tar.gz</span></span>
<span class="line"><span>cd cloud_waf</span></span>
<span class="line"><span># 查看备份文件</span></span>
<span class="line"><span>ll</span></span>
<span class="line"><span>total 5612</span></span>
<span class="line"><span>-rw-r--r-- 1 root root   65137 Jul 29 17:52 btw.init</span></span>
<span class="line"><span>-rw-r--r-- 1 root root     347 Jul 29 17:52 btw.service</span></span>
<span class="line"><span>-rw-r--r-- 1 root root   54595 Jul 29 17:52 cloudwaf_check.sh</span></span>
<span class="line"><span>drwxr-xr-x 8 root root     155 Aug  4 10:41 console</span></span>
<span class="line"><span>-rw-r--r-- 1 root root   65575 Jul 29 17:52 master_btw.init</span></span>
<span class="line"><span>-rw-r--r-- 1 root root   55090 Jul 29 17:52 master_cloudwaf_check.sh</span></span>
<span class="line"><span>drwxr-xr-x 5 root root      38 Jul 24 14:02 mysql</span></span>
<span class="line"><span>drwxr-xr-x 5 root root      41 Jul 24 14:02 nginx</span></span>
<span class="line"><span>-rw-r--r-- 1 root root   65908 Jul 29 17:52 slave_btw.init</span></span>
<span class="line"><span>-rw-r--r-- 1 root root   42877 Jul 29 17:52 slave_cloudwaf_check.sh</span></span>
<span class="line"><span>-rw-r--r-- 1 root root 4521218 Jul 29 17:52 submit.gz</span></span>
<span class="line"><span>drwxr-xr-x 7 root root      92 May 26 15:55 vhost</span></span>
<span class="line"><span>-rw-r--r-- 1 root root  853792 Jul 29 17:52 waf-acme_sh.zip</span></span>
<span class="line"><span>drwxr-xr-x 8 root root     138 Aug 13 16:52 wwwroot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="建立目录与恢复mysql数据" tabindex="-1"><a class="header-anchor" href="#建立目录与恢复mysql数据"><span>建立目录与恢复mysql数据</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -pv /www/cloud_waf/nginx/conf.d/waf/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\cp -arpf /root/cloud_waf/nginx/conf.d/waf/mysql_default.pl /www/cloud_waf/nginx/conf.d/waf/mysql_default.pl</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mv /root/cloud_waf/mysql /www/cloud_waf/mysql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在目标服务器中安装宝塔云waf" tabindex="-1"><a class="header-anchor" href="#在目标服务器中安装宝塔云waf"><span>在目标服务器中安装宝塔云WAF</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>URL=https://download.bt.cn/cloudwaf/scripts/install_cloudwaf.sh &amp;&amp; if [ -f /usr/bin/curl ];then curl -sSO &quot;$URL&quot; ;else wget -O install_cloudwaf.sh &quot;$URL&quot;;fi;bash install_cloudwaf.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意：这里请忽略显示的登录信息，因为下面会将源服务器的云WAF数据恢复到目标服务器中。</p><p>安装成功</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/image-20250814145906941.png?tx" alt="image-20250814145906941"></p><h3 id="安装成功后-等待5秒-停止云waf" tabindex="-1"><a class="header-anchor" href="#安装成功后-等待5秒-停止云waf"><span>安装成功后，等待5秒，停止云WAF</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sleep 5 &amp;&amp; btw stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="等待5秒后-恢复旧云waf的数据" tabindex="-1"><a class="header-anchor" href="#等待5秒后-恢复旧云waf的数据"><span>等待5秒后，恢复旧云WAF的数据</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sleep 5 &amp;&amp; \\cp -arpf /root/cloud_waf/* /www/cloud_waf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意：查看是否有错误</p><h3 id="启动云waf" tabindex="-1"><a class="header-anchor" href="#启动云waf"><span>启动云WAF</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>btw start</span></span>
<span class="line"><span></span></span>
<span class="line"><span>显示：</span></span>
<span class="line"><span>btw start</span></span>
<span class="line"><span>Starting cloudwaf_nginx...  done</span></span>
<span class="line"><span>Starting cloudwaf_mysql...  done</span></span>
<span class="line"><span>Starting ipfilter...    done</span></span>
<span class="line"><span>Starting bt-cloudwaf... done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="验证是否成功" tabindex="-1"><a class="header-anchor" href="#验证是否成功"><span>验证是否成功</span></a></h2><p>请使用旧的云WAF帐号与密码进行登录，如果忘记了可以使用 btw 10 命令重置密码</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/image-20250814155442628.png?tx" alt="image-20250814155442628"></p><h2 id="检查云waf功能是否正常" tabindex="-1"><a class="header-anchor" href="#检查云waf功能是否正常"><span>检查云WAF功能是否正常？</span></a></h2><p>如何检查：可以检查旧的云WAF有数据的界面，比如</p><p>首页概览 拦截日志 操作日志 网站列表</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1755158533140.png?tx" alt="img"></p><p>显示有数据，则迁移正常。</p><h1 id="宝塔云的mysql密码" tabindex="-1"><a class="header-anchor" href="#宝塔云的mysql密码"><span>宝塔云的mysql密码</span></a></h1><p>一开始备份想要做文件和mysql数据库的分开备份，就要知道mysql的密码，查找了很久终于找到了</p><h3 id="查找mysql密码" tabindex="-1"><a class="header-anchor" href="#查找mysql密码"><span>查找mysql密码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /www/cloud_waf</span></span>
<span class="line"><span>vi ./cloudwaf_check.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>check_database=$(docker exec -i $MYSQL_NAME mysql -u root -p&quot;$MYSQL_PASS&quot; -e &quot; SHOW DATABASES LIKE &#39;btwaf&#39;;&quot; 2&gt;&amp;1 )</span></span>
<span class="line"><span>找到MYSQL_PASS的关键字</span></span>
<span class="line"><span>MYSQL_PASS=&quot;$PASS_config&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PASS_config又是什么，搜索一下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>PASS_config=$(cat $setup_path/nginx/conf.d/waf/config/config.json | sed -nE &#39;s/.*&quot;password&quot;:\\s*&quot;([^&quot;]*)&quot;.*/\\1/p&#39;)</span></span>
<span class="line"><span>把  $setup_path 改成服务器路径：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>PASS_config=$(cat /www/cloud_waf/nginx/conf.d/waf/config/config.json | sed -nE &#39;s/.*&quot;password&quot;:\\s*&quot;([^&quot;]*)&quot;.*/\\1/p&#39;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@node2 cloud_waf]# echo $PASS_config</span></span>
<span class="line"><span>e7ddd5e2XXXXXXXXXXX (就是mysql的密码)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="登录mysql" tabindex="-1"><a class="header-anchor" href="#登录mysql"><span>登录mysql</span></a></h3><p>试着登录一下mysql，进入容器登录mysql</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@node2 cloud_waf]# docker exec -it cloudwaf_mysql /bin/bash</span></span>
<span class="line"><span>bash-4.4# </span></span>
<span class="line"><span>bash-4.4# </span></span>
<span class="line"><span>bash-4.4# mysql -p</span></span>
<span class="line"><span>输入刚才的密码</span></span>
<span class="line"><span>Enter password: </span></span>
<span class="line"><span>Welcome to the MySQL monitor.  Commands end with ; or \\g.</span></span>
<span class="line"><span>Your MySQL connection id is 389132</span></span>
<span class="line"><span>Server version: 8.1.0 MySQL Community Server - GPL</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Oracle is a registered trademark of Oracle Corporation and/or its</span></span>
<span class="line"><span>affiliates. Other names may be trademarks of their respective</span></span>
<span class="line"><span>owners.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="新增一个远程mysql账号" tabindex="-1"><a class="header-anchor" href="#新增一个远程mysql账号"><span>新增一个远程mysql账号</span></a></h3><p>使用以下命令：</p><p>创建管理员账号(密码要尽量设置复杂，我是本地测试的所以设置 123456)：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>CREATE USER &#39;star&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;123456&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>授予管理员权限：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>GRANT ALL PRIVILEGES ON *.* TO &#39;star&#39;@&#39;%&#39; WITH GRANT OPTION;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>刷新权限：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>FLUSH PRIVILEGES;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo-tx2025/image-20250815095920171.png?tx" alt="image-20250815095920171"></p><p>验证一下是否可以远程登录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mysql -u&#39;star&#39; -h&#39;192.168.1.2&#39; -P&#39;33060&#39; -p&#39;123456&#39;</span></span>
<span class="line"><span>ERROR 2002 (HY000): Can&#39;t connect to MySQL server on &#39;192.168.1.2&#39; (115)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>居然远程报错,把防火墙放开</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --add-port=33060/tcp --permanent</span></span>
<span class="line"><span>firewall-cmd --reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@node2 cloud_waf]# iptables -L -n|grep 3306</span></span>
<span class="line"><span>ACCEPT     tcp  --  0.0.0.0/0            172.17.0.2           tcp dpt:3306</span></span>
<span class="line"><span>ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:33060 ctstate NEW,UNTRACKED</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>端口已放开，还是不能远程连接mysql。</p><p>端口也放开了、重启了mysql才可以远程连接mysql了</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl restart docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo-tx2025/image-20250815102132314.png?tx" alt="image-20250815102132314"></p><p>再就可以使用mysqldump等数据库备份工具备份数据库。</p><p>用Navicat查看数据表：</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1755224592760.png?tx" alt="img"></p><p>端口放开33060，生产环境要慎用，密码一定要复杂的！</p><h2 id="最后" tabindex="-1"><a class="header-anchor" href="#最后"><span>最后</span></a></h2><p>堡塔云 WAF 迁移并不复杂，但细节决定成败。提前备份、环境一致是稳妥迁移的三大关键。照着星哥这套流程执行，也能胸有成竹。</p>`,82)]))}const c=a(l,[["render",p]]),h=JSON.parse('{"path":"/kaiyuan2025/%E5%A6%82%E4%BD%95%E5%B0%86%E5%A0%A1%E5%A1%94%E4%BA%91WAF%E8%BF%81%E7%A7%BB%E5%88%B0%E6%96%B0%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8.html","title":"如何将堡塔云WAF备份、迁移到新的服务器","lang":"en-US","frontmatter":{},"git":{"createdTime":1755655357000,"updatedTime":1755655357000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":1,"url":"https://github.com/star"}]},"readingTime":{"minutes":4.66,"words":1398},"filePathRelative":"kaiyuan2025/如何将堡塔云WAF迁移到新的服务器.md"}');export{c as comp,h as data};
