import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,o as e}from"./app-BiQR_lPj.js";const p={};function l(t,s){return e(),n("div",null,s[0]||(s[0]=[i(`<h1 id="堡塔云waf免费web防火墙-从搭建到应用" tabindex="-1"><a class="header-anchor" href="#堡塔云waf免费web防火墙-从搭建到应用"><span>堡塔云WAF免费WEB防火墙，从搭建到应用</span></a></h1><p>hello大家好我是星哥，之前介绍过<a href="https://mp.weixin.qq.com/s/9TOXth3128N6PtXhaWI5aw" target="_blank" rel="noopener noreferrer">开源免费WEB防火墙</a> 雷池，https://mp.weixin.qq.com/s/9TOXth3128N6PtXhaWI5aw</p><p>今天再介绍一款宝塔出品的一个免费开源的WEB防火墙。</p><h1 id="堡塔云waf介绍" tabindex="-1"><a class="header-anchor" href="#堡塔云waf介绍"><span>堡塔云WAF介绍</span></a></h1><p>堡塔云WAF，宝塔免费(free)的私有云网站应用防火墙(firewall)，基于docker/nginx/lua开发</p><p>开源地址： https://github.com/aaPanel/aaWAF</p><p>官方文档：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>https://www.kancloud.cn/kern123/cloudwaf/3217243</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="系统" tabindex="-1"><a class="header-anchor" href="#系统"><span>系统</span></a></h2><p>宝塔系统兼容表，我这里使用Centos7的系统来做演示。</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508182017514.png?aliyun" alt="image-20250508182017514"></p><h2 id="安装命令" tabindex="-1"><a class="header-anchor" href="#安装命令"><span>安装命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>URL=https://download.bt.cn/cloudwaf/scripts/install_cloudwaf.sh &amp;&amp; if [ -f /usr/bin/curl ];then curl -sSO &quot;$URL&quot; ;else wget -O install_cloudwaf.sh &quot;$URL&quot;;fi;bash install_cloudwaf.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>提示</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>+--------------------------------------------------------------------------------------</span></span>
<span class="line"><span>| Bt-WAF FOR CentOS/Ubuntu/Debian</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>| Copyright © 2015-2099 BT-SOFT(https://www.bt.cn) All rights reserved.</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>| The Bt-WAF URL will be https://SERVER_IP:8379 when installed.</span></span>
<span class="line"><span>|--------------------------------------------------------------------------------------</span></span>
<span class="line"><span>| 为了您的正常使用,建议使用全新或纯净的系统安装,不支持已使用80 443 33060端口的系统安装</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>| 堡塔云WAF使用 Docker 服务并创建 cloudwaf_nginx cloudwaf_mysql 容器</span></span>
<span class="line"><span>|</span></span>
<span class="line"><span>| 容器不存储数据,存储于宿主机:/www/cloud_waf,为了您的数据安全请勿在容器内存储数据</span></span>
<span class="line"><span>+--------------------------------------------------------------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>取消安装请输入 n, 确认安装请输入 Y 或 y, 最后按回车键执行.</span></span>
<span class="line"><span>Do you want to install Bt-WAF to the /www/cloud_waf directory now? (Y/y/n): Y</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装成功</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>==================================================================</span></span>
<span class="line"><span>堡塔云WAF安装完成! Installed successfully!</span></span>
<span class="line"><span>==================================================================</span></span>
<span class="line"><span>外网访问地址: https://XXXXXXXXXXXX:8379/5af73a11</span></span>
<span class="line"><span>内网访问地址: https://192.168.1.2:8379/5af73a11</span></span>
<span class="line"><span>username: 37929f87</span></span>
<span class="line"><span>password: e263df05</span></span>
<span class="line"><span>If you cannot access the Bt-WAF </span></span>
<span class="line"><span>release the following Bt-WAF port [8379,80,443] in the security group</span></span>
<span class="line"><span>若无法访问堡塔云WAF，请检查防火墙/安全组是否有放行[8379,80,443]端口</span></span>
<span class="line"><span></span></span>
<span class="line"><span>=========================打开堡塔云WAF前请看=======================</span></span>
<span class="line"><span></span></span>
<span class="line"><span> 因默认启用自签证书https加密访问，浏览器将提示不安全</span></span>
<span class="line"><span> 点击【高级】-【继续访问】或【接受风险并继续】访问</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用浏览器访问IP+端口</p><p>如果你是宝塔的用户，对这个界面一定不陌生，就跟宝塔一模一样。</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508165853472.png?aliyun" alt="image-20250508165853472"></p><h1 id="添加防护网站" tabindex="-1"><a class="header-anchor" href="#添加防护网站"><span>添加防护网站</span></a></h1><p>使用测试域名 test-waf.xgss.net 解析到 192.168.1.2 ，并且在内网 192.168.1.10 里面配置了一个站点。</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508170213914.png?aliyun" alt="image-20250508170213914"></p><h2 id="首页" tabindex="-1"><a class="header-anchor" href="#首页"><span>首页</span></a></h2><p><img src="https://imgoss.xgss.net/picgo2025/image-20250508174844878.png?aliyun" alt="image-20250508174844878"></p><p>可以打开网站</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508170357731.png?aliyun" alt="image-20250508170357731"></p><h3 id="测试攻击链接" tabindex="-1"><a class="header-anchor" href="#测试攻击链接"><span>测试攻击链接</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>http://test-waf.xgss.net/?id=ls%20/etc/passwd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>防护界面：</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508171548898.png?aliyun" alt="image-20250508171548898"></p><h2 id="_1-设置cc防御" tabindex="-1"><a class="header-anchor" href="#_1-设置cc防御"><span>1.设置CC防御</span></a></h2><p>这里设置，某IP在60秒内请求同一访问路径(标准（推荐）)超过30次临时拉黑此IP300秒</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508175117650.png?aliyun" alt="image-20250508175117650"></p><h2 id="_2-网站漏洞防护" tabindex="-1"><a class="header-anchor" href="#_2-网站漏洞防护"><span>2.网站漏洞防护</span></a></h2><p>这里有几个功能： SQL注入防御、XSS注入防御、SSRF防御、Cookie防御、命令执行拦截，默认的使用严格模式，当然你也可以修改标准模式和观察模式。</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508175704064.png?aliyun" alt="image-20250508175704064"></p><h2 id="_3-文件路径保护" tabindex="-1"><a class="header-anchor" href="#_3-文件路径保护"><span>3.文件路径保护</span></a></h2><p>文件路径保护有：网站后台保护、拦截恶意文件上传、畸形文件上传防御、恶意下载防御、文件包含防御、PHP代码执行防御，也使用标准防护模式</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508175913984.png?aliyun" alt="image-20250508175913984"></p><h2 id="_4-机器访问保护" tabindex="-1"><a class="header-anchor" href="#_4-机器访问保护"><span>4.机器访问保护</span></a></h2><p>扫描器防御，检测恶意扫描器，防止各类扫描器、木马连接工具、访问网站</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508175951736.png?aliyun" alt="image-20250508175951736"></p><h2 id="_5-ip黑名单" tabindex="-1"><a class="header-anchor" href="#_5-ip黑名单"><span>5.IP黑名单</span></a></h2><p>添加一个黑名单试一下</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508180126616.png?aliyun" alt="image-20250508180126616"></p><h2 id="_6-添加人机验证" tabindex="-1"><a class="header-anchor" href="#_6-添加人机验证"><span>6.添加人机验证</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20250508174451113.png?aliyun" alt="image-20250508174451113"></p><p>验证：</p><p><img src="https://imgoss.xgss.net/picgo/image-20250508174517528.png?aliyun" alt="image-20250508174517528"></p><h2 id="攻击大屏" tabindex="-1"><a class="header-anchor" href="#攻击大屏"><span>攻击大屏</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20250508174729479.png?aliyun" alt="image-20250508174729479"></p><h1 id="结尾" tabindex="-1"><a class="header-anchor" href="#结尾"><span>结尾</span></a></h1><p>堡塔云WAF作为一款免费的Web应用防火墙，为中小网站提供了简单易用的安全防护方案。通过本文的搭建和应用指南，即使是运维新手也能快速部署基础Web安全防护。随着使用深入，建议根据实际业务需求逐步调整防护策略，在安全性和可用性之间找到最佳平衡点。</p><p>写文不易，如果你都看到了这里，请点个赞和在看，分享给更多的朋友；也别忘了关注星哥玩云！这里有满满的干货分享，还有轻松有趣的技术交流～点个赞、分享给身边的小伙伴，一起成长，一起玩转技术世界吧！ 😊</p>`,55)]))}const d=a(p,[["render",l]]),h=JSON.parse('{"path":"/article/tn0wcfpx/","title":"堡塔云WAF免费WEB防火墙，从搭建到应用","lang":"en-US","frontmatter":{"title":"堡塔云WAF免费WEB防火墙，从搭建到应用","createTime":"2025/05/27 17:51:17","permalink":"/article/tn0wcfpx/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":3.56,"words":1068},"filePathRelative":"kaiyuan2025/堡塔云WAF免费WEB防火墙，从搭建到应用.md"}');export{d as comp,h as data};
