import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as i,o as e}from"./app-BiQR_lPj.js";const p={};function l(t,s){return e(),a("div",null,s[0]||(s[0]=[i(`<h1 id="_2-安卓项目apk自动打包流程-安装jenkins" tabindex="-1"><a class="header-anchor" href="#_2-安卓项目apk自动打包流程-安装jenkins"><span>2.安卓项目APK自动打包流程-安装jenkins</span></a></h1><h2 id="jenkins-简介" tabindex="-1"><a class="header-anchor" href="#jenkins-简介"><span>Jenkins 简介</span></a></h2><p>Jenkins是一个开源的、可扩展的持续集成、交付、部署（软件/代码的编译、打包、部署）的基于web界面的平台。允许持续集成和持续交付项目，无论用的是什么平台，可以处理任何类型的构建或持续集成。</p><p>软件开发的流程</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-rust"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">编码 --&gt; 构建 --&gt; 集成 --&gt; 测试 --&gt; 交付 --&gt; 部署</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>系统介绍</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>系统： centos7</span></span>
<span class="line"><span>IP地址： 192.168.1.8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装java" tabindex="-1"><a class="header-anchor" href="#安装java"><span>安装java</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># cd /data/software/</span></span>
<span class="line"><span># wget http://js.funet8.com/centos_software/jdk-8u211-linux-x64.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span># mkdir /usr/local/java/</span></span>
<span class="line"><span># tar -zxvf jdk-8u211-linux-x64.tar.gz -C /usr/local/java/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>配置环境变量</span></span>
<span class="line"><span># vim /etc/profile</span></span>
<span class="line"><span>添加：</span></span>
<span class="line"><span>export JAVA_HOME=/usr/local/java/jdk1.8.0_211</span></span>
<span class="line"><span>export JRE_HOME=\${JAVA_HOME}/jre</span></span>
<span class="line"><span>export CLASSPATH=.:\${JAVA_HOME}/lib:\${JRE_HOME}/lib</span></span>
<span class="line"><span>export PATH=\${JAVA_HOME}/bin:$PATH</span></span>
<span class="line"><span></span></span>
<span class="line"><span># source /etc/profile</span></span>
<span class="line"><span></span></span>
<span class="line"><span>检查java是否安装成功</span></span>
<span class="line"><span>ln -s /usr/local/java/jdk1.8.0_171/bin/java /usr/bin/java</span></span>
<span class="line"><span>java -version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装-jenkins" tabindex="-1"><a class="header-anchor" href="#安装-jenkins"><span>安装 Jenkins</span></a></h2><h3 id="下载安装" tabindex="-1"><a class="header-anchor" href="#下载安装"><span>下载安装</span></a></h3><p>在这个地址下载 https://jenkins.io/zh/download/ , 如果下载的是 war 包, 直接运行以下命令</p><p>下载 Jenkins 的jenkins.war包</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>java -jar /data/software/jenkins.war</span></span>
<span class="line"><span>指定端口：</span></span>
<span class="line"><span>nohup java -jar /data/software/jenkins.war --ajp13Port=-1 --httpPort=9090 &gt;/dev/null 2&gt;&amp;1 &amp;</span></span>
<span class="line"><span>开启防火墙</span></span>
<span class="line"><span>iptables -I INPUT -p tcp --dport 9090 -j ACCEPT</span></span>
<span class="line"><span>service iptables save</span></span>
<span class="line"><span>systemctl restart iptables.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在启动Web容器之前设置JENKINS_HOME环境变量</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>用root用户登录，编辑profile文件</span></span>
<span class="line"><span>vi /etc/profile</span></span>
<span class="line"><span>在最后加入</span></span>
<span class="line"><span>export JENKINS_HOME=/data/jenkins_data</span></span>
<span class="line"><span>保存，退出后执行</span></span>
<span class="line"><span>source /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后打开浏览器, 进入 localhost:9090 即可开始安装, Jenkins 的安装步骤也没啥难点.</p><p>http://192.168.1.8:9090/</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818102226185.png?aliyunoss" alt="image-20210818102226185"></p><p>下面就是 Jeknins 的界面了,</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818110842688.png?aliyunoss" alt="image-20210818110842688"></p><h1 id="安装插件" tabindex="-1"><a class="header-anchor" href="#安装插件"><span>安装插件</span></a></h1><p>进入菜单 <strong>Manage Jenkins =&gt; Manage Plugins</strong>, 这个地方就是管理插件的地方, 由于自带的源无法访问, 这里使用下面这个地址, 如果你在浏览器可以打开这个链接, 说明没问题, 否则请自行百度其他源地址</p><div class="language-ruby line-numbers-mode" data-highlighter="shiki" data-ext="ruby" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ruby"><span class="line"><span style="--shiki-light:#986801;--shiki-dark:#56B6C2;">http</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mirror.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">esuni</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">jp</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">jenkins</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">updates</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">center.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="http://imgoss.xgss.net/picgo/image-20210818111853482.png?aliyunoss" alt="image-20210818111853482"></p><p>好了, 插件已经可以正常下载了, 以下是需要安装的插件</p><ul><li>Git plugin</li><li>Localization: Chinese (Simplified)</li></ul><h1 id="设定jenkins中文方法" tabindex="-1"><a class="header-anchor" href="#设定jenkins中文方法"><span>设定Jenkins中文方法</span></a></h1><p>1.进入Manage Jenkins中，点击Manage Plugins（插件设定）</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818111112037.png?aliyunoss" alt="image-20210818111112037"></p><ol start="2"><li><p>安装插件“Locale plugin”，虽然这个插件问题比较多，但是这个是Jenkins中唯一可以汉化的插件。</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818111259503.png?aliyunoss" alt="image-20210818111259503"></p></li><li><p>安装中文汉化语言包插件（Localization: Chinese (Simplified)）。</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818111519806.png?aliyunoss" alt="image-20210818111519806"></p></li></ol><h1 id="配置-钉钉-构建通知" tabindex="-1"><a class="header-anchor" href="#配置-钉钉-构建通知"><span>配置 钉钉 构建通知</span></a></h1><p>在钉钉群中, 进入 <strong>群设置 &gt;&gt; 群机器人 &gt;&gt; 添加机器人 &gt;&gt; 添加自定义机器人 &gt;&gt; 配置</strong> , 添加好后, 在机器人管理中选择添加的机器人, 保存在 webhook 中链接中的 access_token= 后的参数</p><p>进入 Jeknins, 在 <strong>插件管理</strong> 中搜索到 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fplugins.jenkins.io%2Fdingding-json-pusher" target="_blank" rel="noopener noreferrer">Dingding JSON Pusher</a> 并安装, 安装完后打开项目配置, 在 <strong>构建后操作</strong> 一栏中, 增加构建后的步骤,</p><p>进入项目管理, 选择 <strong>钉钉通知器配置</strong> , 参考下图配置, 钉钉access token就填入我们申请的</p><p><img src="http://imgoss.xgss.net/picgo/825009-03a4f227d1d14322.png?aliyunoss" alt="img"></p><p>好了, 每次构建时都将在 钉钉中收到通知了</p><p><img src="http://imgoss.xgss.net/picgo/825009-9fee83511195e437.png?aliyunoss" alt="img"></p><h2 id="新版钉钉通知" tabindex="-1"><a class="header-anchor" href="#新版钉钉通知"><span>新版钉钉通知</span></a></h2><p>我的Jenkins版本是V2.204.1，需要安装的插件：</p><p>DingTalk Plugin</p><p>在 系统管理 &gt; 系统设置 &gt; 钉钉配置 中添加机器人</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818132241196.png?aliyunoss" alt="image-20210818132241196"></p><p>在项目中配置：</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818132339518.png?aliyunoss" alt="image-20210818132339518"></p><p>在钉钉群中有相关通知</p><p><img src="http://imgoss.xgss.net/picgo/image-20210818132438299.png?aliyunoss" alt="image-20210818132438299"></p><h2 id="jenkins整合dingding-json-pusher-发送自定义消息到钉钉群" tabindex="-1"><a class="header-anchor" href="#jenkins整合dingding-json-pusher-发送自定义消息到钉钉群"><span>Jenkins整合dingding json pusher，发送自定义消息到钉钉群</span></a></h2><p>1、下载钉钉，建群，添加机器人，获得access_token； 2、下载插件 主页面-系统管理-管理插件-可选插件 搜Dingding JSON Pusher Plugin 3、其他项目配置完成后，添加构建后操作，选择Dingding JSON Pusher 4、钉钉access token填入access_token，不是整个路径只是路径后的access_token的值,比如 https://oapi.dingtalk.com/robot/send?access_token=xxxxxxxx,要填入的是xxxxxxxx； 5、Json文件路径，全路径，比如 /data/jenkins_data/workspace/android-test1/dingding.json 6、Json文件内容格式如下： { “msgtype”: “text”, “text”: {“content”: “在这填写自定义内容”}}</p><p>参考</p><p>https://blog.csdn.net/Ever69/article/details/84453896</p><p>使用Jenkins构建Android项目：https://www.jianshu.com/p/c9703b83ff4b</p>`,52)]))}const h=n(p,[["render",l]]),c=JSON.parse('{"path":"/article/hyj625gx/","title":"CentOS-7-Install-Jenkins","lang":"en-US","frontmatter":{"title":"CentOS-7-Install-Jenkins","createTime":"2025/05/27 17:51:17","permalink":"/article/hyj625gx/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":3.36,"words":1008},"filePathRelative":"devops/CentOS-7-Install-Jenkins.md"}');export{h as comp,c as data};
