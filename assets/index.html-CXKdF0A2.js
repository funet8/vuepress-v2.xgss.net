import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as e,o as i}from"./app-BiQR_lPj.js";const l={};function p(d,s){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="centos7初始化脚本" tabindex="-1"><a class="header-anchor" href="#centos7初始化脚本"><span>Centos7初始化脚本</span></a></h1><h2 id="初始化脚本" tabindex="-1"><a class="header-anchor" href="#初始化脚本"><span>初始化脚本</span></a></h2><p>进入centos7系统，使用脚本</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># wget https://gitee.com/funet8/centos6_LANP_dockerfile/raw/master/shell/CentOS7.x_system_init_shell_mini.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>修改hostname和端口</span></span>
<span class="line"><span>HOSTNAME=&quot;node2&quot;</span></span>
<span class="line"><span>SSH_PROT=&quot;60920&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>执行脚本：</span></span>
<span class="line"><span># sh CentOS7.x_system_init_shell_mini.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>功能介绍：</span></span>
<span class="line"><span># 1、先ping百度域名，看能否解析域名、修改主机名和ssh端口</span></span>
<span class="line"><span># 主要功能:</span></span>
<span class="line"><span>#	1.修改主机名</span></span>
<span class="line"><span>#   2.安装wget、tar、lrzsz等常用工具</span></span>
<span class="line"><span>#   3.将默认源换为阿里云</span></span>
<span class="line"><span>#   4.安装常用类库</span></span>
<span class="line"><span>#   5.rc.local添加执行权限</span></span>
<span class="line"><span>#   6.安装 net-tools</span></span>
<span class="line"><span>#   7.增加第三方资源库</span></span>
<span class="line"><span>#   8.关闭SELINUX</span></span>
<span class="line"><span>#   9.设置UTF-8</span></span>
<span class="line"><span>#   10.系统时间设置和定时任务</span></span>
<span class="line"><span>#   11.修改主机SSH端口</span></span>
<span class="line"><span>#   12.删除MySQL、shell历史记录</span></span>
<span class="line"><span>#   13.隐藏服务器系统信息</span></span>
<span class="line"><span>#   14.优化Linux内核参数</span></span>
<span class="line"><span>#   15. CentOS系统优化【/etc/profile】</span></span>
<span class="line"><span>#   16.关闭系统自带firewalld防火墙，安装iptables</span></span>
<span class="line"><span>#   17.安装yum-fastestmirror</span></span>
<span class="line"><span>#   18.重建缓存、系统升级</span></span>
<span class="line"><span>#   19.重启系统</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/centos7-chushihua.jpg?aliyun" alt="centos7-chushihua"></p><h2 id="最简单的系统初始化命令" tabindex="-1"><a class="header-anchor" href="#最简单的系统初始化命令"><span>最简单的系统初始化命令</span></a></h2><p>如果不运行上面的脚本。</p><h3 id="_1-安装上传下载软件" tabindex="-1"><a class="header-anchor" href="#_1-安装上传下载软件"><span>1.安装上传下载软件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>yum install -y lrzsz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-修改主机名" tabindex="-1"><a class="header-anchor" href="#_2-修改主机名"><span>2.修改主机名</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>hostnamectl set-hostname web-name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-允许ssh端口60920-iptables" tabindex="-1"><a class="header-anchor" href="#_3-允许ssh端口60920-iptables"><span>3.允许ssh端口60920-iptables</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>iptables -A INPUT -p tcp --dport 60920 -j ACCEPT</span></span>
<span class="line"><span>service iptables save</span></span>
<span class="line"><span>systemctl restart iptables.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-允许ssh端口60920-firewall" tabindex="-1"><a class="header-anchor" href="#_4-允许ssh端口60920-firewall"><span>4.允许ssh端口60920-firewall</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --add-port=60920/tcp --permanent</span></span>
<span class="line"><span>firewall-cmd --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-修改ssh端口" tabindex="-1"><a class="header-anchor" href="#_5-修改ssh端口"><span>5.修改SSH端口</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sed -i &quot;s/#Port 22/ListenAddress 0.0.0.0:60920/&quot; /etc/ssh/sshd_config</span></span>
<span class="line"><span>systemctl restart sshd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-允许ip转发功能" tabindex="-1"><a class="header-anchor" href="#_6-允许ip转发功能"><span>6.允许ip转发功能</span></a></h3><p>视具体服务器功能而定。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>echo &#39;net.ipv4.ip_forward=1&#39; &gt;&gt; /etc/sysctl.conf</span></span>
<span class="line"><span>sysctl -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="挂载硬盘" tabindex="-1"><a class="header-anchor" href="#挂载硬盘"><span>挂载硬盘</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># fdisk -l</span></span>
<span class="line"><span># fdisk /dev/vdb</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>Command (m for help): n</span></span>
<span class="line"><span>Select (default p): p</span></span>
<span class="line"><span>Command (m for help): wq</span></span>
<span class="line"><span>格式化：</span></span>
<span class="line"><span># mkfs.ext4 /dev/vdb1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &#39;/dev/vdb1 /home ext4 defaults 0 0&#39; &gt;&gt; /etc/fstab</span></span>
<span class="line"><span># mount -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="新建常用目录" tabindex="-1"><a class="header-anchor" href="#新建常用目录"><span>新建常用目录</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>wget https://gitee.com/funet8/centos6_LANP_dockerfile/raw/master/shell/create_dir.sh</span></span>
<span class="line"><span>sh create_dir.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>新建目录作用介绍</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># /data/wwwroot/web  作用：存放WEB应用程序</span></span>
<span class="line"><span># /data/wwwroot/log  作用：存放WEB日志</span></span>
<span class="line"><span># /data/wwwroot/mysql_log 作用：存放MYSQL日志</span></span>
<span class="line"><span># /home/data/wwwroot/log/other/ 作用：存放VSFTP日志</span></span>
<span class="line"><span># /data/conf 作用：存放应用程序配置文件</span></span>
<span class="line"><span># /data/conf/sites-available 作用：存放nginx站点配置文件</span></span>
<span class="line"><span># /data/conf/shell 作用：存放shell脚本</span></span>
<span class="line"><span># /home/data/backup 作用：存放备份文件</span></span>
<span class="line"><span># /home/data/software 作用：存放安装软件目录</span></span>
<span class="line"><span># /home/data/wwwroot/nginx_old_log/ 作用：存放Nginx切割日志</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,26)]))}const t=a(l,[["render",p]]),h=JSON.parse('{"path":"/article/dsycujpa/","title":"Centos7初始化脚本","lang":"en-US","frontmatter":{"title":"Centos7初始化脚本","createTime":"2025/05/27 17:51:17","permalink":"/article/dsycujpa/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":1.75,"words":524},"filePathRelative":"shell/Centos7初始化脚本.md"}');export{t as comp,h as data};
