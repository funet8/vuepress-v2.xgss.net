import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as n,o as i}from"./app-BiQR_lPj.js";const p={};function t(g,a){return i(),e("div",null,a[0]||(a[0]=[n(`<h1 id="网站受到攻击了-别担心-如何使用edgeone来保护我们的网站" tabindex="-1"><a class="header-anchor" href="#网站受到攻击了-别担心-如何使用edgeone来保护我们的网站"><span>网站受到攻击了？别担心！如何使用EdgeOne来保护我们的网站</span></a></h1><h1 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h1><p>上篇文章介绍了《腾讯云的下一代CDN-EdgeOne》，最近遇到自己的博客网站经常遇到一些攻击，手动操作维护就比较麻烦了，刚好腾讯云EdgeOne双十一有活动，就想到如何把使用EdgeOne来保护我们的网站。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120175326818.png?aliyun" alt="image-20241120175326818"></p><h1 id="博客被攻击的日常" tabindex="-1"><a class="header-anchor" href="#博客被攻击的日常"><span>博客被攻击的日常</span></a></h1><h2 id="_1-收到告警" tabindex="-1"><a class="header-anchor" href="#_1-收到告警"><span>1.收到告警</span></a></h2><p>收到告警邮件和短信。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120164456792.png?aliyun" alt="image-20241120164456792"></p><h2 id="_2-使用ssh登录服务器" tabindex="-1"><a class="header-anchor" href="#_2-使用ssh登录服务器"><span>2.使用ssh登录服务器</span></a></h2><p>top查看系统资源</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120164548483.png?aliyun" alt="image-20241120164548483"></p><p>再查看日志</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /www/wwwlogs # 进入到宝塔nginx日志目录</span></span>
<span class="line"><span>ll -Srh # 按照日志大小排列</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 最多的访问IP,前10名</span></span>
<span class="line"><span>cat /www/wwwlogs/www.xgss.net.log  |awk &#39;{print $1}&#39; | sort | uniq -c | sort -nr | head -n 10</span></span>
<span class="line"><span></span></span>
<span class="line"><span>tail -n5000 /www/wwwlogs/www.xgss.net.log  |awk &#39;{print $1}&#39; | sort | uniq -c | sort -nr | head -n 10 查看最后5000日志。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-防护" tabindex="-1"><a class="header-anchor" href="#_3-防护"><span>3.防护</span></a></h2><p>ban掉最多的IP</p><p>再分析日志，有很多UA蜘蛛为Timpibot的日志</p><p>在nignx里添加配置：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#nginx 禁止ua是Timpibot的访问网站</span></span>
<span class="line"><span>if ($http_user_agent ~* &quot;Timpibot&quot;) {</span></span>
<span class="line"><span>	return 403;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="购买套餐包" tabindex="-1"><a class="header-anchor" href="#购买套餐包"><span>购买套餐包</span></a></h1><p>虽然双十一过了，但是腾讯云的双十一活动，一直到月底才结束，所以要抓紧咯。</p><p>选择 36元/年，个人版 50G+300万次/月的套餐，平均下来一个月才3元。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241119181335625.png?aliyun" alt="image-20241119181335625"></p><h1 id="使用edgeone" tabindex="-1"><a class="header-anchor" href="#使用edgeone"><span>使用EdgeOne</span></a></h1><p>进入EdgeOne控制台</p><h2 id="_1-点击-添加站点" tabindex="-1"><a class="header-anchor" href="#_1-点击-添加站点"><span>1.点击“添加站点”</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20241120170133279.png?aliyun" alt="image-20241120170133279"></p><h2 id="_2-请输入您的站点" tabindex="-1"><a class="header-anchor" href="#_2-请输入您的站点"><span>2.请输入您的站点</span></a></h2><p>这里填写不带www的域名。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120170250616.png?aliyun" alt="image-20241120170250616"></p><h2 id="_3-选择套餐" tabindex="-1"><a class="header-anchor" href="#_3-选择套餐"><span>3.选择套餐</span></a></h2><p>试用版的套餐和购买的个人版的区别。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120170418346.png?aliyun" alt="image-20241120170418346"></p><h2 id="_4-选择加速区域和接入模式" tabindex="-1"><a class="header-anchor" href="#_4-选择加速区域和接入模式"><span>4.选择加速区域和接入模式</span></a></h2><p>加速区域，根据自己的业务和域名的备案情况来选择。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120170538050.png?aliyun" alt="image-20241120170538050"></p><h2 id="_5-归属权验证" tabindex="-1"><a class="header-anchor" href="#_5-归属权验证"><span>5.归属权验证</span></a></h2><p>DNS 解析验证和文件验证都可以，我这里在域名的dns添加一条记录，点击验证。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120171052250.png?aliyun" alt="image-20241120171052250"></p><h2 id="_6-完成" tabindex="-1"><a class="header-anchor" href="#_6-完成"><span>6.完成</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20241120171502095.png?aliyun" alt="image-20241120171502095"></p><h2 id="_7-域名配置" tabindex="-1"><a class="header-anchor" href="#_7-域名配置"><span>7.域名配置</span></a></h2><p>如图填写 需要加速域名， 源站的IP等。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120171614495.png?aliyun" alt="image-20241120171614495"></p><h2 id="_8-推荐配置" tabindex="-1"><a class="header-anchor" href="#_8-推荐配置"><span>8.推荐配置</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20241120171641846.png?aliyun" alt="image-20241120171641846"></p><h2 id="_9-配置cname" tabindex="-1"><a class="header-anchor" href="#_9-配置cname"><span>9.配置CNAME</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>把需要解析的域名 www.xgss.net CNAME解析到 www.xgss.net.eo.dnse1.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20241120171754918.png?aliyun" alt="image-20241120171754918"></p><p>添加一条记录，把旧的记录暂停掉，如果是新站可以忽略。</p><p><img src="https://imgoss.xgss.net/picgo2025/image-20241120172125631.png?aliyun" alt="image-20241120172125631"></p><h2 id="_10-配置https" tabindex="-1"><a class="header-anchor" href="#_10-配置https"><span>10.配置https</span></a></h2><p>再配置https。</p><p>如何获取ssl证书可以查看星哥之前的文章。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241120172432936.png?aliyun" alt="image-20241120172432936"></p><h2 id="_11-查看数据" tabindex="-1"><a class="header-anchor" href="#_11-查看数据"><span>11.查看数据</span></a></h2><p>查看数据，安全防护可以自由配置一些规则。</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1756895426113.png?tx" alt="img"></p><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><p>配置EdgeOne加速与防护一体化、全面、简单方便。</p><p>通常，网站要实现CDN加速和DDoS防护等功能，往往需要购买多个独立的产品，而EdgeOne却能够同时提供这两种功能，且效果优异。它的安全防护策略非常全面，从DDoS防护到Web应用防火墙（WAF），无论是防御流量攻击还是漏洞攻击，都能得到有效保障。</p><p>EdgeOne在提供高效保护的同时，价格也非常具竞争力，性价比极高，成为网站安全防护的理想选择。</p>`,61)]))}const l=s(p,[["render",t]]),d=JSON.parse('{"path":"/article/u3596ey3/","title":"网站受到攻击了？别担心！如何使用EdgeOne来保护我们的网站","lang":"en-US","frontmatter":{"title":"网站受到攻击了？别担心！如何使用EdgeOne来保护我们的网站","createTime":"2025/05/27 17:51:17","permalink":"/article/u3596ey3/"},"git":{"createdTime":1749111496000,"updatedTime":1756914694000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":3,"url":"https://github.com/star"}]},"readingTime":{"minutes":2.82,"words":845},"filePathRelative":"cloud/tengxunyun/网站受到攻击了？别担心！如何使用EdgeOne来保护我们的网站.md"}');export{l as comp,d as data};
