import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as e,o as i}from"./app-BiQR_lPj.js";const l={};function p(t,a){return i(),n("div",null,a[0]||(a[0]=[e(`<h1 id="传趣控股使用apollo场景与规范" tabindex="-1"><a class="header-anchor" href="#传趣控股使用apollo场景与规范"><span>传趣控股使用Apollo场景与规范</span></a></h1><h1 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景"><span>使用场景</span></a></h1><ol><li>后端PHP开发配置：在开发开发环境、测试环境、生产环境的配置，不同环境读取不同配置（数据库、redis、域名等）。</li><li>后端PHP开发配置：由于业务需求，需要修改某个游戏上线、下线；切换游戏充值渠道等，则不需要修改代码，读取Apollo后台配置即可（开发后台功能）。</li><li>移动开发安卓、IOS客户端开发中：本地开发读取apim.chuanqu.ltd，生成环境上线读取apim.chuanqu.com</li><li>移动开发安卓、IOS客户端开发中：应用读取不同的域名，比如apollo后台配置接口域名（apim.chuanqu.com），由于某些主动或者被动的原因需要更改接口域名，实现动态配置域名的功能。</li><li>前端开发： 可以修改前端配置，是否显示开关、是否跳转等等。</li><li>运维方面： 在公司机房、阿里云服务器、腾讯云服务器（开发、测试、生成环境）环境拉取不同的配置，无需修改多个配置文件。</li><li>测试方面：可以利用灰度发布，指定集群中的某一台作为灰度发布机，</li></ol><h1 id="使用规范" tabindex="-1"><a class="header-anchor" href="#使用规范"><span>使用规范</span></a></h1><p>1.如果通过HTTP接口接入、必须使用https、并且启用密钥（后台---&gt;应用---&gt;管理密钥）</p><p><strong>2.生产环境应用必须启用密钥</strong></p><p>3.轮询时间不易过短，客户端主动请求接口，5分钟-30分钟，如果客户端过多会对服务器造成压力，而配置几乎改动很少，移动APP端启动时判断更新。</p><p>4.由于Apollo接口需要网络支持，要考虑客户端如果断网，配置默认值。</p><p>5.应用的命名规则要明确功能。</p><p>6.清晰的文档，充分测试。项目要有清晰的文档记录，充分测试并且通过审核，才能上线、上架、并且做好项目记录的文档，确保上线功能正常可以灵活切换。</p><p>7.新增、修改配置需要点“发布”才能生效。</p><p>8.必须要有工作流，暂定工作流：（开发提交---&gt;主管审核---&gt;技术总监发布，运维提交---&gt;技术总监发布）</p><h1 id="应用命名规则" tabindex="-1"><a class="header-anchor" href="#应用命名规则"><span>应用命名规则</span></a></h1><h2 id="应用名称规则" tabindex="-1"><a class="header-anchor" href="#应用名称规则"><span>应用名称规则</span></a></h2><p>进入后台---&gt;创建应用</p><p>项目主体+部门+功能</p><p>示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>chuanqu-frontend</span></span>
<span class="line"><span>chuanqu-web-php</span></span>
<span class="line"><span>chuanqu-web-php-apim.chuanqu.com</span></span>
<span class="line"><span>chuanqu-ios</span></span>
<span class="line"><span>chuanqu-android</span></span>
<span class="line"><span>chuanqu-yunwei-demo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20220401162720671.png?aliyun" alt="image-20220401162720671"></p><h2 id="集群命名规则" tabindex="-1"><a class="header-anchor" href="#集群命名规则"><span>集群命名规则</span></a></h2><p>进入应用---&gt;添加集群</p><p>功能-环境</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>default        （系统默认环境-可删除）</span></span>
<span class="line"><span>dev-localhost  （本地开发环境）</span></span>
<span class="line"><span>dev-test       （本地测试环境）</span></span>
<span class="line"><span>aliyun-online   （阿里云-生产环境）</span></span>
<span class="line"><span>tengxun-online  （腾讯云-生产环境）</span></span>
<span class="line"><span>shijihulian-online （世纪互联机房-生产环境）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20220401165922489.png?aliyun" alt="image-20220401165922489"></p><h2 id="namespace命名空间规则" tabindex="-1"><a class="header-anchor" href="#namespace命名空间规则"><span>Namespace命名空间规则</span></a></h2><p>进入应用---&gt;添加集群</p><h3 id="创建私有命名空间" tabindex="-1"><a class="header-anchor" href="#创建私有命名空间"><span>创建私有命名空间</span></a></h3><p><img src="https://imgoss.xgss.net/picgo/image-20220401172312611.png?aliyun" alt="image-20220401172312611"></p><h3 id="创建公共命名空间" tabindex="-1"><a class="header-anchor" href="#创建公共命名空间"><span>创建公共命名空间</span></a></h3><p><img src="https://imgoss.xgss.net/picgo/image-20220401172606422.png?aliyun" alt="image-20220401172606422"></p><p>总结：我在A应用中创建了一个公共的命名空间web-public，在B应用中可以应用这个一个关联命名空间。</p><p>在A应用中修改web-public，则B中的web-public配置则对应的会改变。</p><p><strong>一般创建私有空间</strong></p><h3 id="创建关联命名空间" tabindex="-1"><a class="header-anchor" href="#创建关联命名空间"><span>创建关联命名空间</span></a></h3><p><img src="https://imgoss.xgss.net/picgo/image-20220401172959045.png?aliyun" alt="image-20220401172959045"></p><h3 id="配置名" tabindex="-1"><a class="header-anchor" href="#配置名"><span>配置名</span></a></h3><p>配置名则跟应用程序（代码）中的配置命名一致即可</p><p><img src="https://imgoss.xgss.net/picgo/image-20220401174704967.png?aliyun" alt="image-20220401174704967"></p><h1 id="传趣apollo地址" tabindex="-1"><a class="header-anchor" href="#传趣apollo地址"><span>传趣Apollo地址</span></a></h1><p>测试环境：</p><p><strong>仅作本地项目测试用，不要用于生产环境</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>接口地址：</span></span>
<span class="line"><span>http://apollo.chuanqu.ltd/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>后台地址：</span></span>
<span class="line"><span>http://apollo-houtai.chuanqu.ltd/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>测试用户：</span></span>
<span class="line"><span>test</span></span>
<span class="line"><span>123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>正式环境：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>接口地址：</span></span>
<span class="line"><span>https://apollo.chuanqu.com/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>后台地址：</span></span>
<span class="line"><span>http://apollo-houtai.chuanqu.com/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="apollo客户端接入使用" tabindex="-1"><a class="header-anchor" href="#apollo客户端接入使用"><span>Apollo客户端接入使用</span></a></h1><h2 id="java客户端使用" tabindex="-1"><a class="header-anchor" href="#java客户端使用"><span><a href="https://www.apolloconfig.com/#/zh/usage/java-sdk-user-guide" target="_blank" rel="noopener noreferrer">JAVA客户端使用</a></span></a></h2><h2 id="go、python、nodejs、php客户端使用" tabindex="-1"><a class="header-anchor" href="#go、python、nodejs、php客户端使用"><span><a href="https://www.apolloconfig.com/#/zh/usage/third-party-sdks-user-guide" target="_blank" rel="noopener noreferrer">Go、python、nodejs、PHP客户端使用</a></span></a></h2><h2 id="其他客户端-http接口使用" tabindex="-1"><a class="header-anchor" href="#其他客户端-http接口使用"><span><a href="https://www.apolloconfig.com/#/zh/usage/other-language-client-user-guide" target="_blank" rel="noopener noreferrer">其他客户端-HTTP接口使用</a></span></a></h2><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span><a href="https://www.apolloconfig.com/#/zh/usage/other-language-client-user-guide?id=_123-%E6%B5%8B%E8%AF%95" target="_blank" rel="noopener noreferrer">测试</a></span></a></h3><p>由于是Http接口，所以在URL组装OK之后，直接通过浏览器、或者相关的http接口测试工具访问即可。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>{config_server_url}/configfiles/json/{appId}/{clusterName}/{namespaceName}?ip={clientIp}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># curl http://apollo.chuanqu.ltd/configfiles/json/chuanqu-yunwei-demo/aliyun-online/team3.web-public</span></span>
<span class="line"><span>{&quot;love&quot;:&quot;888888&quot;,&quot;test1&quot;:&quot;bbbbbbb&quot;}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># curl http://apollo.chuanqu.ltd/configfiles/json/chuanqu-yunwei-demo/dev-test/team3.web-public</span></span>
<span class="line"><span>{&quot;test1&quot;:&quot;bbbbbbb&quot;}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># curl http://apollo.chuanqu.ltd/configfiles/json/chuanqu-yunwei-demo/default/team3.web-public</span></span>
<span class="line"><span>{&quot;a&quot;:&quot;bbbbbbbbbbbbbb&quot;,&quot;test1&quot;:&quot;bbbbbbb&quot;}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,52)]))}const c=s(l,[["render",p]]),h=JSON.parse('{"path":"/article/es5vgyvd/","title":"3.传趣控股使用Apollo场景与规范","lang":"en-US","frontmatter":{"title":"3.传趣控股使用Apollo场景与规范","createTime":"2025/05/27 17:51:17","permalink":"/article/es5vgyvd/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":3.65,"words":1096},"filePathRelative":"kaiyuan/Open-Source-Software/3.传趣控股使用Apollo场景与规范.md"}');export{c as comp,h as data};
