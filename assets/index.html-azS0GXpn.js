import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-BiQR_lPj.js";const p={};function l(d,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="esxi7克隆虚拟机" tabindex="-1"><a class="header-anchor" href="#esxi7克隆虚拟机"><span>Esxi7克隆虚拟机</span></a></h1><h2 id="启用ssh" tabindex="-1"><a class="header-anchor" href="#启用ssh"><span>启用SSH</span></a></h2><p>在ESXI7.0中，SSH默认是关闭的，需要手动开启。</p><p><img src="https://imgoss.xgss.net/picgo/image-20230926142955750.png?aliyun" alt="image-20230926142955750"></p><h2 id="搜索被克隆虚拟机所在目录" tabindex="-1"><a class="header-anchor" href="#搜索被克隆虚拟机所在目录"><span>搜索被克隆虚拟机所在目录</span></a></h2><p>SSH连入ESXI系统 我需要克隆的虚拟机叫 centos7_ip5</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>find / -name centos7_ip5</span></span>
<span class="line"><span>/vmfs/volumes/6511daff-b2d1a74e-6e49-e051d810d817/centos7_ip5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建虚拟机目录与复制vmx文件" tabindex="-1"><a class="header-anchor" href="#创建虚拟机目录与复制vmx文件"><span>创建虚拟机目录与复制vmx文件</span></a></h2><p>需要创建新的虚拟机目录，我的新虚拟机名为 centos7_ip15 创建目录后复制被克隆虚拟机的vmx文件到新的虚拟机目录下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /vmfs/volumes/6511daff-b2d1a74e-6e49-e051d810d817/</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>mkdir centos7_ip16</span></span>
<span class="line"><span>cp centos7_ip5/centos7_ip5.vmx centos7_ip16/centos7_ip16.vmx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="克隆vmdk文件" tabindex="-1"><a class="header-anchor" href="#克隆vmdk文件"><span>克隆vmdk文件</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>vmkfstools -i centos7_ip5/centos7_ip5.vmdk centos7_ip16/centos7_ip16.vmdk</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="编辑vmx文件" tabindex="-1"><a class="header-anchor" href="#编辑vmx文件"><span>编辑vmx文件</span></a></h2><p>进入新的虚拟机目录，编辑vmx文件，将旧虚拟机的名称全部替换为新的虚拟机名称 这里是将centos7_ip5 替换为 centos7_ip16 建议使用vim或者vi编辑，使用命令进行批量替换文本，保存并退出</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd centos7_ip16</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vi centos7_ip16.vmx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:%s/centos7_ip5/centos7_ip16/g</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:wq</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="在esxi中导入虚拟机" tabindex="-1"><a class="header-anchor" href="#在esxi中导入虚拟机"><span>在ESXI中导入虚拟机</span></a></h2><p>创建虚拟机，选择”注册现有虚拟机”</p><p><img src="https://imgoss.xgss.net/picgo/0068693791f79a6dcdc0463dd5d640dc.png?aliyun" alt="img"></p><p>点击按钮选择虚拟机文件</p><p><img src="https://imgoss.xgss.net/picgo/image-20230926144006102.png?aliyun" alt="image-20230926144006102"></p><p>选择刚刚新建的虚拟机目录与编辑好的vmx文件</p><p><img src="https://imgoss.xgss.net/picgo/image-20230926144109208.png?aliyun" alt="image-20230926144109208"></p><h2 id="启动虚拟机" tabindex="-1"><a class="header-anchor" href="#启动虚拟机"><span>启动虚拟机</span></a></h2><p>启动导入好的虚拟机，成功进入系统</p><p><img src="https://imgoss.xgss.net/picgo/image-20230926144847202.png?aliyun" alt="image-20230926144847202"></p><p>拷贝一个文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cp centos7_ip16.vmdk centos7_ip16-000001.vmdk</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="再次启动电源" tabindex="-1"><a class="header-anchor" href="#再次启动电源"><span>再次启动电源</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20230926145145792.png?aliyun" alt="image-20230926145145792"></p><p>可以进入系统</p>`,30)]))}const r=i(p,[["render",l]]),h=JSON.parse('{"path":"/article/zyc2wbtw/","title":"Esxi7克隆虚拟机","lang":"en-US","frontmatter":{"title":"Esxi7克隆虚拟机","createTime":"2025/05/27 17:51:17","permalink":"/article/zyc2wbtw/"},"git":{"createdTime":1749111496000,"updatedTime":1761192011000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":3,"url":"https://github.com/star"}]},"readingTime":{"minutes":1.21,"words":364},"filePathRelative":"NAS-All-in-one/Esxi7克隆虚拟机.md"}');export{r as comp,h as data};
