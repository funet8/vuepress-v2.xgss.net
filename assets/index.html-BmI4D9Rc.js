import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as e,o as i}from"./app-BiQR_lPj.js";const l={};function t(p,s){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="如何查看centos用户登陆记录" tabindex="-1"><a class="header-anchor" href="#如何查看centos用户登陆记录"><span>如何查看Centos用户登陆记录</span></a></h1><p>首先简单介绍一下Centos中记录登陆信息的日志</p><p>有关当前登录用户的信息记录在文件utmp中；登录进入和退出纪录在文件wtmp中；最后一次登录文件可以用lastlog命令察看。 数据交换、关机和重起也记录在wtmp文件中。所有的纪录都包含时间戳。</p><p>每次有一个用户登录时，login程序在文件lastlog中察看用户的UID。如果找到了，则把用户上次登录、退出时间和主机名写到标准输出中，然后login程序在lastlog中纪录新的登录时间。 在新的lastlog纪录写入后，utmp文件打开并插入用户的utmp纪录。该纪录一直用到用户登录退出时删除。utmp文件被各种命令文件使用，包括who、w、users和finger。 下一步，login程序打开文件wtmp附加用户的utmp纪录。当用户登录退出时，具有更新时间戳的同一utmp纪录附加到文件中。wtmp文件被程序last和ac使用。 wtmp和utmp文件都是二进制文件，用户需要使用who、w、users、last和ac来使用这两个文件包含的信息。</p><p>下面来说如何查看Centos用户登陆日志</p><h2 id="who" tabindex="-1"><a class="header-anchor" href="#who"><span>who</span></a></h2><p>who命令查询utmp文件并报告当前登录的每个用户。Who的缺省输出包括用户名、终端类型、登录日期及远程主机。例如：who（回车）显示</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># who</span></span>
<span class="line"><span>root     pts/0        2022-05-24 11:43 (192.168.1.164)</span></span>
<span class="line"><span>root     pts/1        2022-05-24 11:43 (192.168.1.164)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="wtmp" tabindex="-1"><a class="header-anchor" href="#wtmp"><span>wtmp</span></a></h2><p>如果指明了wtmp文件名，则who命令查询以前所有的登陆纪录。使用命令who /var/log/wtmp查看所有登陆记录，结果如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>who /var/log/wtmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="last" tabindex="-1"><a class="header-anchor" href="#last"><span>last</span></a></h2><p>last命令往回搜索wtmp来显示自从文件第一次创建以来登录过的用户。例如：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>last</span></span>
<span class="line"><span>root     pts/1        192.168.1.164    Tue May 24 11:43   still logged in   </span></span>
<span class="line"><span>root     pts/0        192.168.1.164    Tue May 24 11:43   still logged in   </span></span>
<span class="line"><span>root     pts/1        192.168.1.164    Tue May 24 11:37 - 11:43  (00:05)    </span></span>
<span class="line"><span>root     pts/1        192.168.1.164    Tue May 24 11:36 - 11:37  (00:00)    </span></span>
<span class="line"><span>root     pts/0        192.168.1.164    Tue May 24 11:35 - 11:43  (00:07)    </span></span>
<span class="line"><span>root     pts/0        192.168.1.164    Mon May 23 13:37 - 18:32  (04:54)    </span></span>
<span class="line"><span>root     pts/0        192.168.1.251    Wed May 13 14:59 - 12:54 (739+21:54) </span></span>
<span class="line"><span>reboot   system boot  3.10.0-1127.el7. Wed May 13 14:56 - 13:33 (740+22:37) </span></span>
<span class="line"><span>root     pts/1        192.168.1.251    Wed May 13 14:38 - down   (00:17)    </span></span>
<span class="line"><span>root     pts/0        192.168.1.251    Wed May 13 14:08 - down   (00:47)    </span></span>
<span class="line"><span>root     tty1                          Wed May 13 14:06 - 14:55  (00:49)    </span></span>
<span class="line"><span>reboot   system boot  3.10.0-957.1.3.e Wed May 13 13:57 - 14:55  (00:58)    </span></span>
<span class="line"><span>reboot   system boot  3.10.0-957.1.3.e Fri Dec 28 13:41 - 14:15  (00:33)    </span></span>
<span class="line"><span>root     pts/1        192.168.1.251    Fri Dec 28 11:32 - 13:39  (02:06)    </span></span>
<span class="line"><span>root     pts/0        192.168.1.251    Fri Dec 28 11:28 - crash  (02:13)    </span></span>
<span class="line"><span>reboot   system boot  3.10.0-957.1.3.e Fri Dec 28 11:28 - 14:15  (02:46)    </span></span>
<span class="line"><span>root     pts/1        192.168.1.251    Fri Dec 28 11:15 - crash  (00:12)    </span></span>
<span class="line"><span>root     pts/0        192.168.1.251    Fri Dec 28 11:01 - crash  (00:27)    </span></span>
<span class="line"><span>root     tty1                          Fri Dec 28 10:57 - 11:27  (00:30)    </span></span>
<span class="line"><span>reboot   system boot  3.10.0-514.el7.x Fri Dec 28 10:57 - 14:15  (03:17)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://lxy.me/how-to-view-the-centos-user-login-records.html</p>`,15)]))}const d=a(l,[["render",t]]),c=JSON.parse('{"path":"/article/adukop1z/","title":"如何查看Centos用户登陆记录","lang":"en-US","frontmatter":{"title":"如何查看Centos用户登陆记录","createTime":"2025/05/27 17:51:17","permalink":"/article/adukop1z/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":2.53,"words":758},"filePathRelative":"linux-basis/如何查看Centos用户登陆记录.md"}');export{d as comp,c as data};
