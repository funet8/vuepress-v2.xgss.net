import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as e}from"./app-BiQR_lPj.js";const l={};function p(h,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="简单部署开源短链工具-yourls" tabindex="-1"><a class="header-anchor" href="#简单部署开源短链工具-yourls"><span>简单部署开源短链工具-YOURLS</span></a></h1><p>YOURLS是一款使用PHP+Mysql开发的短链接程序，相比公共短网址好处是数据掌握在自己手中，可控性更高。开源地址：https://github.com/YOURLS/YOURLS</p><h1 id="前期准备" tabindex="-1"><a class="header-anchor" href="#前期准备"><span>前期准备</span></a></h1><p>window系统推荐phpStudy等集成PHP环境</p><p>linux系统：LNMP（Linux+Nginx+Mysql+PHP）环境</p><p>域名，如果服务器在国内，则需要备案，笔者使用二级域名，http://y.xgss.net</p><p><img src="https://imgoss.xgss.net/picgo/简单部署开源短链工具-YOURLS.jpg?aliyun" alt="简单部署开源短链工具-YOURLS"></p><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h2><p><a href="http://y.xgss.net/aliyun" target="_blank" rel="noopener noreferrer">http://y.xgss.net/aliyun</a> | <a href="http://y.xgss.net/tx" target="_blank" rel="noopener noreferrer">http://y.xgss.net/tx</a></p><h1 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h1><p>YOURLS 的安装流程类似于PHP站点。</p><p>将安装包解压并上传至服务器； 将 user/config-sample.php 重命名为 user/config.php； 编辑 user/config.php 文件，填入数据库信息和配置站点选项； 访问 http://yoursite.com/admin/ 开始使用吧！</p><h2 id="下载yourls" tabindex="-1"><a class="header-anchor" href="#下载yourls"><span>下载YOURLS</span></a></h2><p>YOURLS免费开源，可以在Github下载最新版本（https://github.com/YOURLS/YOURLS/releases），解压后放到站点根目录，并将config-sample.php更名为config.php。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>wget https://github.com/YOURLS/YOURLS/archive/refs/tags/1.8.2.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="配置mysql数据库" tabindex="-1"><a class="header-anchor" href="#配置mysql数据库"><span>配置MySQL数据库</span></a></h2><p>需要先新建一个MySQL数据库，并设置好账号、密码，然后修改user/config.php配置文件，填写正确的MySQL信息，配置信息如下。</p><p>修改数据库配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>修改 user/config.php</span></span>
<span class="line"><span></span></span>
<span class="line"><span>//配置数据库</span></span>
<span class="line"><span>define( &#39;YOURLS_DB_USER&#39;, &#39;your db user name&#39; );</span></span>
<span class="line"><span>define( &#39;YOURLS_DB_PASS&#39;, &#39;your db password&#39; );</span></span>
<span class="line"><span>define( &#39;YOURLS_DB_NAME&#39;, &#39;yourls&#39; );</span></span>
<span class="line"><span>define( &#39;YOURLS_DB_HOST&#39;, &#39;localhost&#39; );</span></span>
<span class="line"><span>define( &#39;YOURLS_DB_PREFIX&#39;, &#39;yourls_&#39; );</span></span>
<span class="line"><span></span></span>
<span class="line"><span>//设置你的域名</span></span>
<span class="line"><span>define( &#39;YOURLS_SITE&#39;, &#39;http://y.xgss.net&#39; );</span></span>
<span class="line"><span></span></span>
<span class="line"><span>//设置用户名和密码</span></span>
<span class="line"><span>$yourls_user_passwords = [</span></span>
<span class="line"><span>	&#39;admin&#39; =&gt; &#39;123456&#39;, // 设置好密码</span></span>
<span class="line"><span>];</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输入管理员账号密码登录后如果出现“Could not auto-encrypt passwords. Error was: “cannot write file”.”报错，请将user/config.php文件的权限改为666，然后刷新网页，再把权限改回644，因为你刚才填写密码时用的是明文，这样很危险，所以程序需要对其加密。</p><h2 id="配置nginx反向代理" tabindex="-1"><a class="header-anchor" href="#配置nginx反向代理"><span>配置nginx反向代理</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>server {</span></span>
<span class="line"><span>        listen       80;</span></span>
<span class="line"><span>        server_name  y.xgss.net;</span></span>
<span class="line"><span>        root /data/wwwroot/web/y.xgss.net/;</span></span>
<span class="line"><span>        access_log /data/wwwroot/log/y.xgss.net-access.log main_aliyun;</span></span>
<span class="line"><span>        error_log /dev/null;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>        location / {</span></span>
<span class="line"><span>        		index index.php</span></span>
<span class="line"><span>                try_files  $uri $uri/ /yourls-loader.php</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        location ~ ^/.+\\.php {</span></span>
<span class="line"><span>        fastcgi_index            index.php;</span></span>
<span class="line"><span>        fastcgi_split_path_info  ^(.+\\.php)(.*)$;</span></span>
<span class="line"><span>        fastcgi_param            SCRIPT_FILENAME $request_filename;</span></span>
<span class="line"><span>        fastcgi_param            PATH_INFO $fastcgi_path_info;</span></span>
<span class="line"><span>        fastcgi_param            PATH_TRANSLATED $document_root$fastcgi_path_info;</span></span>
<span class="line"><span>        include                  fastcgi_params;</span></span>
<span class="line"><span>        fastcgi_pass             127.0.0.1:9000;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启nginx</p><p>安装：http://y.xgss.net/admin/install.php</p><p><img src="https://imgoss.xgss.net/picgo/image-20220309173850010.png?aliyun" alt="image-20220309173850010"></p><p>登录：http://y.xgss.net/admin/</p><p><img src="https://imgoss.xgss.net/picgo/image-20220309174002660.png?aliyun" alt="image-20220309174002660"></p><p>添加短链接</p><p><img src="https://imgoss.xgss.net/picgo/image-20220309174301121.png?aliyun" alt="image-20220309174301121"></p><h2 id="yourls汉化" tabindex="-1"><a class="header-anchor" href="#yourls汉化"><span>yourls汉化</span></a></h2><p>汉化包的git地址为https://github.com/guox/yourls-zh_CN，下载中文包然后解压后放在放在user/languages/目录下</p><p>YOURLS默认是中文界面，不方便操作，看到有网友提供了汉化，访问<a href="https://github.com/guox/yourls-zh_CN/archive/master.zip" target="_blank" rel="noopener noreferrer">yourls-zh_CN</a>下载汉化包，并解压至<code>user/languages</code>目录，然后修改<code>user/config.php</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#语言包放到languages</span></span>
<span class="line"><span>[root@aliyun-hz languages]# ll</span></span>
<span class="line"><span>total 68</span></span>
<span class="line"><span>-rw-r--r-- 1 www www   210 Apr 23  2017 index.html</span></span>
<span class="line"><span>-rw-r--r-- 1 www www    51 Mar 24  2013 README.md</span></span>
<span class="line"><span>-rw-r--r-- 1 www www 22123 Mar 24  2013 zh_CN.mo</span></span>
<span class="line"><span>-rw-r--r-- 1 www www 32783 Mar 24  2013 zh_CN.po</span></span>
<span class="line"><span>#修改配置文件启用中文</span></span>
<span class="line"><span>vi user/config.php</span></span>
<span class="line"><span>#启用中文</span></span>
<span class="line"><span>define( &#39;YOURLS_LANG&#39;, &#39;zh_CN&#39; );</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="yourls-api" tabindex="-1"><a class="header-anchor" href="#yourls-api"><span>YOURLS- API</span></a></h2><p>请求地址：http://域名//yourls-api.php 参数：username(用户名)、password（密码）、format（格式 json）、url（长地址）、action（功能，shorturl）</p><p>1、GET请求，构建下get请求，可以直接访问也可以用python构建请求</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">http:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">y.xgss.net</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">yourls</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">api.php?username</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">user&amp;password</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">password&amp;url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">http:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">www.baidu.com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&amp;format</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">json&amp;action</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">shorturl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20220314010326000.png?aliyun" alt="image-20220314010326000"></p><p>python构建get请求</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">import requests, json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;http://10.0.0.101/yourls-api.php?&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;username&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;wangxiaoyu&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;password&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;123456&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;url&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.baidu.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;format&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;action&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;shorturl&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> requests.get(url, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">print(json.loads(response.text))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问返回的http://10.0.0.101/q94n1k这个短链接可以跳转到百度 返回信息为</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;keyword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;q94o0a&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://www.baidu.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;百度一下，你就知道&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;date&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2020-04-21 07:40:58&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;ip&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;10.0.0.1&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;status&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;success&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;message&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://www.baidu.com 已保存为&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;百度一下，你就知道&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;shorturl&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://10.0.0.101/q94o0a&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;statusCode&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果不指定format为json的话，默认是XML格式 <img src="https://imgoss.xgss.net/picgo/3b75393125636a4d837138e075bfd303.png?aliyun" alt="在这里插入图片描述"></p><p>2、POST请求 用python来发送POST请求测试 这里以form表单形式提交数据，所以不需要将POST的data转为json格式 POST请求的几种编码方式可以参考：https://www.cnblogs.com/android-it/p/9558751.html</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> requests, json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;http://10.0.0.101/yourls-api.php?&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;username&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;wangxiaoyu&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;password&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;123456&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;url&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.baidu.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;format&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;action&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;shorturl&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> requests.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(url, data)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(json.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">loads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(response.text))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回的信息为</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;keyword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;q94nkx&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://www.baidu.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;百度一下，你就知道&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;date&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2020-04-21 07:31:45&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;ip&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;10.0.0.1&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;status&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;success&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;message&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://www.baidu.com 已保存为&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;百度一下，你就知道&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;shorturl&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://10.0.0.101/q94nkx&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;statusCode&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">200</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、使用token而不使用账号密码</p><p>YOURLS允许使用username和password参数（如果您的设置是私有的话）以老式的方式调用API 。如果您担心将自己的凭证发送出去，还可以使用秘密签名令牌进行API调用。 signature在API请求中使用参数。例：</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">http:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">yoursite</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">yourls</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">api.php?signature</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">1002a612b4&amp;action</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>python示例</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> requests, json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;http://10.0.0.101/yourls-api.php?&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;signature&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;6962355501&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;url&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://www.baidu.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;format&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;action&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;shorturl&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> requests.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">post</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(url, data)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(json.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">loads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(response.text))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="安装sleeky主题-美化yourls" tabindex="-1"><a class="header-anchor" href="#安装sleeky主题-美化yourls"><span>安装Sleeky主题，美化YOURLS</span></a></h1><p>YOURLS界面显得非常古老，风格挺老的，前几天在Github上看到一款YOURLS主题Sleeky，这篇文章分享下Sleeky主题的安装，希望对你有所帮助。</p><p>安装Sleeky主题</p><p>最新版Sleeky主题可前往Github下载：https://github.com/Flynntes/Sleeky/releases</p><p>Sleeky主题主题包括两部分，一部分是YOURLS前端，另一部分是YOURLS后台管理。下载Sleeky主题主题后可看到有2个文件夹：</p><pre><code>sleeky-frontend: 前端主题
sleeky-backend：后端主题
</code></pre><p>将sleeky-frontend文件夹下的内容放到YOURLS站点根目录下即可，不需要额外的设置，直接访问YOURLS主界面即可看到效果。</p><p><img src="https://imgoss.xgss.net/picgo/image-20220324135010266.png?aliyun" alt="image-20220324135010266"></p><p>将后端文件夹sleeky-backend放到YOURLS下的/user/plugins目录，并在YOURLS后台启用Sleeky主题插件，如下图。</p><p><img src="https://imgoss.xgss.net/picgo/image-20220324135929039.png?aliyun" alt="image-20220324135929039"></p><p>旧的后台地址：</p><p><img src="https://imgoss.xgss.net/picgo/image-20220324140031738.png?aliyun" alt="image-20220324140031738"></p><p>新的后台界面：</p><p><img src="https://imgoss.xgss.net/picgo/image-20220324135959700.png?aliyun" alt="image-20220324135959700"></p><h1 id="升级服务" tabindex="-1"><a class="header-anchor" href="#升级服务"><span>升级服务</span></a></h1><p>1.8.2 升级到 1.9.2</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>1.备份</span></span>
<span class="line"><span># cd  /www/wwwroot</span></span>
<span class="line"><span># cp -a y.xgss.net y.xgss.net20230803</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2.下载最新版</span></span>
<span class="line"><span>https://github.com/YOURLS/YOURLS/releases</span></span>
<span class="line"><span></span></span>
<span class="line"><span># wget https://github.com/YOURLS/YOURLS/archive/refs/tags/1.9.2.tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>下载： YOURLS-1.9.2.tar.gz</span></span>
<span class="line"><span>解压</span></span>
<span class="line"><span>tar -zxvf YOURLS-1.9.2.tar.gz </span></span>
<span class="line"><span></span></span>
<span class="line"><span>cp复制直接覆盖不提示</span></span>
<span class="line"><span></span></span>
<span class="line"><span># \\cp -rf YOURLS-1.9.2/* y.xgss.net/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>确定无误之后再删除备份文件</span></span>
<span class="line"><span># rm -rf YOURLS-1.9.2* y.xgss.net20230803/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>升级之前后台截图</p><p><img src="https://imgoss.xgss.net/picgo/image-20230803160921215.png?aliyun" alt="image-20230803160921215"></p><p>升级之后</p><p><img src="https://imgoss.xgss.net/picgo/image-20230803161550212.png?aliyun" alt="image-20230803161550212"></p><h1 id="yourls-目录权限配置" tabindex="-1"><a class="header-anchor" href="#yourls-目录权限配置"><span>YOURLS 目录权限配置</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>
<span class="line"><span>chown -R www:www /www/wwwroot/y.xgss.net/</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>find /www/wwwroot/y.xgss.net/ -type d -exec chmod 755 {} \\;</span></span>
<span class="line"><span>find /www/wwwroot/y.xgss.net/ -type f -exec chmod 644 {} \\;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>su -l www</span></span>
<span class="line"><span>touch /www/wwwroot/y.xgss.net/user/config/index.html</span></span>
<span class="line"><span>touch /www/wwwroot/y.xgss.net/user/logs/index.html</span></span>
<span class="line"><span>chmod 777 /www/wwwroot/y.xgss.net/user/config/index.html</span></span>
<span class="line"><span>chmod 777 /www/wwwroot/y.xgss.net/user/logs/index.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="yourls-宝塔伪静态配置" tabindex="-1"><a class="header-anchor" href="#yourls-宝塔伪静态配置"><span>YOURLS-宝塔伪静态配置</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>location / {</span></span>
<span class="line"><span>    try_files $uri $uri/ /yourls-loader.php$is_args$args;</span></span>
<span class="line"><span>    # if YOURLS is installed in a subdirectory, change the path</span></span>
<span class="line"><span>    # to yourls-loader.php accordingly, eg</span></span>
<span class="line"><span>    # try_files $uri $uri/ /subdir/yourls-loader.php$is_args$args;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20230803162535424.png?aliyun" alt="image-20230803162535424"></p>`,78)]))}const d=i(l,[["render",p]]),k=JSON.parse('{"path":"/article/iw1gts1c/","title":"云服务器部署开源短链生成-YOURLS","lang":"en-US","frontmatter":{"title":"云服务器部署开源短链生成-YOURLS","createTime":"2025/05/27 17:51:17","permalink":"/article/iw1gts1c/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":5.32,"words":1597},"filePathRelative":"kaiyuan/Open-Source-Software/云服务器部署开源短链生成-YOURLS.md"}');export{d as comp,k as data};
