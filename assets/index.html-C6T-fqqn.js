import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as i,o as e}from"./app-BiQR_lPj.js";const p={};function l(d,s){return e(),a("div",null,s[0]||(s[0]=[i(`<h1 id="腾讯云轻量应用服务器部署私有笔记-立省365元" tabindex="-1"><a class="header-anchor" href="#腾讯云轻量应用服务器部署私有笔记-立省365元"><span>腾讯云轻量应用服务器部署私有笔记，立省365元</span></a></h1><p>如果你是小明，每天要处理大量的工作笔记。希望找到一款安全、高效的笔记工具，但市面上的产品总是让他不满意。直到他发现了腾讯云轻量应用服务器搭建一个私有云笔记……我们就来分享一下小明是如何利用腾讯云轻量应用服务器搭建一个专属的私有笔记系统的。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116160909737.png?aliyun" alt="image-20241116160909737"></p><h1 id="一、选购轻量云服务器" tabindex="-1"><a class="header-anchor" href="#一、选购轻量云服务器"><span>一、选购轻量云服务器</span></a></h1><h2 id="轻量应用云是什么" tabindex="-1"><a class="header-anchor" href="#轻量应用云是什么"><span>轻量应用云是什么</span></a></h2><p>轻量应用服务器（TencentCloud Lighthouse）是新一代开箱即用、面向轻量应用场景的云服务器产品，助力中小企业和开发者便捷高效的在云端构建网站、Web应用、小程序/小游戏、游戏服、电商应用、云盘/图床和开发测试环境，相比普通云服务器更加简单易用且更贴近应用，以套餐形式整体售卖云资源并提供高带宽流量包，将热门软件打包实现一键构建应用，提供极简上云体验。</p><h2 id="选购轻量云" tabindex="-1"><a class="header-anchor" href="#选购轻量云"><span>选购轻量云</span></a></h2><p>首先前去腾讯云选购<a href="https://mc.tencent.com/Ijay4BNd" target="_blank" rel="noopener noreferrer">轻量云服务器</a>，根据自己的需求选择配置，这里推荐：2H2G 新加坡、硅谷等国外地域，选择宝塔面板环境，我这边选择centos7系统，则需要单独安装宝塔。</p><h2 id="关于地域选择" tabindex="-1"><a class="header-anchor" href="#关于地域选择"><span>关于地域选择</span></a></h2><p>1.如果你的域名没有备案、可以选择国外的节点</p><p>2.如果你的用户主要在海外，这里也推荐使用海外的节点</p><p>3.星哥的域名备案了，而且主要用户（自己）所以选择上海国内节点。</p><p>活动地址：</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115165815283.png?aliyun" alt="image-20241115165815283"></p><h2 id="重置轻量云服务器密码" tabindex="-1"><a class="header-anchor" href="#重置轻量云服务器密码"><span>重置轻量云服务器密码</span></a></h2><p>1.进入控制台，搜索“轻量”，点击星号，可以收藏云产品，方便下次访问</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115170540410.png?aliyun" alt="image-20241115170540410"></p><p>2.选择刚才买的轻量云，重置密码</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115170741375.png?aliyun" alt="image-20241115170741375"></p><p>3.填写密码，密码一定要复杂！密码一定要复杂！密码一定要复杂！</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115170852639.png?aliyun" alt="image-20241115170852639"></p><h1 id="二、远程连接服务器" tabindex="-1"><a class="header-anchor" href="#二、远程连接服务器"><span>二、远程连接服务器</span></a></h1><p>SSH远程链接的工具有很多比如PuTTY、MobaXterm、Xshell、，根据自己的喜好选择。我这里选择SecureCRT。</p><p>打开SecureCRT软件，点击File，Qukck Connect</p><p>Hostname：你的轻量云公网IP</p><p>端口： 22 （默认）</p><p>username： root</p><p>选择密码认证：刚才重置的密码。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115171212118.png?aliyun" alt="image-20241115171212118"></p><h1 id="三、安装宝塔和docker" tabindex="-1"><a class="header-anchor" href="#三、安装宝塔和docker"><span>三、安装宝塔和Docker</span></a></h1><h2 id="安装宝塔" tabindex="-1"><a class="header-anchor" href="#安装宝塔"><span>安装宝塔</span></a></h2><p>可以在宝塔官方网站去复制代码。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115172428017.png?aliyun" alt="image-20241115172428017"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>url=https://download.bt.cn/install/install_lts.sh;if [ -f /usr/bin/curl ];then curl -sSO $url;else wget -O install_lts.sh $url;fi;bash install_lts.sh ed8484bec</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="安装选项" tabindex="-1"><a class="header-anchor" href="#安装选项"><span>安装选项</span></a></h2><p>记住登录地址和密码</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Do you want to install Bt-Panel to the /www directory now?(y/n): y</span></span>
<span class="line"><span>经过一段时间的跑码之后。</span></span>
<span class="line"><span>========================面板账户登录信息==========================</span></span>
<span class="line"><span></span></span>
<span class="line"><span> 【云服务器】请在安全组放行 42562 端口</span></span>
<span class="line"><span> 外网面板地址: https://XX.XX.XX.XX:42562/14002573</span></span>
<span class="line"><span> 内网面板地址: https://XX.XX.XX.XX:42562/14002573</span></span>
<span class="line"><span> username: XXX  </span></span>
<span class="line"><span> password: XXX</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打开防火墙" tabindex="-1"><a class="header-anchor" href="#打开防火墙"><span>打开防火墙</span></a></h2><p>如果不熟悉如何操作，可以点击一键放通，也就是轻量云的所有端口都运行其他设备访问。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115174610637.png?aliyun" alt="image-20241115174610637"></p><h2 id="访问宝塔面板" tabindex="-1"><a class="header-anchor" href="#访问宝塔面板"><span>访问宝塔面板</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>=============注意：首次打开面板浏览器将提示不安全=================</span></span>
<span class="line"><span></span></span>
<span class="line"><span> 请选择以下其中一种方式解决不安全提醒</span></span>
<span class="line"><span> 1、下载证书，地址：https://dg2.bt.cn/ssl/baota_root.pfx  双击安装,密码【www.bt.cn】</span></span>
<span class="line"><span> 2、点击【高级】-【继续访问】或【接受风险并继续】访问</span></span>
<span class="line"><span> 教程：https://www.bt.cn/bbs/thread-117246-1-1.html</span></span>
<span class="line"><span> mac用户请下载使用此证书：https://dg2.bt.cn/ssl/baota_root.crt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用谷歌浏览器访问，点击继续前往</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115173524409.png?aliyun" alt="image-20241115173524409"></p><h2 id="进入宝塔安装套件" tabindex="-1"><a class="header-anchor" href="#进入宝塔安装套件"><span>进入宝塔安装套件</span></a></h2><p>我这里安装LNMP</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115173742649.png?aliyun" alt="image-20241115173742649"></p><h1 id="四、基于dokcer安装思源笔记" tabindex="-1"><a class="header-anchor" href="#四、基于dokcer安装思源笔记"><span>四、基于Dokcer安装思源笔记</span></a></h1><h2 id="安装docker" tabindex="-1"><a class="header-anchor" href="#安装docker"><span>安装docker</span></a></h2><p>在宝塔中，点击“docker”，点击立刻安装，点击确定。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241115174203391.png?aliyun" alt="image-20241115174203391"></p><h2 id="安装思源笔记" tabindex="-1"><a class="header-anchor" href="#安装思源笔记"><span>安装思源笔记</span></a></h2><p>可以远程SSH连接中输入此安装代码</p><p>dockder部署：https://github.com/siyuan-note/siyuan/blob/master/README_zh_CN.md#docker-%E9%83%A8%E7%BD%B2</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -p /data/docker/siyuan</span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker run --name siyuan \\</span></span>
<span class="line"><span>-itd --restart=always \\</span></span>
<span class="line"><span>-v /data/docker/siyuan:/siyuan/workspace \\</span></span>
<span class="line"><span>-p 6806:6806 \\</span></span>
<span class="line"><span>b3log/siyuan \\</span></span>
<span class="line"><span>--workspace=/siyuan/workspace \\</span></span>
<span class="line"><span>--accessAuthCode=Sd123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker解释</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>-itd</span></span>
<span class="line"><span>这三个参数结合在一起表示：</span></span>
<span class="line"><span>-i（interactive）：让容器以交互模式运行，允许你与容器进行交互。</span></span>
<span class="line"><span>-t（tty）：分配一个伪终端，让容器可以输出终端相关的信息（例如日志等）。</span></span>
<span class="line"><span>-d（detach）：让容器在后台运行，而不是在终端中阻塞。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--restart=always</span></span>
<span class="line"><span>这个选项指定容器在 Docker 守护进程启动时自动重启，并且在容器崩溃或停止时也会自动重启。always 表示容器应该一直保持运行状态，即使 Docker 重启或容器异常退出，容器会被自动重新启动。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-v /data/docker/siyuan:/siyuan/workspace</span></span>
<span class="line"><span>这个选项用于挂载主机上的一个目录到容器内的一个路径。具体来说：</span></span>
<span class="line"><span>/data/docker/siyuan 是宿主机上的一个目录，用来持久化存储 Siyuan 的数据。</span></span>
<span class="line"><span>/siyuan/workspace 是容器内的路径，Siyuan 应用程序会在这里读取和存储数据。</span></span>
<span class="line"><span>这样做可以确保容器内的文件不会在容器停止或删除时丢失。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-p 6806:6806</span></span>
<span class="line"><span>这个选项将容器内的端口 6806 映射到宿主机的端口 6806。即外部用户可以通过访问宿主机的 6806 端口来访问容器中的服务。这里是将 Siyuan 的 Web 服务暴露给外界，默认情况下 Siyuan 使用 6806 端口。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- \`workspace_dir_host\`：宿主机上的工作空间文件夹路径</span></span>
<span class="line"><span>- \`workspace_dir_container\`：容器内工作空间文件夹路径，和后面 \`--workspace\` 指定成一样的</span></span>
<span class="line"><span>- \`accessAuthCode\`：访问授权码，请**务必修改**，否则任何人都可以读写你的数据</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他命令</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>查看docker运行： docker ps</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@node121 ~]# docker ps</span></span>
<span class="line"><span>CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                                       NAMES</span></span>
<span class="line"><span>bf9ace8e130a   b3log/siyuan   &quot;/opt/siyuan/entrypo…&quot;   6 minutes ago   Up 6 minutes   0.0.0.0:6806-&gt;6806/tcp, :::6806-&gt;6806/tcp   siyuan</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看日志：docker logs siyuan</span></span>
<span class="line"><span></span></span>
<span class="line"><span># docker logs siyuan</span></span>
<span class="line"><span>I 2024/11/16 15:22:59 serve.go:244: serving [/] for user-agent [Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.95 Safari/537.36]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>删除思源笔记(请谨慎操作)：</span></span>
<span class="line"><span>docker rm -f siyuan</span></span>
<span class="line"><span>rm -rf /data/docker/siyuan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="六、进入思源笔记" tabindex="-1"><a class="header-anchor" href="#六、进入思源笔记"><span>六、进入思源笔记</span></a></h1><p>安装好了之后，使用IP+端口访问，如图</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116152150661.png?aliyun" alt="image-20241116152150661"></p><h2 id="设置中文" tabindex="-1"><a class="header-anchor" href="#设置中文"><span>设置中文</span></a></h2><p>如图点击左上角，设置---&gt;Appearance---&gt;language，选择简体中文即可。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116153020821.png?aliyun" alt="image-20241116153020821"></p><h2 id="下载插件" tabindex="-1"><a class="header-anchor" href="#下载插件"><span>下载插件</span></a></h2><p>设置，集市，同意</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116153211128.png?aliyun" alt="image-20241116153211128"></p><p>即可选择插件，这里</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116153250536.png?aliyun" alt="image-20241116153250536"></p><h1 id="七、使用域名访问思源笔记" tabindex="-1"><a class="header-anchor" href="#七、使用域名访问思源笔记"><span>七、使用域名访问思源笔记</span></a></h1><p>nginx反向代理</p><p>在宝塔中网站，新建站点，填写域名。</p><p>记得域名要解析。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116154100826.png?aliyun" alt="image-20241116154100826"></p><p>添加反向代理</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116154221041.png?aliyun" alt="image-20241116154221041"></p><p>如图填写反向代理地址</p><p>代理名称：随便写</p><p>目标URL： 127.0.0.1:6806</p><p>发送域名： siyuan.xgss.net</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116154303599.png?aliyun" alt="image-20241116154303599"></p><p>即可用域名访问，不需要再用IP+端口的方式访问。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116154721416.png?aliyun" alt="image-20241116154721416"></p><h2 id="siyuan思源笔记的nginx的配置" tabindex="-1"><a class="header-anchor" href="#siyuan思源笔记的nginx的配置"><span>siyuan思源笔记的nginx的配置</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>server {</span></span>
<span class="line"><span>  listen       80;</span></span>
<span class="line"><span>  server_name  siyuan.xgss.net;</span></span>
<span class="line"><span>  return 301   https://$host$request_uri;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>server {</span></span>
<span class="line"><span>    listen 443 ssl http2;</span></span>
<span class="line"><span>    server_name     siyuan.xgss.net;</span></span>
<span class="line"><span>	access_log  /www/wwwlogs/siyuan.xgss.net.log;</span></span>
<span class="line"><span>	error_log  /dev/null;</span></span>
<span class="line"><span>		</span></span>
<span class="line"><span>	# 用于SSL证书申请时的文件验证相关配置 -- 请勿删除</span></span>
<span class="line"><span>	include /www/server/panel/vhost/nginx/well-known/siyuan.xgss.net.conf;</span></span>
<span class="line"><span>	</span></span>
<span class="line"><span>	include /data/conf/sites-available/ssl.conf;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	location / {</span></span>
<span class="line"><span>			proxy_set_header   X-Real-IP $remote_addr;</span></span>
<span class="line"><span>			proxy_set_header   Host      $http_host;</span></span>
<span class="line"><span>			proxy_pass         http://127.0.0.1:6806;</span></span>
<span class="line"><span>			proxy_set_header Upgrade $http_upgrade;</span></span>
<span class="line"><span>			proxy_set_header Connection &#39;Upgrade&#39;;</span></span>
<span class="line"><span>			client_max_body_size 1000m;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>	location /ws {</span></span>
<span class="line"><span>		proxy_pass         http://127.0.0.1:6806;</span></span>
<span class="line"><span>		proxy_read_timeout 60s;</span></span>
<span class="line"><span>		proxy_http_version 1.1;</span></span>
<span class="line"><span>		proxy_set_header Upgrade $http_upgrade;</span></span>
<span class="line"><span>		proxy_set_header Connection &#39;Upgrade&#39;;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然为了数据安全，还可以设置免费的SSL证书！</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116160415938.png?aliyun" alt="image-20241116160415938"></p><h1 id="八、下载各个版本" tabindex="-1"><a class="header-anchor" href="#八、下载各个版本"><span>八、下载各个版本</span></a></h1><p>可以进入官网按需下载各个版本的客户端，包括常见的windows 、 macos、 安卓，苹果ios等 甚至还有浏览器插件。</p><p><img src="https://imgoss.xgss.net/picgo/image-20241116155203792.png?aliyun" alt="image-20241116155203792"></p><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><p>通过本文，我们详细介绍了如何在腾讯云轻量应用服务器上部署私有笔记工具。从环境准备到软件安装，每一个步骤都清晰明了。拥有一个私有笔记系统，不仅可以保障数据的安全性和隐私性，还可以根据自己的需求进行定制，提高工作效率。现在就行动起来</p>`,93)]))}const t=n(p,[["render",l]]),h=JSON.parse('{"path":"/article/ruu3d8m1/","title":"腾讯云轻量应用服务器部署私有笔记，立省365元","lang":"en-US","frontmatter":{"title":"腾讯云轻量应用服务器部署私有笔记，立省365元","createTime":"2025/05/27 17:51:17","permalink":"/article/ruu3d8m1/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":6.85,"words":2055},"filePathRelative":"cloud/tengxunyun/腾讯云轻量应用服务器部署私有笔记，立省365元.md"}');export{t as comp,h as data};
