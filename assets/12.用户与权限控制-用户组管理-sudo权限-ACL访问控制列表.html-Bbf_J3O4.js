import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a,o as n}from"./app-BiQR_lPj.js";const t={};function i(l,s){return n(),e("div",null,s[0]||(s[0]=[a(`<h1 id="ç”¨æˆ·ä¸æƒé™æ§åˆ¶-ç”¨æˆ·-ç»„ç®¡ç†ã€sudo-æƒé™ã€acl-è®¿é—®æ§åˆ¶åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·ä¸æƒé™æ§åˆ¶-ç”¨æˆ·-ç»„ç®¡ç†ã€sudo-æƒé™ã€acl-è®¿é—®æ§åˆ¶åˆ—è¡¨"><span>ç”¨æˆ·ä¸æƒé™æ§åˆ¶ï¼šç”¨æˆ·/ç»„ç®¡ç†ã€sudo æƒé™ã€ACL è®¿é—®æ§åˆ¶åˆ—è¡¨</span></a></h1><p>åœ¨æ—¥å¸¸çš„ Linux è¿ç»´ä¸å®‰å…¨åŠ å›ºä¸­ï¼Œ<strong>ç”¨æˆ·ä¸æƒé™æ§åˆ¶</strong>æ˜¯æœ€åŸºç¡€ã€ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½è§†çš„ç¯èŠ‚ã€‚å¾ˆå¤šå®‰å…¨äº‹æ•…å¹¶éæºäºé«˜æ·±çš„æ¼æ´ï¼Œè€Œæ˜¯å› ä¸ºæƒé™é…ç½®ä¸å½“ï¼Œè®©æ”»å‡»è€…æœ‰äº†å¯ä¹˜ä¹‹æœºã€‚æœ¬æ–‡å°†ä»<strong>ç”¨æˆ·/ç»„ç®¡ç†</strong>ã€<strong>sudo æƒé™</strong>ã€<strong>ACL è®¿é—®æ§åˆ¶åˆ—è¡¨</strong>ä¸‰ä¸ªæ–¹é¢ï¼Œç³»ç»Ÿæ¢³ç†å®æˆ˜è¦ç‚¹ä¸æœ€ä½³å®è·µã€‚</p><h2 id="ä¸€ã€ç”¨æˆ·ä¸ç»„ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç”¨æˆ·ä¸ç»„ç®¡ç†"><span>ä¸€ã€ç”¨æˆ·ä¸ç»„ç®¡ç†</span></a></h2><h3 id="_1-ç”¨æˆ·ä¸ç»„çš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#_1-ç”¨æˆ·ä¸ç»„çš„å…³ç³»"><span>1. ç”¨æˆ·ä¸ç»„çš„å…³ç³»</span></a></h3><ul><li><strong>ç”¨æˆ·ï¼ˆUserï¼‰</strong>ï¼šç³»ç»Ÿä¸­æ‰§è¡Œæ“ä½œçš„ä¸»ä½“ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰å”¯ä¸€çš„ UIDï¼ˆUser IDï¼‰ã€‚</li><li><strong>ç»„ï¼ˆGroupï¼‰</strong>ï¼šæƒé™ç®¡ç†çš„é›†åˆå•ä½ï¼Œæ¯ä¸ªç»„æœ‰å”¯ä¸€çš„ GIDï¼ˆGroup IDï¼‰ã€‚</li><li>ä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºå¤šä¸ªç»„ï¼Œæ–¹ä¾¿æ‰¹é‡æˆæƒã€‚</li></ul><h3 id="_2-å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_2-å¸¸ç”¨å‘½ä»¤"><span>2. å¸¸ç”¨å‘½ä»¤</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># æ·»åŠ ç”¨æˆ·</span></span>
<span class="line"><span>useradd -m -s /bin/bash devuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ä¿®æ”¹ç”¨æˆ·å¯†ç </span></span>
<span class="line"><span>passwd devuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ·»åŠ ç»„</span></span>
<span class="line"><span>groupadd devgroup</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å°†ç”¨æˆ·åŠ å…¥ç»„</span></span>
<span class="line"><span>usermod -aG devgroup devuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span>id devuser</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®æˆ˜å»ºè®®</strong></p><ul><li>æ™®é€šä¸šåŠ¡è´¦å·ä¸è¿ç»´è´¦å·åˆ†ç¦»ï¼Œé¿å…â€œå…¨èƒ½è´¦å·â€ã€‚</li><li>ç¦æ­¢ç›´æ¥ä½¿ç”¨ <code>root</code> ç™»å½•ï¼Œæ”¹ç”¨æ™®é€šç”¨æˆ· + <code>sudo</code> ææƒã€‚</li><li>å®šæœŸå®¡è®¡ <code>/etc/passwd</code> ä¸ <code>/etc/group</code>ï¼Œæ¸…ç†æ— ç”¨è´¦å·ã€‚</li></ul><h2 id="äºŒã€sudo-æƒé™æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#äºŒã€sudo-æƒé™æ§åˆ¶"><span>äºŒã€sudo æƒé™æ§åˆ¶</span></a></h2><p><code>sudo</code> æ˜¯ Linux ä¸­æœ€å¸¸ç”¨çš„<strong>æœ€å°åŒ–æˆæƒå·¥å…·</strong>ï¼Œå…è®¸æ™®é€šç”¨æˆ·åœ¨æˆæƒèŒƒå›´å†…æ‰§è¡Œé«˜æƒé™å‘½ä»¤ã€‚</p><h3 id="_1-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-é…ç½®æ–‡ä»¶"><span>1. é…ç½®æ–‡ä»¶</span></a></h3><ul><li>ä¸»é…ç½®æ–‡ä»¶ï¼š<code>/etc/sudoers</code></li><li>æ¨èä½¿ç”¨ <code>visudo</code> ç¼–è¾‘ï¼Œé¿å…è¯­æ³•é”™è¯¯å¯¼è‡´é”æ­»æƒé™ã€‚</li></ul><h3 id="_2-åŸºæœ¬æˆæƒç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-åŸºæœ¬æˆæƒç¤ºä¾‹"><span>2. åŸºæœ¬æˆæƒç¤ºä¾‹</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># å…è®¸ devuser ä»¥ root èº«ä»½æ‰§è¡Œ systemctl</span></span>
<span class="line"><span>devuser ALL=(ALL) /bin/systemctl</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å…è®¸ devgroup å…å¯†ç æ‰§è¡Œé‡å¯æœåŠ¡</span></span>
<span class="line"><span>%devgroup ALL=(ALL) NOPASSWD: /bin/systemctl restart nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-å®‰å…¨å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_3-å®‰å…¨å»ºè®®"><span>3. å®‰å…¨å»ºè®®</span></a></h3><ul><li>ç²¾ç¡®åˆ°å‘½ä»¤è·¯å¾„ï¼Œä¸è¦ä½¿ç”¨é€šé…ç¬¦ <code>*</code> ä¹±æˆæƒã€‚</li><li>å¯¹é«˜å±å‘½ä»¤ï¼ˆå¦‚ <code>rm -rf /</code>ã€<code>dd</code>ï¼‰ç¦æ­¢æˆæƒã€‚</li><li>é…åˆ <code>sudo -l</code> å®šæœŸæ£€æŸ¥ç”¨æˆ·å¯æ‰§è¡Œçš„å‘½ä»¤ã€‚</li></ul><h2 id="ä¸‰ã€acl-è®¿é—®æ§åˆ¶åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€acl-è®¿é—®æ§åˆ¶åˆ—è¡¨"><span>ä¸‰ã€ACL è®¿é—®æ§åˆ¶åˆ—è¡¨</span></a></h2><p>ä¼ ç»Ÿçš„ Linux æƒé™æ¨¡å‹ï¼ˆ<code>rwx</code>ï¼‰åªèƒ½ç²¾ç¡®åˆ°<strong>æ‰€æœ‰è€… / æ‰€å±ç»„ / å…¶ä»–äºº</strong>ä¸‰ç±»ç”¨æˆ·ï¼ŒACLï¼ˆAccess Control Listï¼‰åˆ™æä¾›äº†æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ã€‚</p><h3 id="_1-å¯ç”¨ä¸æŸ¥çœ‹-acl" tabindex="-1"><a class="header-anchor" href="#_1-å¯ç”¨ä¸æŸ¥çœ‹-acl"><span>1. å¯ç”¨ä¸æŸ¥çœ‹ ACL</span></a></h3><ul><li>å¤§å¤šæ•°ç°ä»£ Linux å‘è¡Œç‰ˆé»˜è®¤æ”¯æŒ ACLã€‚</li><li>æŸ¥çœ‹æŒ‚è½½å‚æ•°ï¼š</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mount | grep acl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-è®¾ç½®ä¸æŸ¥çœ‹-acl" tabindex="-1"><a class="header-anchor" href="#_2-è®¾ç½®ä¸æŸ¥çœ‹-acl"><span>2. è®¾ç½®ä¸æŸ¥çœ‹ ACL</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># ç»™ devuser èµ‹äºˆå¯¹ test.log çš„è¯»å†™æƒé™</span></span>
<span class="line"><span>setfacl -m u:devuser:rw test.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ç»™ devgroup èµ‹äºˆæ‰§è¡Œæƒé™</span></span>
<span class="line"><span>setfacl -m g:devgroup:x test.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹ ACL</span></span>
<span class="line"><span>getfacl test.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-å®æˆ˜åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_3-å®æˆ˜åœºæ™¯"><span>3. å®æˆ˜åœºæ™¯</span></a></h3><ul><li>å¤šä¸ªé¡¹ç›®ç»„å…±äº«åŒä¸€ç›®å½•ï¼Œä½†æƒé™è¦æ±‚ä¸åŒã€‚</li><li>ä¸´æ—¶æˆæƒå¤–éƒ¨äººå‘˜è®¿é—®ç‰¹å®šæ–‡ä»¶ï¼Œè€Œä¸å½±å“åŸæœ‰æƒé™ç»“æ„ã€‚</li></ul><h2 id="å››ã€ç»¼åˆå®‰å…¨ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#å››ã€ç»¼åˆå®‰å…¨ç­–ç•¥"><span>å››ã€ç»¼åˆå®‰å…¨ç­–ç•¥</span></a></h2><ol><li><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼šåªæˆäºˆå®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€ä½æƒé™ã€‚</li><li><strong>åˆ†ç»„ç®¡ç†</strong>ï¼šæŒ‰è§’è‰²æˆ–é¡¹ç›®åˆ†ç»„ï¼Œæ‰¹é‡æˆæƒï¼Œå‡å°‘é‡å¤é…ç½®ã€‚</li><li><strong>æ—¥å¿—å®¡è®¡</strong>ï¼šå¼€å¯ <code>sudo</code> æ—¥å¿—ä¸ ACL å˜æ›´è®°å½•ï¼Œä¾¿äºè¿½æº¯ã€‚</li><li><strong>å®šæœŸæ¸…ç†</strong>ï¼šç§»é™¤ä¸å†ä½¿ç”¨çš„è´¦å·ã€ç»„å’Œ ACL è§„åˆ™ã€‚</li></ol><h2 id="ç”¨æˆ·ä¸æƒé™æ§åˆ¶å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·ä¸æƒé™æ§åˆ¶å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨"><span>ç”¨æˆ·ä¸æƒé™æ§åˆ¶å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨</span></a></h2><table><thead><tr><th>åˆ†ç±»</th><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>ç”¨æˆ·ç®¡ç†</strong></td><td><code>useradd</code></td><td>æ·»åŠ æ–°ç”¨æˆ·</td><td><code>useradd -m -s /bin/bash devuser</code></td></tr><tr><td></td><td><code>passwd</code></td><td>è®¾ç½®/ä¿®æ”¹ç”¨æˆ·å¯†ç </td><td><code>passwd devuser</code></td></tr><tr><td></td><td><code>usermod</code></td><td>ä¿®æ”¹ç”¨æˆ·å±æ€§ï¼ˆå¦‚ç»„ã€shellï¼‰</td><td><code>usermod -aG devgroup devuser</code></td></tr><tr><td></td><td><code>userdel</code></td><td>åˆ é™¤ç”¨æˆ·</td><td><code>userdel -r devuser</code></td></tr><tr><td><strong>ç»„ç®¡ç†</strong></td><td><code>groupadd</code></td><td>æ·»åŠ æ–°ç»„</td><td><code>groupadd devgroup</code></td></tr><tr><td></td><td><code>groupdel</code></td><td>åˆ é™¤ç»„</td><td><code>groupdel devgroup</code></td></tr><tr><td></td><td><code>gpasswd</code></td><td>ç®¡ç†ç»„æˆå‘˜</td><td><code>gpasswd -a devuser devgroup</code></td></tr><tr><td><strong>ä¿¡æ¯æŸ¥çœ‹</strong></td><td><code>id</code></td><td>æŸ¥çœ‹ç”¨æˆ· UID/GID/ç»„</td><td><code>id devuser</code></td></tr><tr><td></td><td><code>who</code> / <code>w</code></td><td>æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·</td><td><code>who</code></td></tr><tr><td></td><td><code>groups</code></td><td>æŸ¥çœ‹ç”¨æˆ·æ‰€å±ç»„</td><td><code>groups devuser</code></td></tr><tr><td><strong>sudo æƒé™</strong></td><td><code>visudo</code></td><td>å®‰å…¨ç¼–è¾‘ sudo é…ç½®</td><td><code>visudo</code></td></tr><tr><td></td><td><code>sudo -l</code></td><td>æŸ¥çœ‹å½“å‰ç”¨æˆ·å¯æ‰§è¡Œçš„ sudo å‘½ä»¤</td><td><code>sudo -l</code></td></tr><tr><td><strong>ACL ç®¡ç†</strong></td><td><code>setfacl</code></td><td>è®¾ç½® ACL æƒé™</td><td><code>setfacl -m u:devuser:rw file.txt</code></td></tr><tr><td></td><td><code>getfacl</code></td><td>æŸ¥çœ‹ ACL æƒé™</td><td><code>getfacl file.txt</code></td></tr><tr><td></td><td><code>setfacl -x</code></td><td>åˆ é™¤ ACL æ¡ç›®</td><td><code>setfacl -x u:devuser file.txt</code></td></tr><tr><td><strong>æƒé™æŸ¥çœ‹ä¸ä¿®æ”¹</strong></td><td><code>ls -l</code></td><td>æŸ¥çœ‹æ–‡ä»¶æƒé™</td><td><code>ls -l /var/www</code></td></tr><tr><td></td><td><code>chmod</code></td><td>ä¿®æ”¹æ–‡ä»¶æƒé™</td><td><code>chmod 640 file.txt</code></td></tr><tr><td></td><td><code>chown</code></td><td>ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…</td><td><code>chown devuser:devgroup file.txt</code></td></tr></tbody></table><p>ğŸ’¡ <strong>ä½¿ç”¨å»ºè®®</strong></p><ul><li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ<strong>å…ˆæŸ¥æƒé™å†æ”¹æƒé™</strong>ï¼Œé¿å…è¯¯æ“ä½œã€‚</li><li>å¯¹é«˜å±å‘½ä»¤ï¼ˆå¦‚ <code>chmod -R 777 /</code>ï¼‰ä¿æŒé«˜åº¦è­¦æƒ•ã€‚</li><li>é…åˆæ—¥å¿—å®¡è®¡ï¼ˆ<code>/var/log/secure</code>ã€<code>/var/log/auth.log</code>ï¼‰è¿½è¸ªæƒé™å˜æ›´ã€‚</li></ul><h2 id="ç»“è¯­" tabindex="-1"><a class="header-anchor" href="#ç»“è¯­"><span>ç»“è¯­</span></a></h2><p>æƒé™æ§åˆ¶ä¸æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼Œè€Œæ˜¯ä¸€ä¸ªæŒç»­ä¼˜åŒ–çš„è¿‡ç¨‹ã€‚ä½œä¸ºä¸€åæ™ºç»´æ”»åŸç‹®ï¼Œæˆ‘ä»¬ä¸ä»…è¦ä¼šâ€œå¼€é—¨â€ï¼Œæ›´è¦æ‡‚å¾—<strong>è°èƒ½è¿›ã€èƒ½å¹²ä»€ä¹ˆã€ä»€ä¹ˆæ—¶å€™è¯¥æ”¶å›é’¥åŒ™</strong>ã€‚ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåˆç†çš„ç”¨æˆ·/ç»„ç®¡ç†ã€ç²¾ç¡®çš„ sudo æˆæƒã€çµæ´»çš„ ACL é…ç½®ï¼Œèƒ½è®©ç³»ç»Ÿæ—¢é«˜æ•ˆåˆå®‰å…¨ã€‚</p>`,34)]))}const c=d(t,[["render",i]]),p=JSON.parse('{"path":"/%E6%99%BA%E7%BB%B4%E6%94%BB%E5%9F%8E%E7%8B%AE/S15/12.%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6-%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86-sudo%E6%9D%83%E9%99%90-ACL%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8.html","title":"ç”¨æˆ·ä¸æƒé™æ§åˆ¶ï¼šç”¨æˆ·/ç»„ç®¡ç†ã€sudo æƒé™ã€ACL è®¿é—®æ§åˆ¶åˆ—è¡¨","lang":"en-US","frontmatter":{},"git":{"createdTime":1756914694000,"updatedTime":1761640845000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":3.73,"words":1120},"filePathRelative":"æ™ºç»´æ”»åŸç‹®/S15/12.ç”¨æˆ·ä¸æƒé™æ§åˆ¶-ç”¨æˆ·ç»„ç®¡ç†-sudoæƒé™-ACLè®¿é—®æ§åˆ¶åˆ—è¡¨.md"}');export{c as comp,p as data};
