import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a,o as n}from"./app-BiQR_lPj.js";const t={};function i(l,s){return n(),e("div",null,s[0]||(s[0]=[a(`<h1 id="用户与权限控制-用户-组管理、sudo-权限、acl-访问控制列表" tabindex="-1"><a class="header-anchor" href="#用户与权限控制-用户-组管理、sudo-权限、acl-访问控制列表"><span>用户与权限控制：用户/组管理、sudo 权限、ACL 访问控制列表</span></a></h1><p>在日常的 Linux 运维与安全加固中，<strong>用户与权限控制</strong>是最基础、也是最容易被忽视的环节。很多安全事故并非源于高深的漏洞，而是因为权限配置不当，让攻击者有了可乘之机。本文将从<strong>用户/组管理</strong>、<strong>sudo 权限</strong>、<strong>ACL 访问控制列表</strong>三个方面，系统梳理实战要点与最佳实践。</p><h2 id="一、用户与组管理" tabindex="-1"><a class="header-anchor" href="#一、用户与组管理"><span>一、用户与组管理</span></a></h2><h3 id="_1-用户与组的关系" tabindex="-1"><a class="header-anchor" href="#_1-用户与组的关系"><span>1. 用户与组的关系</span></a></h3><ul><li><strong>用户（User）</strong>：系统中执行操作的主体，每个用户都有唯一的 UID（User ID）。</li><li><strong>组（Group）</strong>：权限管理的集合单位，每个组有唯一的 GID（Group ID）。</li><li>一个用户可以属于多个组，方便批量授权。</li></ul><h3 id="_2-常用命令" tabindex="-1"><a class="header-anchor" href="#_2-常用命令"><span>2. 常用命令</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 添加用户</span></span>
<span class="line"><span>useradd -m -s /bin/bash devuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 修改用户密码</span></span>
<span class="line"><span>passwd devuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 添加组</span></span>
<span class="line"><span>groupadd devgroup</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 将用户加入组</span></span>
<span class="line"><span>usermod -aG devgroup devuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看用户信息</span></span>
<span class="line"><span>id devuser</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>实战建议</strong></p><ul><li>普通业务账号与运维账号分离，避免“全能账号”。</li><li>禁止直接使用 <code>root</code> 登录，改用普通用户 + <code>sudo</code> 提权。</li><li>定期审计 <code>/etc/passwd</code> 与 <code>/etc/group</code>，清理无用账号。</li></ul><h2 id="二、sudo-权限控制" tabindex="-1"><a class="header-anchor" href="#二、sudo-权限控制"><span>二、sudo 权限控制</span></a></h2><p><code>sudo</code> 是 Linux 中最常用的<strong>最小化授权工具</strong>，允许普通用户在授权范围内执行高权限命令。</p><h3 id="_1-配置文件" tabindex="-1"><a class="header-anchor" href="#_1-配置文件"><span>1. 配置文件</span></a></h3><ul><li>主配置文件：<code>/etc/sudoers</code></li><li>推荐使用 <code>visudo</code> 编辑，避免语法错误导致锁死权限。</li></ul><h3 id="_2-基本授权示例" tabindex="-1"><a class="header-anchor" href="#_2-基本授权示例"><span>2. 基本授权示例</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 允许 devuser 以 root 身份执行 systemctl</span></span>
<span class="line"><span>devuser ALL=(ALL) /bin/systemctl</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 允许 devgroup 免密码执行重启服务</span></span>
<span class="line"><span>%devgroup ALL=(ALL) NOPASSWD: /bin/systemctl restart nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-安全建议" tabindex="-1"><a class="header-anchor" href="#_3-安全建议"><span>3. 安全建议</span></a></h3><ul><li>精确到命令路径，不要使用通配符 <code>*</code> 乱授权。</li><li>对高危命令（如 <code>rm -rf /</code>、<code>dd</code>）禁止授权。</li><li>配合 <code>sudo -l</code> 定期检查用户可执行的命令。</li></ul><h2 id="三、acl-访问控制列表" tabindex="-1"><a class="header-anchor" href="#三、acl-访问控制列表"><span>三、ACL 访问控制列表</span></a></h2><p>传统的 Linux 权限模型（<code>rwx</code>）只能精确到<strong>所有者 / 所属组 / 其他人</strong>三类用户，ACL（Access Control List）则提供了更细粒度的权限控制。</p><h3 id="_1-启用与查看-acl" tabindex="-1"><a class="header-anchor" href="#_1-启用与查看-acl"><span>1. 启用与查看 ACL</span></a></h3><ul><li>大多数现代 Linux 发行版默认支持 ACL。</li><li>查看挂载参数：</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mount | grep acl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-设置与查看-acl" tabindex="-1"><a class="header-anchor" href="#_2-设置与查看-acl"><span>2. 设置与查看 ACL</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 给 devuser 赋予对 test.log 的读写权限</span></span>
<span class="line"><span>setfacl -m u:devuser:rw test.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 给 devgroup 赋予执行权限</span></span>
<span class="line"><span>setfacl -m g:devgroup:x test.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看 ACL</span></span>
<span class="line"><span>getfacl test.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-实战场景" tabindex="-1"><a class="header-anchor" href="#_3-实战场景"><span>3. 实战场景</span></a></h3><ul><li>多个项目组共享同一目录，但权限要求不同。</li><li>临时授权外部人员访问特定文件，而不影响原有权限结构。</li></ul><h2 id="四、综合安全策略" tabindex="-1"><a class="header-anchor" href="#四、综合安全策略"><span>四、综合安全策略</span></a></h2><ol><li><strong>最小权限原则</strong>：只授予完成任务所需的最低权限。</li><li><strong>分组管理</strong>：按角色或项目分组，批量授权，减少重复配置。</li><li><strong>日志审计</strong>：开启 <code>sudo</code> 日志与 ACL 变更记录，便于追溯。</li><li><strong>定期清理</strong>：移除不再使用的账号、组和 ACL 规则。</li></ol><h2 id="用户与权限控制常用命令速查表" tabindex="-1"><a class="header-anchor" href="#用户与权限控制常用命令速查表"><span>用户与权限控制常用命令速查表</span></a></h2><table><thead><tr><th>分类</th><th>命令</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><strong>用户管理</strong></td><td><code>useradd</code></td><td>添加新用户</td><td><code>useradd -m -s /bin/bash devuser</code></td></tr><tr><td></td><td><code>passwd</code></td><td>设置/修改用户密码</td><td><code>passwd devuser</code></td></tr><tr><td></td><td><code>usermod</code></td><td>修改用户属性（如组、shell）</td><td><code>usermod -aG devgroup devuser</code></td></tr><tr><td></td><td><code>userdel</code></td><td>删除用户</td><td><code>userdel -r devuser</code></td></tr><tr><td><strong>组管理</strong></td><td><code>groupadd</code></td><td>添加新组</td><td><code>groupadd devgroup</code></td></tr><tr><td></td><td><code>groupdel</code></td><td>删除组</td><td><code>groupdel devgroup</code></td></tr><tr><td></td><td><code>gpasswd</code></td><td>管理组成员</td><td><code>gpasswd -a devuser devgroup</code></td></tr><tr><td><strong>信息查看</strong></td><td><code>id</code></td><td>查看用户 UID/GID/组</td><td><code>id devuser</code></td></tr><tr><td></td><td><code>who</code> / <code>w</code></td><td>查看当前登录用户</td><td><code>who</code></td></tr><tr><td></td><td><code>groups</code></td><td>查看用户所属组</td><td><code>groups devuser</code></td></tr><tr><td><strong>sudo 权限</strong></td><td><code>visudo</code></td><td>安全编辑 sudo 配置</td><td><code>visudo</code></td></tr><tr><td></td><td><code>sudo -l</code></td><td>查看当前用户可执行的 sudo 命令</td><td><code>sudo -l</code></td></tr><tr><td><strong>ACL 管理</strong></td><td><code>setfacl</code></td><td>设置 ACL 权限</td><td><code>setfacl -m u:devuser:rw file.txt</code></td></tr><tr><td></td><td><code>getfacl</code></td><td>查看 ACL 权限</td><td><code>getfacl file.txt</code></td></tr><tr><td></td><td><code>setfacl -x</code></td><td>删除 ACL 条目</td><td><code>setfacl -x u:devuser file.txt</code></td></tr><tr><td><strong>权限查看与修改</strong></td><td><code>ls -l</code></td><td>查看文件权限</td><td><code>ls -l /var/www</code></td></tr><tr><td></td><td><code>chmod</code></td><td>修改文件权限</td><td><code>chmod 640 file.txt</code></td></tr><tr><td></td><td><code>chown</code></td><td>修改文件所有者</td><td><code>chown devuser:devgroup file.txt</code></td></tr></tbody></table><p>💡 <strong>使用建议</strong></p><ul><li>在生产环境中，<strong>先查权限再改权限</strong>，避免误操作。</li><li>对高危命令（如 <code>chmod -R 777 /</code>）保持高度警惕。</li><li>配合日志审计（<code>/var/log/secure</code>、<code>/var/log/auth.log</code>）追踪权限变更。</li></ul><h2 id="结语" tabindex="-1"><a class="header-anchor" href="#结语"><span>结语</span></a></h2><p>权限控制不是一次性工作，而是一个持续优化的过程。作为一名智维攻城狮，我们不仅要会“开门”，更要懂得<strong>谁能进、能干什么、什么时候该收回钥匙</strong>。 在生产环境中，合理的用户/组管理、精确的 sudo 授权、灵活的 ACL 配置，能让系统既高效又安全。</p>`,34)]))}const c=d(t,[["render",i]]),p=JSON.parse('{"path":"/%E6%99%BA%E7%BB%B4%E6%94%BB%E5%9F%8E%E7%8B%AE/S15/12.%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6-%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86-sudo%E6%9D%83%E9%99%90-ACL%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8.html","title":"用户与权限控制：用户/组管理、sudo 权限、ACL 访问控制列表","lang":"en-US","frontmatter":{},"git":{"createdTime":1756914694000,"updatedTime":1761640845000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":3.73,"words":1120},"filePathRelative":"智维攻城狮/S15/12.用户与权限控制-用户组管理-sudo权限-ACL访问控制列表.md"}');export{c as comp,p as data};
