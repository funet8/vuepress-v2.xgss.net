import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as i,o as n}from"./app-BiQR_lPj.js";const t={};function p(l,e){return n(),a("div",null,e[0]||(e[0]=[i(`<h1 id="开源项目搭建中国裁判文书网本地搜索web系统" tabindex="-1"><a class="header-anchor" href="#开源项目搭建中国裁判文书网本地搜索web系统"><span>开源项目搭建中国裁判文书网本地搜索WEB系统</span></a></h1><p>2023年12月听新闻说裁判文书网将不再对公众开放，对于这个消息对于中国法制进程影响可谓深远。</p><p>今天在github上看到一个开源项目，中国裁判文书网本地搜索，处于好奇在本地搭建试一下，能否跑起来。</p><p><a href="https://github.com/cncases/cases" target="_blank" rel="noopener noreferrer">https://github.com/cncases/cases</a></p><p><img src="https://imgoss.xgss.net/picgo/caipanwenshuwang.jpg?aliyun" alt="caipanwenshuwang"></p><h2 id="下载原始数据-102g" tabindex="-1"><a class="header-anchor" href="#下载原始数据-102g"><span>下载原始数据（102G）</span></a></h2><p>方法：通过bt下载，种子文件为 810air.torrent ，可以从本仓库下载，也可以通过链接 <a href="https://files.catbox.moe/810air.torrent" target="_blank" rel="noopener noreferrer">https://files.catbox.moe/810air.torrent</a></p><p>原始数据来源于<a href="https://www.macrodatas.cn/article/1147471898" target="_blank" rel="noopener noreferrer">马克数据网</a>，文书数量超过8500万，约102G。下载后不要解压子文件，将文件路径填写到 config.toml 中的 raw_data_path 变量中；</p><p>我这边用迅雷下载，大概95G</p><p><img src="https://imgoss.xgss.net/picgo/image-20240130141708576.png?aliyun" alt="image-20240130141708576"></p><h2 id="下载程序并创建配置文件" tabindex="-1"><a class="header-anchor" href="#下载程序并创建配置文件"><span>下载程序并创建配置文件</span></a></h2><p>从 releases 页面下载已编译好的二进制文件（推荐），https://github.com/cncases/cases/releases</p><p>我用的系统是windows，所以下载的是 v0.0.5-x86_64-pc-windows-msvc.zip</p><p><img src="https://imgoss.xgss.net/picgo/image-20240130141910186.png?aliyun" alt="image-20240130141910186"></p><h2 id="测试系统配置" tabindex="-1"><a class="header-anchor" href="#测试系统配置"><span>测试系统配置</span></a></h2><p>系统： windows11 专业版</p><p>CPU: i5-10400F CPU @ 2.90GHz</p><p>内存：24G</p><p>硬盘： 1T机械硬盘 (至少要有500G的空余空间)</p><h2 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h2><p>参考配置文件： https://github.com/cncases/cases/blob/main/config.toml</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>配置文件参考config.toml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>db = &quot;./rocksdb&quot;  # path to store rocksdb</span></span>
<span class="line"><span>index_path =&quot;./search_index&quot;  # path to store index</span></span>
<span class="line"><span>index_with_full_text = false  # whether establish full-text index</span></span>
<span class="line"><span>addr = &quot;127.0.0.1:8081&quot; # If allow LAN access, change it to &quot;0.0.0.0:port&quot;.</span></span>
<span class="line"><span></span></span>
<span class="line"><span># The raw data path you downloaded from the torrent, and you must NOT unzip it. 注意路径</span></span>
<span class="line"><span>raw_data_path = &quot;./&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="将数据加载到-rocksdb-数据库中" tabindex="-1"><a class="header-anchor" href="#将数据加载到-rocksdb-数据库中"><span>将数据加载到 rocksdb 数据库中</span></a></h2><p>运行 <code>convert config.toml</code> 程序。此过程会将原始数据放入 rocksdb 数据库中，数据库文件路径为 <code>config.toml</code> 中的 <code>db</code> 变量；转换后的数据大小约为 200G，转换可能会花费数小时的时间；如果中途中断，再次运行会从中断处继续。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>$ ./convert.exe config.toml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20240130142749752.png?aliyun" alt="image-20240130142749752"></p><p>系统资源占用情况</p><p><img src="https://imgoss.xgss.net/picgo/image-20240130143052227.png?aliyun" alt="image-20240130143052227"></p><p>开始时间： 14:30</p><p>结束时间：17:00</p><p>一共两个半小时，根据个人系统配置高低有关系。</p><p>生成rocksdb目录有184G大小。</p><p><img src="https://imgoss.xgss.net/picgo/image-20240130170639698.png?aliyun" alt="image-20240130170639698"></p><h2 id="创建索引" tabindex="-1"><a class="header-anchor" href="#创建索引"><span>创建索引</span></a></h2><p>运行 <code>index config.toml</code> 程序会将数据库中的数据创建索引，索引文件路径为 <code>config.toml</code> 中的 <code>index_path</code> 变量；如果中途中断，需要删除 <code>index_path</code> 中的文件，重新运行 <code>index</code> 程序；默认情况下，不会索引案件内容，索引大小约为 15.5G，可能会花费数小时的时间。如果需要索引案件内容，需要将index.toml中的 <code>index_with_full_text</code> 设置为 <code>true</code>，但是这会使索引文件增加到150G左右，索引时间也会增加到十几个小时。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>$ ./index.exe config.toml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo/image-20240130170717992.png?aliyun" alt="image-20240130170717992"></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>开始时间： 2024-01-30 09:07:18</span></span>
<span class="line"><span>结束时间： 2024-02-01 03:14:18</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>一共花费了70多个小时</p><p>生成search_index目录有15.4G大小。</p><p><img src="https://imgoss.xgss.net/picgo/image-20240201134120524.png?aliyun" alt="image-20240201134120524"></p><h2 id="运行搜索服务" tabindex="-1"><a class="header-anchor" href="#运行搜索服务"><span>运行搜索服务</span></a></h2><p>运行 <code>main config.toml</code> 程序，用浏览器打开<code>config.toml</code>网址，即可搜索。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>$ ./main.exe config.toml</span></span>
<span class="line"><span>2024-02-01T05:38:57.369799Z  INFO main: listening on http://127.0.0.1:8081</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器访问： http://127.0.0.1:8081</p><p>访问截图</p><p><img src="https://imgoss.xgss.net/picgo/image-20240201134047893.png?aliyun" alt="image-20240201134047893"></p><p><img src="https://imgoss.xgss.net/picgo/image-20240201134815603.png?aliyun" alt="image-20240201134815603"></p><p>至此，开源项目搭建中国裁判文书网本地搜索WEB系统完成。</p>`,49)]))}const d=s(t,[["render",p]]),o=JSON.parse('{"path":"/article/t67ykqec/","title":"开源项目搭建中国裁判文书网本地搜索","lang":"en-US","frontmatter":{"title":"开源项目搭建中国裁判文书网本地搜索","createTime":"2025/05/27 17:51:17","permalink":"/article/t67ykqec/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":2.8,"words":841},"filePathRelative":"kaiyuan/Open-Source-Software/开源项目搭建中国裁判文书网本地搜索.md"}');export{d as comp,o as data};
