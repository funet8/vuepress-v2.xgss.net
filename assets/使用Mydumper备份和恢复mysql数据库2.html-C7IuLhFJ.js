import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as e,o as i}from"./app-BiQR_lPj.js";const l={};function d(p,s){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="数据库备份谁更快-mydumper-vs-mysqldump-实测对比" tabindex="-1"><a class="header-anchor" href="#数据库备份谁更快-mydumper-vs-mysqldump-实测对比"><span>数据库备份谁更快？mydumper VS mysqldump 实测对比</span></a></h1><p>在日常运维或者开发环境中，<strong>数据库备份与恢复</strong>都是绕不开的话题。MySQL 官方自带的 <code>mysqldump</code> 工具一直是很多人的首选，但随着数据量的增长，<code>mysqldump</code> 在速度和效率上的短板越来越明显。于是，社区里出现了性能更强的替代方案——<code>mydumper</code>/<code>myloader</code>。</p><p>今天星哥就带大家做一个实测对比，看看 <strong>mysqldump 和 mydumper 在备份、恢复上的速度差距</strong>，结果可能会让你有点惊讶。</p><ul><li><strong>备份工具</strong>：<code>mydumper</code> vs <code>mysqldump</code></li><li><strong>恢复工具</strong>：<code>myloader</code> vs <code>mysql</code></li></ul><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1757758263065.png?tx" alt="img"></p><h2 id="测试环境说明" tabindex="-1"><a class="header-anchor" href="#测试环境说明"><span>测试环境说明</span></a></h2><p>为了保证对比公平，我们在相同环境下进行了测试：</p><ul><li><strong>数据库版本</strong>：MySQL 5.7</li><li><strong>数据量</strong>：数据库约 24 万行，总大小约 20GB</li><li><strong>硬件配置</strong>：8 核 CPU，32GB 内存，SSD 硬盘</li><li><strong>工具版本</strong>： <ul><li>mysqldump：MySQL 官方自带版本</li><li>mydumper/myloader：v0.19.4</li></ul></li></ul><p>备份星哥玩云的的wordpress数据库，DB总共有24万条左右的数据</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1757663730310.png?tx" alt="img"></p><h2 id="mydumper-备份时间的命令" tabindex="-1"><a class="header-anchor" href="#mydumper-备份时间的命令"><span>mydumper 备份时间的命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>DB_user=&#39;root&#39; #改成你的</span></span>
<span class="line"><span>DB_host=&#39;X.X.X.X&#39; #改成你的</span></span>
<span class="line"><span>DB_port=&#39;3306&#39;</span></span>
<span class="line"><span>DB_passwd=&#39;12345678&#39;  #改成你的</span></span>
<span class="line"><span>DB_name=&#39;dbname&#39;  #改成你的</span></span>
<span class="line"><span>DB_backup_pwd=&#39;/data/backup/mysql/xgss_mydumper&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>计算备份时间</span></span>
<span class="line"><span>start_time=$(date +%s)</span></span>
<span class="line"><span>mydumper -u $DB_user -h $DB_host -p $DB_passwd  -P $DB_port -B $DB_name  -o $DB_backup_pwd</span></span>
<span class="line"><span>end_time=$(date +%s)</span></span>
<span class="line"><span>echo &quot;备份耗时：$((end_time - start_time)) 秒&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mydumper-备份成功" tabindex="-1"><a class="header-anchor" href="#mydumper-备份成功"><span>mydumper 备份成功</span></a></h2><h3 id="备份时间" tabindex="-1"><a class="header-anchor" href="#备份时间"><span>备份时间</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>备份耗时：509 秒</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="备份目录大小" tabindex="-1"><a class="header-anchor" href="#备份目录大小"><span>备份目录大小</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>du -sh /data/backup/mysql/xgss_mydumper</span></span>
<span class="line"><span>256M    /data/backup/mysql/xgss_mydumper</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="myloader恢复数据库" tabindex="-1"><a class="header-anchor" href="#myloader恢复数据库"><span>myloader恢复数据库</span></a></h2><p>将刚才备份的数据库恢复到本机</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>start_time=$(date +%s)</span></span>
<span class="line"><span>myloader -u root -p &#39;123456&#39; -h 127.0.0.1 -P 3306 -B www_xgss_net -d /data/backup/mysql/xgss_mydumper</span></span>
<span class="line"><span>end_time=$(date +%s)</span></span>
<span class="line"><span>echo &quot;恢复耗时：$((end_time - start_time)) 秒&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际显示如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@node8 ~]# start_time=$(date +%s)</span></span>
<span class="line"><span>[root@node8 ~]# myloader -u root  -h 127.0.0.1 -P 61922 -p &#39;123456&#39; -B www_xgss_net -d /data/backup/mysql/xgss_mydumper</span></span>
<span class="line"><span>end_time=$(date +%s)</span></span>
<span class="line"><span>echo &quot;备份耗时：$((end_time - start_time)) 秒&quot;</span></span>
<span class="line"><span>[root@node8 ~]# end_time=$(date +%s)</span></span>
<span class="line"><span>[root@node8 ~]# echo &quot;备份耗时：$((end_time - start_time)) 秒&quot;</span></span>
<span class="line"><span>备份耗时：3 秒</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td><code>-u</code> / <code>-p</code> / <code>-h</code> / <code>-P</code></td><td>数据库连接信息</td></tr><tr><td><code>-B db01</code></td><td>恢复到的目标数据库（不存在会自动创建）</td></tr><tr><td><code>-d</code></td><td>备份目录（mydumper 输出目录）</td></tr><tr><td><code>-t 6</code></td><td>恢复线程数（可根据 CPU/IO 调整）</td></tr><tr><td><code>-o</code></td><td>覆盖已存在的表（DROP 后重建）</td></tr><tr><td><code>-v 3</code></td><td>日志详细级别（1~3）</td></tr></tbody></table><h3 id="恢复之后查看表" tabindex="-1"><a class="header-anchor" href="#恢复之后查看表"><span>恢复之后查看表</span></a></h3><p>为什么行数会变多？看看什么原因</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1757666191025.png?tx" alt="img"></p><h2 id="mysqldump-备份时间的命令" tabindex="-1"><a class="header-anchor" href="#mysqldump-备份时间的命令"><span>mysqldump 备份时间的命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>DB_user=&#39;root&#39; #改成你的</span></span>
<span class="line"><span>DB_host=&#39;X.X.X.X&#39; #改成你的</span></span>
<span class="line"><span>DB_port=&#39;3306&#39;</span></span>
<span class="line"><span>DB_passwd=&#39;12345678&#39;  #改成你的</span></span>
<span class="line"><span>DB_name=&#39;dbname&#39;  #改成你的</span></span>
<span class="line"><span>DB_backup_pwd=&#39;/data/backup/mysql/xgss_mysqldump&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mkdir -p $DB_backup_pwd</span></span>
<span class="line"><span></span></span>
<span class="line"><span>start_time=$(date +%s)</span></span>
<span class="line"><span>mysqldump -u $DB_user -h $DB_host -P $DB_port -p$DB_passwd  $DB_name &gt; $DB_backup_pwd/$DB_name.sql</span></span>
<span class="line"><span>end_time=$(date +%s)</span></span>
<span class="line"><span>echo &quot;备份耗时：$((end_time - start_time)) 秒&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysqldump-备份成功" tabindex="-1"><a class="header-anchor" href="#mysqldump-备份成功"><span>mysqldump 备份成功</span></a></h2><h3 id="备份时间-1" tabindex="-1"><a class="header-anchor" href="#备份时间-1"><span>备份时间</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>备份耗时：445 秒</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="备份目录大小-1" tabindex="-1"><a class="header-anchor" href="#备份目录大小-1"><span>备份目录大小</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>du -sh /data/backup/mysql/xgss_mysqldump</span></span>
<span class="line"><span>256M    /data/backup/mysql/xgss_mysqldump</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql恢复数据库" tabindex="-1"><a class="header-anchor" href="#mysql恢复数据库"><span>mysql恢复数据库</span></a></h2><p>恢复命令</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>start_time=$(date +%s)</span></span>
<span class="line"><span>mysql -u root -h 127.0.0.1 -P 61922 -p&#39;123456&#39; www_xgss_net2 &lt; /data/backup/mysql/xgss_mysqldump/xgss2.sql</span></span>
<span class="line"><span>end_time=$(date +%s)</span></span>
<span class="line"><span>echo &quot;备份耗时：$((end_time - start_time)) 秒&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="备份耗时" tabindex="-1"><a class="header-anchor" href="#备份耗时"><span>备份耗时</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>备份耗时：22 秒</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>备份前的数据量</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mysql&gt; SELECT SUM(table_rows) AS total_rows</span></span>
<span class="line"><span>FROM information_schema.tables</span></span>
<span class="line"><span>WHERE table_schema = &#39;www_xgss_net&#39;;</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>| total_rows |</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>| 274473     |</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>1 row in set (0.02 sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>恢复之后的数据量</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mysql&gt; SELECT SUM(table_rows) AS total_rows</span></span>
<span class="line"><span>FROM information_schema.tables</span></span>
<span class="line"><span>WHERE table_schema = &#39;www_xgss_net&#39;;</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>| total_rows |</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>| 304427     |</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>1 row in set (0.02 sec)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql&gt; SELECT SUM(table_rows) AS total_rows</span></span>
<span class="line"><span>FROM information_schema.tables</span></span>
<span class="line"><span>WHERE table_schema = &#39;www_xgss_net2&#39;;</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>| total_rows |</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>| 296875     |</span></span>
<span class="line"><span>+------------+</span></span>
<span class="line"><span>1 row in set (0.02 sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="结论" tabindex="-1"><a class="header-anchor" href="#结论"><span>结论</span></a></h2><table><thead><tr><th>工具</th><th>时间</th><th>mysql数据量</th></tr></thead><tbody><tr><td>mydumper</td><td>509秒</td><td>274473</td></tr><tr><td>myloader</td><td>3秒</td><td>304427</td></tr><tr><td>mysqldump</td><td>445秒</td><td>274473</td></tr><tr><td>mysql</td><td>22秒</td><td>296875</td></tr></tbody></table><p>通过本次对比测试，我们可以得到一个直观结论：</p><ul><li><strong>mysqldump/mysql</strong>：适合小型数据库、低频备份场景，工具简单、稳定，但在大数据量场景下效率较差。</li><li><strong>mydumper/myloader</strong>：在大规模数据库备份/恢复中优势显著，支持多线程并行，速度是 mysqldump/mysql 的 4~5 倍，非常适合线上高频备份和数据迁移。</li></ul>`,46)]))}const c=a(l,[["render",d]]),m=JSON.parse('{"path":"/mysql/%E4%BD%BF%E7%94%A8Mydumper%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8Dmysql%E6%95%B0%E6%8D%AE%E5%BA%932.html","title":"数据库备份谁更快？mydumper VS mysqldump 实测对比","lang":"en-US","frontmatter":{},"git":{"createdTime":1760001321000,"updatedTime":1760001321000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":1,"url":"https://github.com/star"}]},"readingTime":{"minutes":3.04,"words":911},"filePathRelative":"mysql/使用Mydumper备份和恢复mysql数据库2.md"}');export{c as comp,m as data};
