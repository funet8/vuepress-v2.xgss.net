import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as e,o as i}from"./app-BiQR_lPj.js";const p={};function r(o,s){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="docker部署开源私有云相册-给你的照片一个家" tabindex="-1"><a class="header-anchor" href="#docker部署开源私有云相册-给你的照片一个家"><span>Docker部署开源私有云相册，给你的照片一个家</span></a></h1><p>大家好，我是星哥，在这个数字化时代，照片不仅是一种记录生活的方式，更是一种方便并分享还原真时刻的工具。</p><p>访问云相册最大的惊喜是，您可以随时随地查看和分享图片，而且私密性且灵活的 PhotoPrism 是这款开源私有云相册的最大优势。</p><p>今天，我们将与您分享如何在云服务器上部署 PhotoPrism，以构建一个尊重您图片私密的解决方案。</p><h1 id="photoprism是个啥" tabindex="-1"><a class="header-anchor" href="#photoprism是个啥"><span>PhotoPrism是个啥</span></a></h1><p>PhotoPrism是一款适用于去中心化网络的人工智能照片应用程序。它利用最新技术自动标记和查找图片，而不会妨碍您。您可以在家中、私人服务器上或在云中运行它。</p><p>官方介绍：</p><p>PhotoPrism® is an AI-Powered Photos App for the Decentralized Web.</p><p>It makes use of the latest technologies to tag and find pictures automatically without getting in your way. You can run it at home, on a private server, or in the cloud.</p><p>开源地址：https://github.com/photoprism/photoprism</p><p><img src="https://imgoss.xgss.net/picgo/image-20241230185834205.png?aliyun" alt="image-20241230185834205"></p><h1 id="准备工作" tabindex="-1"><a class="header-anchor" href="#准备工作"><span>准备工作</span></a></h1><ul><li>云服务器、NAS、虚拟机等等（必须，云服务器：http://y.xgss.net/aliyun 或 https://y.xgss.net/tx）</li><li>已安装Docker或Docker Compose，如果不会看看我之前的教程，或者参考官方文档。</li></ul><h1 id="docker安装photoprism" tabindex="-1"><a class="header-anchor" href="#docker安装photoprism"><span>Docker安装photoprism</span></a></h1><h2 id="_1-新建目录" tabindex="-1"><a class="header-anchor" href="#_1-新建目录"><span>1.新建目录</span></a></h2><p>可以根据实际情况创建</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mkdir -p /data/docker/photoprism/Pictures # 原始媒体文件（请勿删除）</span></span>
<span class="line"><span>mkdir -p /data/docker/photoprism/storage # 目录要可写，存储文件夹用于缓存、数据库和附属文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-直接运行docker-run" tabindex="-1"><a class="header-anchor" href="#_2-直接运行docker-run"><span>2.直接运行docker run</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker run -itd \\</span></span>
<span class="line"><span>--restart always \\</span></span>
<span class="line"><span>--name photoprism \\</span></span>
<span class="line"><span>--security-opt seccomp=unconfined \\</span></span>
<span class="line"><span>--security-opt apparmor=unconfined \\</span></span>
<span class="line"><span>-p 2342:2342 \\</span></span>
<span class="line"><span>-e PHOTOPRISM_UPLOAD_NSFW=&quot;true&quot; \\</span></span>
<span class="line"><span>-e PHOTOPRISM_ADMIN_PASSWORD=&quot;insecure&quot; \\</span></span>
<span class="line"><span>-v /data/docker/photoprism/storage:/photoprism/storage \\</span></span>
<span class="line"><span>-v /data/docker/photoprism/Pictures:/photoprism/originals \\</span></span>
<span class="line"><span>photoprism/photoprism:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>国内的网络环境太差了，用了香港的节点，速度很快就好了。</p><h2 id="命令解释" tabindex="-1"><a class="header-anchor" href="#命令解释"><span>命令解释</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker run：Docker命令行工具用来创建并运行新容器的命令。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-itd：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-i：保持容器的标准输入（STDIN）打开，即使不附加到容器终端。</span></span>
<span class="line"><span>-t：分配一个伪终端。</span></span>
<span class="line"><span>-d：后台运行容器。</span></span>
<span class="line"><span>--restart always：设置容器的重启策略为“always”，这意味着无论容器因为什么原因退出，Docker都会自动重启它。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--name photoprism：为容器指定一个名称，这里是photoprism。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--security-opt seccomp=unconfined：设置安全选项，禁用seccomp（安全计算模式），允许容器内的进程执行任何系统调用。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--security-opt apparmor=unconfined：设置安全选项，禁用AppArmor（一个Linux内核安全模块），允许容器内的进程执行任何操作。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-p 2342:2342：将容器内部的2342端口映射到宿主机的2342端口，这样可以通过宿主机的2342端口访问容器内运行的服务。</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>-e PHOTOPRISM_ADMIN_PASSWORD=&quot;insecure&quot;：设置环境变量PHOTOPRISM_ADMIN_PASSWORD为insecure，这是PhotoPrism管理员账户的初始密码。出于安全考虑，建议在启动后立即更改密码。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-v /data/docker/photoprism/storage:/photoprism/storage：挂载卷，将宿主机的/data/docker/photoprism/storage目录挂载到容器的/photoprism/storage目录，用于存储PhotoPrism的数据。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-v /data/docker/photoprism/Pictures:/photoprism/originals：挂载卷，将宿主机的/data/docker/photoprism/Pictures目录挂载到容器的/photoprism/originals目录，用于存储上传的照片。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>photoprism/photoprism:latest：指定要运行的Docker镜像，这里是photoprism/photoprism的最新版本。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>部署完成后，您可以通过访问http://localhost:2342来打开PhotoPrism的管理界面，默认账号为admin，密码为insecure（建议立即修改密码）</p><h1 id="docker-compose安装photoprism" tabindex="-1"><a class="header-anchor" href="#docker-compose安装photoprism"><span>Docker Compose安装photoprism</span></a></h1><p>选取一种方式安装即可。</p><h2 id="_1-docker-compose配置文件" tabindex="-1"><a class="header-anchor" href="#_1-docker-compose配置文件"><span>1.Docker Compose配置文件</span></a></h2><p>首先，您需要下载PhotoPrism的docker-compose.yml文件：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>wget https://dl.photoprism.app/docker/docker-compose.yml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-修改配置文件" tabindex="-1"><a class="header-anchor" href="#_2-修改配置文件"><span>2.修改配置文件</span></a></h2><p>修改docker-compose.yml文件，指定数据持久化的位置和其他配置。</p><p>例如：</p><p>指定原始照片的存储位置和配置等元数据的存储位置。 设置网站标题、名称和文件大小限制等。</p><h2 id="_3-运行服务" tabindex="-1"><a class="header-anchor" href="#_3-运行服务"><span>3.运行服务</span></a></h2><p>完成配置后，执行以下命令来运行PhotoPrism服务：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker-compose up -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="使用photoprism" tabindex="-1"><a class="header-anchor" href="#使用photoprism"><span>使用photoprism</span></a></h1><p><img src="https://imgoss.xgss.net/picgo/image-20241230164612870.png?aliyun" alt="image-20241230164612870"></p><p>打开浏览器输入：localhost:2342，就能看到PhotoPrism的登录界面了。</p><p>第一次使用时需要设置管理员账号和密码。</p><p>初始账号是：admin，密码是：insecure，您后期可以在帐户设置页面上更改它。</p><p>登录好以后就可以进入到PhotoPrism界面来使用了。</p><h2 id="设置中文" tabindex="-1"><a class="header-anchor" href="#设置中文"><span>设置中文</span></a></h2><p>点击设置，Language</p><p><img src="https://imgoss.xgss.net/picgo/image-20241230164906326.png?aliyun" alt="image-20241230164906326"></p><h2 id="修改密码" tabindex="-1"><a class="header-anchor" href="#修改密码"><span>修改密码</span></a></h2><p>点击设置，账户，更改密码</p><p><img src="https://imgoss.xgss.net/picgo/image-20241230165100503.png?aliyun" alt="image-20241230165100503"></p><h2 id="上传图片" tabindex="-1"><a class="header-anchor" href="#上传图片"><span>上传图片</span></a></h2><p><img src="https://imgoss.xgss.net/picgo/image-20241230171923653.png?aliyun" alt="image-20241230171923653"></p><h1 id="结尾" tabindex="-1"><a class="header-anchor" href="#结尾"><span>结尾</span></a></h1><p>通过在云服务器上部署PhotoPrism，可以轻松搭建一个私有云相册，实现对个人照片的私密、安全、高效管理。本文仅为一个简单的部署指南，PhotoPrism还有更多高级功能等待用户探索。</p>`,51)]))}const d=a(p,[["render",r]]),c=JSON.parse('{"path":"/article/e14a0wtq/","title":"Docker部署开源私有云相册photoprism","lang":"en-US","frontmatter":{"title":"Docker部署开源私有云相册photoprism","createTime":"2025/05/27 17:51:17","permalink":"/article/e14a0wtq/"},"git":{"createdTime":1749111496000,"updatedTime":1750129445000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":2,"url":"https://github.com/star"}]},"readingTime":{"minutes":4.03,"words":1209},"filePathRelative":"kaiyuan/photo/Docker部署开源私有云相册photoprism.md"}');export{d as comp,c as data};
