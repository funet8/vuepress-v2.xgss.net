import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as e,o as i}from"./app-BiQR_lPj.js";const l={};function d(r,s){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="rocky-linux-9常用命令备忘录-不定时更新" tabindex="-1"><a class="header-anchor" href="#rocky-linux-9常用命令备忘录-不定时更新"><span>Rocky Linux 9常用命令备忘录(不定时更新)</span></a></h1><p>大家好，我是星哥，上次介绍了 <a href="https://mp.weixin.qq.com/s/Kku738eYzI80kOQh0G_KFw" target="_blank" rel="noopener noreferrer">Rocky Linux 9 系统安装配置图解教程并做简单配置</a> https://mp.weixin.qq.com/s/Kku738eYzI80kOQh0G_KFw</p><p>今天来介绍一下，Rocky Linux 9的常用命令。</p><p>Rocky Linux 是一款稳定、安全、开源的企业级 Linux 操作系统，适合作为服务器部署环境。本文将不定期更新记录我在日常使用 Rocky Linux 9 过程中常用、实用的命令，以便查阅和分享给同样在使用该系统的你。以下命令全部在root下进行，如果没有root权限可以在命令前添加 &#39;sudo&#39;。</p><p>不定期更新首发版：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>https://vuepress-v2.xgss.net/Rocky-Linux/2.Rocky-Linux-9常用命令备忘录.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1750064024584.png?tx" alt="img"></p><h1 id="基础信息查询" tabindex="-1"><a class="header-anchor" href="#基础信息查询"><span>基础信息查询</span></a></h1><h2 id="查看系统版本" tabindex="-1"><a class="header-anchor" href="#查看系统版本"><span>查看系统版本</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 查看系统版本</span></span>
<span class="line"><span>cat /etc/os-release</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看当前系统的发行版本信息</span></span>
<span class="line"><span>cat /etc/redhat-release </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看内核版本</span></span>
<span class="line"><span>uname -r</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看CPU架构</span></span>
<span class="line"><span>lscpu</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看内存信息</span></span>
<span class="line"><span>free -m</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看磁盘信息</span></span>
<span class="line"><span>lsblk</span></span>
<span class="line"><span>df -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="配置固定ip" tabindex="-1"><a class="header-anchor" href="#配置固定ip"><span>配置固定IP</span></a></h1><p>Rocky 9.x放弃了之前的网络配置目录/etc/sysconfig/network-scripts/，采用新的存储目录</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#进入网络配置文件目录</span></span>
<span class="line"><span>cd /etc/NetworkManager/system-connections</span></span>
<span class="line"><span>vi /etc/NetworkManager/system-connections/ens160.nmconnection</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[connection]</span></span>
<span class="line"><span>id=ens160</span></span>
<span class="line"><span>uuid=332fef8b-1a06-386a-a585-d59df1f5ef61</span></span>
<span class="line"><span>type=ethernet</span></span>
<span class="line"><span>autoconnect-priority=-999</span></span>
<span class="line"><span>interface-name=ens160</span></span>
<span class="line"><span>timestamp=1749758331</span></span>
<span class="line"><span>[ethernet]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[ipv4]</span></span>
<span class="line"><span>method=auto</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>[ipv6]</span></span>
<span class="line"><span>addr-gen-mode=eui64</span></span>
<span class="line"><span>method=auto</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[proxy]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>找到 [ipv4] 部分，并修改 address 和 dns 设置。比如，将 IP 地址修改为 192.168.152.139，网关为 192.168.152.1</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>修改[ipv4]里面的地址</span></span>
<span class="line"><span>method=auto</span></span>
<span class="line"><span></span></span>
<span class="line"><span>自动获取改为</span></span>
<span class="line"><span>address=192.168.152.139/24,192.168.152.1</span></span>
<span class="line"><span>dns=114.114.114.114;8.8.8.8</span></span>
<span class="line"><span>method=manual</span></span>
<span class="line"><span></span></span>
<span class="line"><span>:wq! #保存退出</span></span>
<span class="line"><span>再重启系统</span></span>
<span class="line"><span>reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="修改主机名" tabindex="-1"><a class="header-anchor" href="#修改主机名"><span>修改主机名</span></a></h1><p>设置主机名为 node139</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#设置主机名为 node139 </span></span>
<span class="line"><span>hostnamectl set-hostname node139</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="配置国内软件源" tabindex="-1"><a class="header-anchor" href="#配置国内软件源"><span>配置国内软件源</span></a></h1><h2 id="_1-备份默认源" tabindex="-1"><a class="header-anchor" href="#_1-备份默认源"><span>1.备份默认源</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cp -a /etc/yum.repos.d/ /etc/yum.repos.d-bak/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-替换阿里云源" tabindex="-1"><a class="header-anchor" href="#_2-替换阿里云源"><span>2.替换阿里云源</span></a></h2><p>不能用会报错！不能用会报错！不能用会报错！</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \\</span></span>
<span class="line"><span>    -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g&#39; \\</span></span>
<span class="line"><span>    -i.bak \\</span></span>
<span class="line"><span>    /etc/yum.repos.d/[Rr]ocky*.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1749783593650.png?tx" alt="img"></p><p>或者替换清华大学源</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sudo sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \\</span></span>
<span class="line"><span>         -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.tuna.tsinghua.edu.cn/rocky|g&#39; \\</span></span>
<span class="line"><span>         -i.bak \\</span></span>
<span class="line"><span>         /etc/yum.repos.d/Rocky-*.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-清理缓存并更新" tabindex="-1"><a class="header-anchor" href="#_3-清理缓存并更新"><span>3.清理缓存并更新</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf clean all</span></span>
<span class="line"><span>dnf makecache</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="软件管理-dnf" tabindex="-1"><a class="header-anchor" href="#软件管理-dnf"><span>软件管理（dnf）</span></a></h1><h2 id="安装常用工具" tabindex="-1"><a class="header-anchor" href="#安装常用工具"><span>安装常用工具</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf install -y vim wget curl lrzsz net-tools lsof bash-completion yum-utils tar zip unzip sudo cronie chrony policycoreutils-python-utils</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="更新系统" tabindex="-1"><a class="header-anchor" href="#更新系统"><span>更新系统</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf update -y</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1749782132189.png?tx" alt="img"></p><h2 id="更新软件包索引" tabindex="-1"><a class="header-anchor" href="#更新软件包索引"><span>更新软件包索引</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf check-update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="安装软件包" tabindex="-1"><a class="header-anchor" href="#安装软件包"><span>安装软件包</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf install -y 软件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="删除软件包" tabindex="-1"><a class="header-anchor" href="#删除软件包"><span>删除软件包</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf remove -y 软件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="搜索软件包" tabindex="-1"><a class="header-anchor" href="#搜索软件包"><span>搜索软件包</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf search 软件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="列出已安装的软件" tabindex="-1"><a class="header-anchor" href="#列出已安装的软件"><span>列出已安装的软件</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf list installed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="用户与权限管理" tabindex="-1"><a class="header-anchor" href="#用户与权限管理"><span>用户与权限管理</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 添加用户</span></span>
<span class="line"><span>useradd 用户名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 设置用户密码</span></span>
<span class="line"><span>passwd 用户名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 添加用户到sudo组</span></span>
<span class="line"><span>usermod -aG wheel 用户名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 删除用户及其家目录</span></span>
<span class="line"><span>userdel -r 用户名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="禁用selinux" tabindex="-1"><a class="header-anchor" href="#禁用selinux"><span>禁用SELinux</span></a></h1><p>为什么要禁用SELinux？</p><p>某些软件或应用程序可能没有正确配置 SELinux 策略，导致它们无法正常运行。例如，一些旧版软件可能不支持 SELinux，需要禁用 SELinux 来避免访问被限制或拒绝。</p><p>1.确认grubby软件包是否已经安装</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@node139 ~]# rpm -q grubby</span></span>
<span class="line"><span>grubby-8.40-64.el9.x86_64</span></span>
<span class="line"><span>[root@node139 ~]# getenforce</span></span>
<span class="line"><span>Enforcing</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.添加selinux=0到内核命令行</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>grubby --update-kernel ALL --args selinux=0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3.重启系统</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>shutdown -r now</span></span>
<span class="line"><span>或者</span></span>
<span class="line"><span>reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.查看结果，结果为Disabled 则修改成功</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@node139 ~]# getenforce</span></span>
<span class="line"><span>Disabled</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="常用开关机、重启命令" tabindex="-1"><a class="header-anchor" href="#常用开关机、重启命令"><span>常用开关机、重启命令</span></a></h1><h2 id="重启系统" tabindex="-1"><a class="header-anchor" href="#重启系统"><span>重启系统</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl reboot</span></span>
<span class="line"><span>init 6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>init 6 和reboot有什么区别：</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1750063388272.png?tx" alt="img"></p><h3 id="为什么不推荐-init-6" tabindex="-1"><a class="header-anchor" href="#为什么不推荐-init-6"><span>为什么不推荐 init 6</span></a></h3><p>init 6 是老式 System V 风格的命令，依赖 /etc/inittab 等老旧机制。</p><p>在 systemd 中，它是由兼容层模拟支持，未来可能会移除。</p><p>某些系统上 init 6 可能无法处理挂载点、服务优雅终止等过程，存在稳定性隐患。</p><h2 id="关机" tabindex="-1"><a class="header-anchor" href="#关机"><span>关机</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>poweroff</span></span>
<span class="line"><span>shutdown -h now</span></span>
<span class="line"><span>systemctl poweroff</span></span>
<span class="line"><span></span></span>
<span class="line"><span>init 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="定时关机-例如5分钟后关机" tabindex="-1"><a class="header-anchor" href="#定时关机-例如5分钟后关机"><span>定时关机（例如5分钟后关机）</span></a></h3><p>（+5 表示 5 分钟后）</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>shutdown -h +5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="定时重启-例如22-30重启" tabindex="-1"><a class="header-anchor" href="#定时重启-例如22-30重启"><span>定时重启（例如22:30重启）</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>shutdown -r 22:30</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="取消已设置的定时关机-重启" tabindex="-1"><a class="header-anchor" href="#取消已设置的定时关机-重启"><span>取消已设置的定时关机/重启</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>shutdown -c</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="重启进入紧急-emergency-模式" tabindex="-1"><a class="header-anchor" href="#重启进入紧急-emergency-模式"><span>重启进入紧急（emergency）模式</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl emergency</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="重启进入救援-rescue-模式" tabindex="-1"><a class="header-anchor" href="#重启进入救援-rescue-模式"><span>重启进入救援（rescue）模式</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl rescue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="其他有用的相关命令" tabindex="-1"><a class="header-anchor" href="#其他有用的相关命令"><span>其他有用的相关命令</span></a></h2><h2 id="注销当前用户-退出会话" tabindex="-1"><a class="header-anchor" href="#注销当前用户-退出会话"><span>注销当前用户（退出会话）</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>logout</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或（在 GUI 或图形界面环境中）：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>gnome-session-quit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="查看系统启动时间" tabindex="-1"><a class="header-anchor" href="#查看系统启动时间"><span>查看系统启动时间</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>uptime</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或更详细：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>who -b</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="查看系统上次重启日志" tabindex="-1"><a class="header-anchor" href="#查看系统上次重启日志"><span>查看系统上次重启日志</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>last reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="系统服务管理" tabindex="-1"><a class="header-anchor" href="#系统服务管理"><span>系统服务管理</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 启动服务</span></span>
<span class="line"><span>systemctl start 服务名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 停止服务</span></span>
<span class="line"><span>systemctl stop 服务名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 重启服务</span></span>
<span class="line"><span>systemctl restart 服务名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看服务状态</span></span>
<span class="line"><span>systemctl status 服务名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 设置服务开机启动</span></span>
<span class="line"><span>systemctl enable 服务名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 禁用服务开机启动</span></span>
<span class="line"><span>systemctl disable 服务名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="防火墙常用命令" tabindex="-1"><a class="header-anchor" href="#防火墙常用命令"><span>防火墙常用命令</span></a></h1><h2 id="最常用的命令" tabindex="-1"><a class="header-anchor" href="#最常用的命令"><span>最常用的命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 查看状态</span></span>
<span class="line"><span># systemctl status firewalld</span></span>
<span class="line"><span></span></span>
<span class="line"><span>开启端口:</span></span>
<span class="line"><span>firewall-cmd --zone=public --add-port=80/tcp --permanent</span></span>
<span class="line"><span>firewall-cmd --zone=public --add-port=443/tcp --permanent</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall-cmd --zone=public --add-port=22/tcp --permanent</span></span>
<span class="line"><span>firewall-cmd --zone=public --add-port=60920/tcp --permanent</span></span>
<span class="line"><span>firewall-cmd --reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#允许某个IP</span></span>
<span class="line"><span>firewall-cmd --permanent --add-rich-rule=&#39;rule family=&quot;ipv4&quot; source address=&quot;192.168.1.100&quot; accept&#39;</span></span>
<span class="line"><span>firewall-cmd --reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 允许内网192.168.1.X 所有的ip开放</span></span>
<span class="line"><span>firewall-cmd --zone=public --add-source=192.168.1.0/24 --permanent</span></span>
<span class="line"><span>firewall-cmd --reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall-cmd --zone=public --add-source=172.18.19.0/20 --permanent</span></span>
<span class="line"><span>firewall-cmd --reload</span></span>
<span class="line"><span># 查看所有端口</span></span>
<span class="line"><span>firewall-cmd --zone=public --list-ports</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看 firewall-cmd 当前开放的所有规则</span></span>
<span class="line"><span>firewall-cmd --list-all</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查询端口号80 是否开启：</span></span>
<span class="line"><span>firewall-cmd --query-port=80/tcp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重启防火墙：</span></span>
<span class="line"><span>firewall-cmd --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置防火墙允许ssh" tabindex="-1"><a class="header-anchor" href="#配置防火墙允许ssh"><span>配置防火墙允许SSH</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>允许 SSH 服务：  </span></span>
<span class="line"><span>firewall-cmd --permanent --add-service=ssh</span></span>
<span class="line"><span>firewall-cmd --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="一、基本操作命令" tabindex="-1"><a class="header-anchor" href="#一、基本操作命令"><span>一、基本操作命令</span></a></h2><h3 id="启动-firewalld" tabindex="-1"><a class="header-anchor" href="#启动-firewalld"><span>启动 firewalld</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl start firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="停止-firewalld" tabindex="-1"><a class="header-anchor" href="#停止-firewalld"><span>停止 firewalld</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl stop firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="重启-firewalld" tabindex="-1"><a class="header-anchor" href="#重启-firewalld"><span>重启 firewalld</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl restart firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="设置firewalld开机启动" tabindex="-1"><a class="header-anchor" href="#设置firewalld开机启动"><span>设置firewalld开机启动</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl enable firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="关闭firewalld开机启动" tabindex="-1"><a class="header-anchor" href="#关闭firewalld开机启动"><span>关闭firewalld开机启动</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl disable firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="查看firewalld状态" tabindex="-1"><a class="header-anchor" href="#查看firewalld状态"><span>查看firewalld状态</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl status firewalld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="检查防火墙是否运行" tabindex="-1"><a class="header-anchor" href="#检查防火墙是否运行"><span>检查防火墙是否运行</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --state</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="二、firewall-cmd开放或关闭端口" tabindex="-1"><a class="header-anchor" href="#二、firewall-cmd开放或关闭端口"><span>二、firewall-cmd开放或关闭端口</span></a></h2><h3 id="临时开放端口" tabindex="-1"><a class="header-anchor" href="#临时开放端口"><span>临时开放端口</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --add-port=80/tcp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="移除临时端口" tabindex="-1"><a class="header-anchor" href="#移除临时端口"><span>移除临时端口</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --remove-port=80/tcp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="永久开放端口" tabindex="-1"><a class="header-anchor" href="#永久开放端口"><span>永久开放端口</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --add-port=80/tcp --permanent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="移除永久端口" tabindex="-1"><a class="header-anchor" href="#移除永久端口"><span>移除永久端口</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --remove-port=80/tcp --permanent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="重载规则-永久更改后必须" tabindex="-1"><a class="header-anchor" href="#重载规则-永久更改后必须"><span>重载规则（永久更改后必须）</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="三、firewall-cmd管理服务" tabindex="-1"><a class="header-anchor" href="#三、firewall-cmd管理服务"><span>三、firewall-cmd管理服务</span></a></h2><h3 id="查看支持的服务列表" tabindex="-1"><a class="header-anchor" href="#查看支持的服务列表"><span>查看支持的服务列表</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --get-services</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="添加服务-如-http、ssh" tabindex="-1"><a class="header-anchor" href="#添加服务-如-http、ssh"><span>添加服务（如 http、ssh）</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --add-service=http --permanent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="删除服务" tabindex="-1"><a class="header-anchor" href="#删除服务"><span>删除服务</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --remove-service=http --permanent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ip-与接口管理" tabindex="-1"><a class="header-anchor" href="#ip-与接口管理"><span>IP 与接口管理</span></a></h3><h3 id="允许某个ip访问" tabindex="-1"><a class="header-anchor" href="#允许某个ip访问"><span>允许某个IP访问</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --permanent --add-rich-rule=&#39;rule family=&quot;ipv4&quot; source address=&quot;192.168.1.100&quot; accept&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="拒绝某个ip访问" tabindex="-1"><a class="header-anchor" href="#拒绝某个ip访问"><span>拒绝某个IP访问</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --permanent --add-rich-rule=&#39;rule family=&quot;ipv4&quot; source address=&quot;192.168.1.100&quot; reject&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="限制某接口的区域" tabindex="-1"><a class="header-anchor" href="#限制某接口的区域"><span>限制某接口的区域</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --change-interface=eth0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="示例-放开某个网段" tabindex="-1"><a class="header-anchor" href="#示例-放开某个网段"><span>示例-放开某个网段</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --permanent --add-rich-rule=&#39;rule family=&quot;ipv4&quot; source address=&quot;192.168.0.0/24&quot; accept&#39;</span></span>
<span class="line"><span>firewall-cmd --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小技巧" tabindex="-1"><a class="header-anchor" href="#小技巧"><span>小技巧</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>--permanent 表示永久修改配置，否则是临时修改（重启防火墙后失效）；</span></span>
<span class="line"><span>--zone=public 指的是区域名，可以替换为 home, internal, external 等；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>建议修改完永久规则后执行 firewall-cmd --reload 应用更改。</p><h2 id="四、firewall-cmd查看当前配置" tabindex="-1"><a class="header-anchor" href="#四、firewall-cmd查看当前配置"><span>四、firewall-cmd查看当前配置</span></a></h2><h3 id="查看默认区域" tabindex="-1"><a class="header-anchor" href="#查看默认区域"><span>查看默认区域</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --get-default-zone</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在 firewalld 中，“区域（zone）”表示一组网络接口或源地址对应的一套防火墙规则。默认区域是指：</p><p>没有特别指定区域的网络接口，或者新添加的接口，会默认套用这个区域的规则。</p><h3 id="查看所有区域" tabindex="-1"><a class="header-anchor" href="#查看所有区域"><span>查看所有区域</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --get-zones</span></span>
<span class="line"><span></span></span>
<span class="line"><span>实际</span></span>
<span class="line"><span>[root@node139 ~]# firewall-cmd --get-default-zone</span></span>
<span class="line"><span>public</span></span>
<span class="line"><span>[root@node139 ~]# firewall-cmd --get-zones</span></span>
<span class="line"><span>block dmz drop external home internal nm-shared public trusted work</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看当前活动的区域" tabindex="-1"><a class="header-anchor" href="#查看当前活动的区域"><span>查看当前活动的区域</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --get-active-zones</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="查看某个区域详细信息" tabindex="-1"><a class="header-anchor" href="#查看某个区域详细信息"><span>查看某个区域详细信息</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>firewall-cmd --zone=public --list-all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="网络常用命令" tabindex="-1"><a class="header-anchor" href="#网络常用命令"><span>网络常用命令</span></a></h1><h2 id="安装常用网络工具包" tabindex="-1"><a class="header-anchor" href="#安装常用网络工具包"><span>安装常用网络工具包</span></a></h2><p>推荐一次装好</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf install -y net-tools iproute bind-utils traceroute telnet nmap nc ethtool tcpdump</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="比较常用的常用命令" tabindex="-1"><a class="header-anchor" href="#比较常用的常用命令"><span>比较常用的常用命令</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 查看IP地址</span></span>
<span class="line"><span>ip a</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 配置静态IP </span></span>
<span class="line"><span>cd /etc/NetworkManager/system-connections</span></span>
<span class="line"><span>ls</span></span>
<span class="line"><span># 重启网络服务</span></span>
<span class="line"><span>systemctl restart NetworkManager</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看开放端口</span></span>
<span class="line"><span>ss -tuln</span></span>
<span class="line"><span>netstat -tunpl</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 测试连通性</span></span>
<span class="line"><span>ping 地址</span></span>
<span class="line"><span>curl 地址</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="一、网络配置与查看" tabindex="-1"><a class="header-anchor" href="#一、网络配置与查看"><span>一、网络配置与查看</span></a></h2><table><thead><tr><th>目的</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>查看 IP 地址</td><td><code>ip a</code> 或 <code>ip addr</code></td><td>替代 <code>ifconfig</code>，查看所有网卡的 IP 地址</td></tr><tr><td>查看网络接口信息</td><td><code>ip link</code></td><td>查看网络接口设备状态</td></tr><tr><td>启用某个网卡</td><td><code>ip link set eth0 up</code></td><td>启动指定接口</td></tr><tr><td>禁用某个网卡</td><td><code>ip link set eth0 down</code></td><td>关闭指定接口</td></tr><tr><td>查看路由信息</td><td><code>ip route</code></td><td>查看当前路由表</td></tr><tr><td>添加临时路由</td><td><code>ip route add 192.168.1.0/24 via 192.168.0.1</code></td><td>添加静态路由（临时）</td></tr></tbody></table><h2 id="二、网络诊断与测试" tabindex="-1"><a class="header-anchor" href="#二、网络诊断与测试"><span>二、网络诊断与测试</span></a></h2><table><thead><tr><th>目的</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>Ping 测试</td><td><code>ping 8.8.8.8</code> 或 <code>ping www.baidu.com</code></td><td>测试网络连通性</td></tr><tr><td>Traceroute 路由追踪</td><td><code>traceroute 8.8.8.8</code></td><td>查看数据包经过路径（需安装）</td></tr><tr><td>DNS 查询</td><td><code>dig www.google.com</code> 或 <code>nslookup www.baidu.com</code></td><td>DNS 解析测试（需安装）</td></tr><tr><td>查看端口连接</td><td><code>ss -tuln</code></td><td>查看监听端口，替代 netstat</td></tr><tr><td>检查端口连通性</td><td><code>telnet 192.168.0.1 80</code> 或 <code>nc -zv 192.168.0.1 80</code></td><td>测试端口是否开放</td></tr></tbody></table><h2 id="三、网络服务与状态管理" tabindex="-1"><a class="header-anchor" href="#三、网络服务与状态管理"><span>三、网络服务与状态管理</span></a></h2><p>如果你希望完全使用传统的 network.service，你需要手动禁用 NetworkManager 并启用传统的网络管理服务：</p><p>禁用 NetworkManager 服务</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>systemctl stop NetworkManager</span></span>
<span class="line"><span>systemctl disable NetworkManager</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>启用 network.service 服务：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>dnf install -y network-scripts</span></span>
<span class="line"><span>systemctl enable network</span></span>
<span class="line"><span>systemctl start network</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>目的</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>重启网络服务（旧方式）</td><td><code>systemctl restart network</code></td><td>仅适用于 <code>network</code> 服务启用情况</td></tr><tr><td>使用 NetworkManager 重启网络</td><td><code>nmcli networking off &amp;&amp; nmcli networking on</code></td><td>推荐使用方式</td></tr><tr><td>查看当前连接状态</td><td><code>nmcli device status</code></td><td>查看网络接口状态</td></tr><tr><td>设置静态 IP（命令行）</td><td><code>nmtui</code></td><td>图形化 TUI 工具，推荐新手使用</td></tr></tbody></table><p>图形化 TUI 工具</p><p><img src="https://imgoss.xgss.net/picgo-tx2025/QQ_1750043564639.png?tx" alt="img"></p><h2 id="四、networkmanager-工具-nmcli" tabindex="-1"><a class="header-anchor" href="#四、networkmanager-工具-nmcli"><span>四、NetworkManager 工具（nmcli）</span></a></h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>nmcli connection show</code></td><td>显示所有连接配置文件</td></tr><tr><td><code>nmcli device show</code></td><td>显示所有设备的详细信息</td></tr><tr><td><code>nmcli connection up eth0</code></td><td>启动指定连接</td></tr><tr><td><code>nmcli connection down eth0</code></td><td>停止指定连接</td></tr><tr><td><code>nmcli connection edit</code></td><td>编辑连接（高级用法）</td></tr></tbody></table><h2 id="五、其他常用命令" tabindex="-1"><a class="header-anchor" href="#五、其他常用命令"><span>五、其他常用命令</span></a></h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>hostname</code> / <code>hostnamectl</code></td><td>查看或设置主机名</td></tr><tr><td><code>ethtool eth0</code></td><td>查看网卡驱动、速率等信息（需安装）</td></tr><tr><td><code>tcpdump -i eth0</code></td><td>抓包分析工具（需安装）</td></tr><tr><td><code>curl ifconfig.me</code></td><td>查看公网 IP 地址</td></tr></tbody></table><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#重启网络</span></span>
<span class="line"><span>nmcli n off &amp;&amp; nmcli n on </span></span>
<span class="line"><span></span></span>
<span class="line"><span>#用修改后的ip登录系统，查看ip地址</span></span>
<span class="line"><span>ip addr </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 显示网络设备的运行状态</span></span>
<span class="line"><span>ip link </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 显示更详细的设备信息</span></span>
<span class="line"><span>ip -s link </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 仅显示ens160的信息</span></span>
<span class="line"><span>ip link show dev ens160 </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 仅显示处于激活状态的设备</span></span>
<span class="line"><span>ip link show up </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 停ens160网络</span></span>
<span class="line"><span>ip link set ens160 down down</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 激活ens160</span></span>
<span class="line"><span>ip link set ens160 up </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 显示设备状态</span></span>
<span class="line"><span>nmcli device status </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 显示全部网络接口属性</span></span>
<span class="line"><span>nmcli device show </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 显示ens160网络接口属性</span></span>
<span class="line"><span>nmcli device show ens160 </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 激活网卡</span></span>
<span class="line"><span>nmcli device connect ens160 </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 停用网卡</span></span>
<span class="line"><span>nmcli device disconnect ens160 </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 掉ens160设备</span></span>
<span class="line"><span>nmcli connection down ens160 down </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 启用ens160设备</span></span>
<span class="line"><span>nmcli connection up ens160 </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 重新加载网卡</span></span>
<span class="line"><span>nmcli con reload </span></span>
<span class="line"><span></span></span>
<span class="line"><span># 可以查看帮助</span></span>
<span class="line"><span>nmcli con add help</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="文件查找与处理" tabindex="-1"><a class="header-anchor" href="#文件查找与处理"><span>文件查找与处理</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 查找文件</span></span>
<span class="line"><span>find /path -name 文件名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 快速定位（需先创建索引）</span></span>
<span class="line"><span>updatedb</span></span>
<span class="line"><span>locate 文件名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 搜索内容</span></span>
<span class="line"><span>grep &quot;关键词&quot; 文件名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 批量替换</span></span>
<span class="line"><span>sed -i &#39;s/旧内容/新内容/g&#39; 文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="设置时区、时间" tabindex="-1"><a class="header-anchor" href="#设置时区、时间"><span>设置时区、时间</span></a></h1><h2 id="查看所有时区信息" tabindex="-1"><a class="header-anchor" href="#查看所有时区信息"><span>查看所有时区信息</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl list-timezones</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="设置时区" tabindex="-1"><a class="header-anchor" href="#设置时区"><span>设置时区</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-timezone Asia/Shanghai</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="查看时区设置" tabindex="-1"><a class="header-anchor" href="#查看时区设置"><span>查看时区设置</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl show</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="显示状态信息" tabindex="-1"><a class="header-anchor" href="#显示状态信息"><span>显示状态信息</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="设置日期和时间" tabindex="-1"><a class="header-anchor" href="#设置日期和时间"><span>设置日期和时间</span></a></h2><p>格式为：YYYY-MM-DD HH:MM:SS。例如:将日期和时间设置为 2024 年 5 月 22 日 14:00:00</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-time &quot;2024-05-22 14:00:00&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="仅设置日期" tabindex="-1"><a class="header-anchor" href="#仅设置日期"><span>仅设置日期</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-time &quot;2024-05-22&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="仅设置时间" tabindex="-1"><a class="header-anchor" href="#仅设置时间"><span>仅设置时间</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-time &quot;14:00:00&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="启用-ntp" tabindex="-1"><a class="header-anchor" href="#启用-ntp"><span>启用 NTP</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-ntp true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="禁用-ntp" tabindex="-1"><a class="header-anchor" href="#禁用-ntp"><span>禁用 NTP</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>timedatectl set-ntp false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="显示当前日期和时间" tabindex="-1"><a class="header-anchor" href="#显示当前日期和时间"><span>显示当前日期和时间</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 显示当前日期和时间  </span></span>
<span class="line"><span>date  </span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 自定义日期和时间的输出格式，其中，\`%Y\` 表示四位数的年份，\`%m\` 表示月份，\`%d\` 表示日，\`%H\` 表示小时，\`%M\` 表示分钟，\`%S\` 表示秒。  </span></span>
<span class="line"><span>date +&quot;%Y-%m-%d %H:%M:%S&quot;  </span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 设置日期和时间 </span></span>
<span class="line"><span># 格式为：YYYY-MM-DD HH:MM:SS。例如:将日期和时间设置为 2024 年 5 月 22 日 14:00:00  </span></span>
<span class="line"><span>date --set=&quot;2024-05-22 14:00:00&quot;   </span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 仅设置日期</span></span>
<span class="line"><span>date +%Y-%m-%d -s &quot;2024-05-22&quot;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 仅设置时间</span></span>
<span class="line"><span>date +%T -s &quot;14:00:00&quot;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 将系统时间写入到硬件时钟</span></span>
<span class="line"><span>hwclock --systohc</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 显示硬件时间</span></span>
<span class="line"><span>hwclock --show</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="区域设置" tabindex="-1"><a class="header-anchor" href="#区域设置"><span>区域设置</span></a></h2><p>时间区域设置这里以两个案例进行讲解。将用到两个命令：locale 和 localectl ，locale 更侧重于显示和诊断当前的区域设置状态，而 localectl 提供了一个更全面的工具，用于管理和配置区域设置和键盘布局。通过这两个命令，用户可以有效地管理和调整系统的本地化设置。如果您要调整键盘布局，可以采用 localectl set-keymap us 命令进行设置。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 当前时间显示格式</span></span>
<span class="line"><span>[root@ntp-client ~]# date</span></span>
<span class="line"><span>Wed May 22 06:01:11 PM CST 2024</span></span>
<span class="line"><span>[root@ntp-client ~]# localectl</span></span>
<span class="line"><span>System Locale: LANG=en_US.UTF-8</span></span>
<span class="line"><span>    VC Keymap: us</span></span>
<span class="line"><span>   X11 Layout: us</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 设置时间本地化格式显示</span></span>
<span class="line"><span>[root@ntp-client ~]# localectl set-locale LC_TIME=C.UTF-8</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 验证是否设置成功</span></span>
<span class="line"><span>[root@ntp-client ~]# localectl</span></span>
<span class="line"><span>System Locale: LANG=en_US.UTF-8</span></span>
<span class="line"><span>               LC_TIME=C.UTF-8</span></span>
<span class="line"><span>    VC Keymap: us</span></span>
<span class="line"><span>   X11 Layout: us</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 退出登录</span></span>
<span class="line"><span>[root@ntp-client ~]# exit</span></span>
<span class="line"><span>logout</span></span>
<span class="line"><span> </span></span>
<span class="line"><span># 重新登录查看时间，已经修改为 24 小时制</span></span>
<span class="line"><span>[root@ntp-client ~]# date</span></span>
<span class="line"><span>Wed May 22 18:03:03 CST 2024</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="最后" tabindex="-1"><a class="header-anchor" href="#最后"><span>最后</span></a></h1><p>以上命令大多是我在实际部署和维护 Rocky Linux 9 时使用频率较高的命令。为了方便回顾和积累，我会持续更新这个命令备忘录，也欢迎你留言补充！</p><p>写文不易，如果你都看到了这里，请点个赞和在看，分享给更多的朋友；也别忘了关注星哥玩云！这里有满满的干货分享，还有轻松有趣的技术交流～点个赞、分享给身边的小伙伴，一起成长，一起玩转技术世界吧！ 😊</p>`,211)]))}const t=a(l,[["render",d]]),h=JSON.parse('{"path":"/article/jddfyujx/","title":"2.Rocky-Linux-9常用命令备忘录","lang":"en-US","frontmatter":{"title":"2.Rocky-Linux-9常用命令备忘录","createTime":"2025/06/13 10:24:25","permalink":"/article/jddfyujx/"},"git":{"createdTime":1750059891000,"updatedTime":1754468658000,"contributors":[{"name":"star","username":"star","email":"star@xgss.net","commits":4,"url":"https://github.com/star"}]},"readingTime":{"minutes":11.28,"words":3385},"filePathRelative":"Rocky-Linux/2.Rocky-Linux-9常用命令备忘录.md"}');export{t as comp,h as data};
